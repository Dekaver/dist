import{_ as x,F as w,r as u,o as p,c as m,b as i,d as o,e as d,l as f,t as g,n as S,f as b,p as T,g as I}from"./index-11eb6111.js";import{P as N}from"./ProductService-0ec95d2b.js";const V={data(){return{products:null,checked:!0,productDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,product:{},selectedProducts:null,filters:{},isSubmitted:!1,statuses:[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}],lproducts:null,editingRows:[]}},productService:null,created(){this.productService=new N,this.initFilters()},mounted(){this.productService.getProducts().then(s=>this.products=s),this.productService.getProducts().then(s=>this.lproducts=s)},methods:{FormNew(){this.product={},this.isSubmitted=!1,this.productDialog=!0},HideDialog(){this.productDialog=!1,this.isSubmitted=!1},saveProduct(){this.isSubmitted=!0,this.product.name.trim()&&(this.product.id?(this.product.inventoryStatus=this.product.inventoryStatus.value?this.product.inventoryStatus.value:this.product.inventoryStatus,this.products[this.findIndexById(this.product.id)]=this.product,this.$toast.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.code=this.createId(),this.product.image="product-placeholder.svg",this.product.inventoryStatus=this.product.inventoryStatus?this.product.inventoryStatus.value:"INSTOCK",this.products.push(this.product),this.$toast.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})),this.productDialog=!1,this.product={})},editProduct(s){this.product={...s},this.productDialog=!0},confirmDeleteProduct(s){this.product=s,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(s=>s.id!==this.product.id),this.deleteProductDialog=!1,this.product={},this.$toast.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})},findIndexById(s){let t=-1;for(let c=0;c<this.products.length;c++)if(this.products[c].id===s){t=c;break}return t},createId(){let s="";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<5;c++)s+=t.charAt(Math.floor(Math.random()*t.length));return s},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.products=this.products.filter(s=>!this.selectedProducts.includes(s)),this.deleteProductsDialog=!1,this.selectedProducts=null,this.$toast.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:w.CONTAINS}}},onRowEditSave(s){let{newData:t,index:c}=s;this.products[c]=t},getStatusLabel(s){switch(s){case"INSTOCK":return"success";case"LOWSTOCK":return"warning";case"OUTOFSTOCK":return"danger";default:return null}}}},a=s=>(T("data-v-979770fa"),s=s(),I(),s),O={class:"grid crud-demo"},F={class:"col-12"},U={class:"card"},K={class:"my-2"},L={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},M=a(()=>i("h5",{class:"m-0"},"Manajemen Departemen",-1)),B={class:"block mt-2 md:mt-0 p-input-icon-left"},j=a(()=>i("i",{class:"pi pi-search"},null,-1)),R=a(()=>i("span",{class:"p-column-title"},"Kode",-1)),q=a(()=>i("span",{class:"p-column-title"},"Departemen",-1)),z={class:"formgrid grid"},A={class:"field col-12 d-flex justifiy-content-center align-items-end"},E=a(()=>i("label",{for:"kode"},"Kode",-1)),H={key:0,class:"p-invalid"},W={class:"field col-12 d-flex justifiy-content-center align-items-end"},Y=a(()=>i("label",{for:"departemen"},"Departemen",-1)),G={key:0,class:"p-invalid"},J={class:"flex align-items-center justify-content-center"},Q=a(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),X={key:0},Z={class:"flex align-items-center justify-content-center"},$=a(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ee={key:0};function te(s,t,c,se,e,n){const y=u("Toast"),r=u("Button"),P=u("FileUpload"),k=u("Toolbar"),_=u("InputText"),h=u("Column"),C=u("DataTable"),v=u("Dialog");return p(),m("div",O,[i("div",F,[i("div",U,[o(y),o(k,{class:"mb-4"},{start:d(()=>[i("div",K,[o(r,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.FormNew},null,8,["onClick"]),o(r,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:n.confirmDeleteSelected,disabled:!e.selectedProducts||!e.selectedProducts.length},null,8,["onClick","disabled"])])]),end:d(()=>[o(P,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),o(r,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=l=>n.exportCSV(l))})]),_:1}),o(C,{ref:"dt",value:e.products,selection:e.selectedProducts,"onUpdate:selection":t[2]||(t[2]=l=>e.selectedProducts=l),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:d(()=>[i("div",L,[M,i("span",B,[j,o(_,{modelValue:e.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=l=>e.filters.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:d(()=>[o(h,{selectionMode:"multiple",headerStyle:"width: 5%"}),o(h,{field:"namagudang",header:"Kode",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(l=>[R,f(" "+g(l.data.code),1)]),_:1}),o(h,{field:"kantor",header:"Departemen",sortable:!0,headerStyle:"width:25%; min-width:10rem;"},{body:d(l=>[q,f(" "+g(s.$h.formatNumber(l.data.price)),1)]),_:1}),o(h,{headerStyle:"width:14%; min-width:10rem;"},{body:d(l=>[o(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:D=>n.editProduct(l.data)},null,8,["onClick"]),o(r,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",onClick:D=>n.confirmDeleteProduct(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),o(v,{visible:e.productDialog,"onUpdate:visible":t[5]||(t[5]=l=>e.productDialog=l),style:{width:"450px"},header:"Departemen Details",modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.HideDialog},null,8,["onClick"]),o(r,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:n.saveProduct},null,8,["onClick"])]),default:d(()=>[i("div",z,[i("div",A,[E,o(_,{id:"kode",modelValue:e.product.kode,"onUpdate:modelValue":t[3]||(t[3]=l=>e.product.kode=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":e.isSubmitted&&!e.product.kode})},null,8,["modelValue","class"]),e.isSubmitted&&!e.product.kode?(p(),m("small",H,"required")):b("",!0)]),i("div",W,[Y,o(_,{id:"departemen",modelValue:e.product.departemen,"onUpdate:modelValue":t[4]||(t[4]=l=>e.product.departemen=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":e.isSubmitted&&!e.product.departemen})},null,8,["modelValue","class"]),e.isSubmitted&&!e.product.departemen?(p(),m("small",G,"required")):b("",!0)])])]),_:1},8,["visible"]),o(v,{visible:e.deleteProductDialog,"onUpdate:visible":t[7]||(t[7]=l=>e.deleteProductDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=l=>e.deleteProductDialog=!1)}),o(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:n.deleteProduct},null,8,["onClick"])]),default:d(()=>[i("div",J,[Q,e.product?(p(),m("span",X,[f("Are you sure you want to delete "),i("b",null,g(e.product.name),1),f("?")])):b("",!0)])]),_:1},8,["visible"]),o(v,{visible:e.deleteProductsDialog,"onUpdate:visible":t[9]||(t[9]=l=>e.deleteProductsDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=l=>e.deleteProductsDialog=!1)}),o(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:n.deleteSelectedProducts},null,8,["onClick"])]),default:d(()=>[i("div",Z,[$,e.product?(p(),m("span",ee,"Are you sure you want to delete the selected products?")):b("",!0)])]),_:1},8,["visible"])])])])}const ie=x(V,[["render",te],["__scopeId","data-v-979770fa"]]);export{ie as default};
