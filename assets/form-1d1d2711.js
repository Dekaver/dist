import{D as v,_ as T,r as n,o as d,c as i,d as r,b as t,e as c,l as S,m as g,q as B,k as p,n as E,t as y}from"./index-11eb6111.js";/* empty css                             */const C={index(e){return v.get(`/absen-periode/${e}`)},update(e,s){return v.patch(`/absen-periode/${e}`,s)}},$={data(){return{selectedType:null,item:{year:null,detail:[]},columns:[{field:"month_name",header:"Bulan",class:"left"},{field:"start",header:"Awal",class:"left"},{field:"end_date",header:"Akhir",class:"left"}],filters:{},isSubmit:!1}},computed:{invalid:function(){return this.item.start_date==null}},watch:{"item.year":function(e){this.getData(e)}},mounted(){this.item.year=new Date().getFullYear(),this.getData(this.item.year).finally(()=>{this.isEdit&&this.getJadwalKerja()})},methods:{onCellEditComplete(e){let{data:s,newValue:_,field:m}=e;switch(m){case"start":s[m]=_;break;case"end_date":s[m]=_;break}},async getData(e){await C.index(e).then(s=>{this.item.detail=s.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Pegawai ",life:3e3})})},async submitForm(){try{C.update(this.item.year,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3})}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})})}catch(e){this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}}}},A={class:"grid"},U={class:"col-12"},I={class:"card"},L=t("h5",null,"Setting Periode Absen",-1),N={class:"p-fluid formgrid grid mt-4"},P={class:"field col-12 md:col-2"},j=t("div",{class:"field col-12 md:col-12"},null,-1),q={class:"col-12 md:col-8 my-5"},z=t("div",{class:"text-center"},"Empty",-1),J={key:0},K={key:1},M={key:2},Y=t("br",null,null,-1),G={class:"grid"},H={class:"col-6"},O={class:"flex flex-wrap gap-3 justify-content-start"};function Q(e,s,_,m,u,f){const V=n("Toast"),k=n("Label"),w=n("InputText"),b=n("Calendar"),D=n("Column"),x=n("DataTable"),F=n("Button");return d(),i(g,null,[r(V),t("div",A,[t("div",U,[t("div",I,[L,t("div",N,[t("div",P,[r(k,{for:"tahun"},{default:c(()=>[S("Tahun")]),_:1}),r(w,{modelValue:u.item.year,"onUpdate:modelValue":s[0]||(s[0]=l=>u.item.year=l),id:"tahun",type:"number"},null,8,["modelValue"])]),j,t("div",q,[r(x,{value:u.item.detail,editMode:"cell",onCellEditComplete:f.onCellEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"table-layout: auto;"},{empty:c(()=>[z]),default:c(()=>[(d(!0),i(g,null,B(u.columns,l=>(d(),p(D,{key:l.field,field:l.field,header:l.header,headerStyle:l.width,class:E(l.class)},{body:c(({data:o,field:a})=>[a=="start"||a=="end_date"?(d(),i("div",J,y(e.$h.formatDate(o[a])),1)):(d(),i("div",K,y(o[a]),1))]),editor:c(({data:o,field:a})=>[a=="start"?(d(),p(b,{key:0,dateFormat:"yy-mm-dd",id:"start",modelValue:o[a],"onUpdate:modelValue":h=>o[a]=h,showIcon:"",iconDisplay:"input"},null,8,["modelValue","onUpdate:modelValue"])):a=="end_date"?(d(),p(b,{key:1,dateFormat:"yy-mm-dd",id:"end_date",modelValue:o[a],"onUpdate:modelValue":h=>o[a]=h,showIcon:"",iconDisplay:"input"},null,8,["modelValue","onUpdate:modelValue"])):(d(),i("div",M,y(o[a]),1))]),_:2},1032,["field","header","headerStyle","class"]))),128))]),_:1},8,["value","onCellEditComplete"])])]),Y,t("div",G,[t("div",H,[t("div",O,[r(F,{label:"Save",onClick:s[1]||(s[1]=l=>f.submitForm())})])])])])])])],64)}const X=T($,[["render",Q]]);export{X as default};
