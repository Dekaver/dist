/* empty css                             */import{a as p}from"./cuti-b6d37e9d.js";import{a as P}from"./jabatan-a5143f42.js";import{_ as x,r,o as b,c as f,d as s,b as i,t as j,e as n,l as u,n as m,m as k,q as w,f as F,k as L}from"./index-11eb6111.js";const B={data(){return{selectedKebijakanCuti:null,selectedPersetujuan1:null,selectedPersetujuan2:null,selectedPersetujuan3:null,selectedPersetujuan4:null,selectedJabatan1:null,selectedJabatan2:null,selectedJabatan3:null,selectedJabatan4:null,lPickedJabatan:null,lJabatan:null,item:{id:null,persetujuan1:null,persetujuan2:null,persetujuan3:null,persetujuan4:null,jabatan_persetujuan1:null,jabatan_persetujuan2:null,jabatan_persetujuan3:null,jabatan_persetujuan4:null,status:!0,master:1,jenis:"h",all_employee:!0,batasan:!1,saldo:null,nama_cuti:null},itemSubCuti:{id:null,id_cuti:null,nama_sub_cuti:null,jumlahhari:null},idKebijakanCuti:null,lKebijakanCuti:null,lFirstApproval:[{id:"1",nama:"Atasan Langsung"},{id:"2",nama:"Head Departemen"},{id:"3",nama:"Jabatan Tertentu"},{id:"4",nama:"Tidak Perlu Persetujuan"}],lSecondApproval:[{id:"1",nama:"Cuti Dapat Diambil"},{id:"2",nama:"Atasan Langsung 2"},{id:"3",nama:"Head Departemen"},{id:"4",nama:"Jabatan Tertentu"}],lThirdApproval:[{id:"1",nama:"Head Departemen"},{id:"2",nama:"Jabatan Tertentu"},{id:"3",nama:"Cuti Dapat Diambil"}],lForthApproval:[{id:"1",nama:"Jabatan Tertentu"},{id:"2",nama:"Cuti Dapat Diambil"}],filters:{},columns:[{field:"nama_sub_cuti",header:"Nama Sub Cuti",class:"left"},{field:"jumlahhari",header:"Jumlah Hari",class:"text-left"}],isJabatanTertentu1:!1,isJabatanTertentu2:!1,isApproval3Visible:!1,isJabatanTertentu3:!1,isApproval4Visible:!1,isJabatanTertentu4:!1,subCuti:[],isCutiNew:!0,isDone:!1,isEdit:!1,isSubmit:!1,deleteFormDialog:!1,formDialog:!1}},computed:{invalid:function(){return this.item.start_date==null}},watch:{"item.persetujuan1":function(t){t==="3"?this.isJabatanTertentu1=!this.jabatan_persetujuan1:(this.isJabatanTertentu1=!1,this.item.jabatan_persetujuan1=null,this.selectedJabatan1=null)},"item.persetujuan2":function(t){t==="4"?(this.isJabatanTertentu2=!this.jabatan_persetujuan2,this.isApproval3Visible=!0):t==="1"?(this.isJabatanTertentu2=!1,this.item.jabatan_persetujuan2=null,this.item.jabatan_persetujuan3=null,this.item.jabatan_persetujuan4=null,this.selectedJabatan2=null,this.selectedJabatan3=null,this.selectedJabatan4=null,this.isJabatanTertentu3=!1,this.isJabatanTertentu4=!1,this.isApproval3Visible=!1,this.isApproval4Visible=!1,this.selectedPersetujuan3=null,this.selectedPersetujuan4=null):(this.isJabatanTertentu2=!1,this.item.jabatan_persetujuan2=null,this.selectedJabatan2=null,this.isApproval3Visible=!0)},"item.persetujuan3":function(t){t==="2"?(this.isJabatanTertentu3=!this.jabatan_persetujuan3,this.isApproval4Visible=!0):t==="3"?(this.isJabatanTertentu3=!1,this.item.jabatan_persetujuan3=null,this.item.jabatan_persetujuan4=null,this.selectedJabatan3=null,this.selectedJabatan4=null,this.selectedPersetujuan4=null,this.isApproval4Visible=!1,this.isJabatanTertentu4=!1):(this.isJabatanTertentu3=!1,this.item.jabatan_persetujuan3=null,this.selectedJabatan3=null,this.isApproval4Visible=!0)},"item.persetujuan4":function(t){t==="1"?this.isJabatanTertentu4=!this.isJabatanTertentu4:(this.isJabatanTertentu4=!1,this.item.jabatan_persetujuan4=null,this.selectedJabatan4=null)}},mounted(){this.item.id=this.$route.params.id?this.$route.params.id:null,this.isEdit=!!this.$route.params.id,this.item.saldo=0,this.getData(),this.getJabatanPicked(),this.getCutiMaster(),this.isEdit&&this.getKebijakanById()},methods:{async getData(){await p.getJabatan().then(t=>{this.lPickedJabatan=[t.data.data,[]]}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Pegawai ",life:3e3})})},async getJabatanPicked(){await P.index().then(t=>{this.lJabatan=t.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Jabatan ",life:3e3})})},async getCutiMaster(){await p.getKebijakanCuti().then(t=>{this.lKebijakanCuti=t.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Cuti ",life:3e3})})},async getKebijakanById(){await p.getById(this.item.id).then(t=>{this.item=t.data.data,this.selectedPersetujuan1=this.lFirstApproval.find(a=>a.id===t.data.data.persetujuan1),this.selectedPersetujuan2=this.lSecondApproval.find(a=>a.id===t.data.data.persetujuan2),this.selectedPersetujuan3=this.lThirdApproval.find(a=>a.id===t.data.data.persetujuan3),this.selectedPersetujuan4=this.lForthApproval.find(a=>a.id===t.data.data.persetujuan4),this.selectedJabatan1=this.lJabatan.find(a=>a.id===t.data.data.jabatan_persetujuan1),this.selectedJabatan2=this.lJabatan.find(a=>a.id===t.data.data.jabatan_persetujuan2),this.selectedJabatan3=this.lJabatan.find(a=>a.id===t.data.data.jabatan_persetujuan3),this.selectedJabatan4=this.lJabatan.find(a=>a.id===t.data.data.jabatan_persetujuan4),this.lPickedJabatan[1]=t.data.data.cuti_jabatan,this.subCuti=t.data.data.sub_cuti}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Cuti ",life:3e3})})},async updateSubCuti(){await p.updateSubCuti(this.itemSubCuti.id,this.itemSubCuti).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),this.formDialog=!1,this.getKebijakanById()}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Cuti ",life:3e3})})},async destroy(){await p.deleteSubCuti(this.itemSubCuti.id).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),this.deleteFormDialog=!1,this.getKebijakanById()}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Cuti ",life:3e3})})},confirmEditSubCuti(t){this.itemSubCuti={...t},this.formDialog=!0},async submitForm(){try{this.isEdit?p.update(this.item.id,{...this.item,jabatan:this.lPickedJabatan[1]??[]}).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"cuti"})},1200)}):this.isCutiNew?(delete this.item.id,p.store({...this.item,jabatan:this.lPickedJabatan[1]??[]}).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"cuti"})},1200)}).catch(t=>{this.$toast.add({severity:"error",summary:"Failed",detail:t.response.data.message,life:3e3})})):p.storeSubCuti({id_cuti:this.idKebijakanCuti,nama_sub_cuti:this.item.nama_cuti,jumlahhari:this.item.saldo}).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"cuti"})},1200)}).catch(t=>{this.$toast.add({severity:"error",summary:"Failed",detail:t.response.data.message,life:3e3})})}catch(t){this.$toast.add({severity:"error",summary:"Failed",detail:t.response.data.message,life:3e3})}},confirmDeleteSubCuti(t){this.itemSubCuti={...t},this.deleteFormDialog=!0},selectKebijakanCuti(t){this.idKebijakanCuti=t.value.id},selectApproval1(t){this.item.persetujuan1=t.value.id},selectApproval2(t){this.item.persetujuan2=t.value.id},selectApproval3(t){this.item.persetujuan3=t.value.id},selectApproval4(t){this.item.persetujuan4=t.value.id},selectJabatan1(t){this.item.jabatan_persetujuan1=t.value.id},selectJabatan2(t){this.item.jabatan_persetujuan2=t.value.id},selectJabatan3(t){this.item.jabatan_persetujuan3=t.value.id},selectJabatan4(t){this.item.jabatan_persetujuan4=t.value.id}}},K={class:"grid"},N={class:"col-12"},U={class:"card"},I={class:"p-fluid formgrid grid mt-4"},E={class:"field col-12 md:col-4"},H=i("div",{class:"field col-12"},null,-1),q={class:"field col-12 md:col-2 align-self-center mt-4"},O={class:"flex align-items-center"},Y={key:0},z={key:1},M=i("label",{for:"isCutiNew",class:"ml-2"}," Cuti Baru ",-1),G=i("div",{class:"field col-12"},null,-1),Q={class:"field col-12 md:col-2"},R=i("div",{class:"field col-12 md:col-1 align-self-center mt-4"},[i("span",{class:"font-bold"},"Hari/tahun")],-1),W={class:"field col-12 md:col-2 align-self-center mt-4"},X={class:"flex align-items-center"},Z=i("label",{for:"batasan",class:"ml-2"}," Atau Tanpa Batasan",-1),$=i("div",{class:"field col-12"},null,-1),ee={class:"field col-12 md:col-2"},te=i("div",{class:"field col-12"},null,-1),ae={class:"field col-12 md:col-2"},ie=i("div",{class:"field col-12"},null,-1),le=i("div",{class:"field col-12"},null,-1),se=i("div",{class:"field col-12"},null,-1),ne={class:"field col-12 md:col-4 align-self-center mt-4"},ue={class:"flex align-items-center"},oe=i("label",{for:"all_employee",class:"ml-2"}," Cuti ini diberikan kepada seluruh karyawan ",-1),de=i("div",{class:"field col-12"},null,-1),re={class:"my-4"},me={class:"flex-1 flex flex-column gap-2"},ce={class:"font-bold"},pe=i("i",{class:"pi pi-briefcase mr-3"},null,-1),be={class:"col-12 md:col-4 my-5"},he=i("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[i("span",null,"Daftar Sub Cuti")],-1),fe=i("div",{class:"text-center"},"Empty",-1),_e={class:"formgrid grid"},je={class:"field col-12"},ve={class:"field col-12"},Ce={class:"flex align-items-center justify-content-center"},ge=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Je={key:0},ye=i("br",null,null,-1),Ve={class:"grid"},ke={class:"col-6"},Te={class:"flex flex-wrap gap-3 justify-content-start"};function De(t,a,Se,Ae,e,o){const T=r("Toast"),d=r("Label"),g=r("InputText"),c=r("Dropdown"),_=r("Checkbox"),J=r("InputNumber"),D=r("PickList"),y=r("Column"),S=r("ActionButton"),A=r("DataTable"),h=r("Button"),V=r("Dialog");return b(),f(k,null,[s(T),i("div",K,[i("div",N,[i("div",U,[i("h5",null,j(e.isEdit?"Edit":"Buat")+" Kebijakan Cuti",1),i("div",I,[i("div",E,[s(d,{for:"nama_cuti",required:""},{default:n(()=>[u("Nama Cuti")]),_:1}),s(g,{modelValue:e.item.nama_cuti,"onUpdate:modelValue":a[0]||(a[0]=l=>e.item.nama_cuti=l),id:"nama_cuti",type:"text"},null,8,["modelValue"])]),H,i("div",{class:m(["field col-12 md:col-2",{hidden:e.isCutiNew}])},[s(d,{for:"jenis"},{default:n(()=>[u("Bagian dari cuti")]),_:1}),s(c,{id:"jenis",modelValue:e.selectedKebijakanCuti,"onUpdate:modelValue":a[1]||(a[1]=l=>e.selectedKebijakanCuti=l),options:e.lKebijakanCuti,optionLabel:"nama_cuti",onChange:o.selectKebijakanCuti},null,8,["modelValue","options","onChange"])],2),i("div",q,[i("div",O,[e.isEdit?(b(),f("div",Y,[s(_,{modelValue:e.isCutiNew,"onUpdate:modelValue":a[2]||(a[2]=l=>e.isCutiNew=l),inputId:"isCutiNew",binary:!0,value:"Cuti Baru",disabled:""},null,8,["modelValue"])])):(b(),f("div",z,[s(_,{modelValue:e.isCutiNew,"onUpdate:modelValue":a[3]||(a[3]=l=>e.isCutiNew=l),inputId:"isCutiNew",binary:!0,value:"Cuti Baru"},null,8,["modelValue"])])),M])]),G,i("div",Q,[s(d,{for:"saldo"},{default:n(()=>[u("Untuk cuti ini, saldo setiap staf adalah")]),_:1}),s(J,{modelValue:e.item.saldo,"onUpdate:modelValue":a[4]||(a[4]=l=>e.item.saldo=l),min:0,id:"saldo"},null,8,["modelValue"])]),R,i("div",W,[i("div",X,[s(_,{modelValue:e.item.batasan,"onUpdate:modelValue":a[5]||(a[5]=l=>e.item.batasan=l),inputId:"batasan",binary:!0,value:"Atau Tanpa Batasan"},null,8,["modelValue"]),Z])])]),i("div",{class:m(["p-fluid formgrid grid mt-4",{hidden:!e.isCutiNew}])},[$,i("div",ee,[s(d,{for:"persetujuan1"},{default:n(()=>[u("Persetujuan Pertama")]),_:1}),s(c,{id:"persetujuan1",modelValue:e.selectedPersetujuan1,"onUpdate:modelValue":a[6]||(a[6]=l=>e.selectedPersetujuan1=l),options:e.lFirstApproval,optionLabel:"nama",onChange:o.selectApproval1},null,8,["modelValue","options","onChange"])]),i("div",{class:m(["field col-12 md:col-2",{hidden:!e.isJabatanTertentu1}])},[s(d,{for:"jabatan_persetujuan1"},{default:n(()=>[u("Yakni Oleh")]),_:1}),s(c,{id:"jabatan_persetujuan1",modelValue:e.selectedJabatan1,"onUpdate:modelValue":a[7]||(a[7]=l=>e.selectedJabatan1=l),options:e.lJabatan,optionLabel:"jabatan",onChange:o.selectJabatan1},null,8,["modelValue","options","onChange"])],2),te,i("div",ae,[s(d,{for:"persetujuan2"},{default:n(()=>[u("Persetujuan Kedua")]),_:1}),s(c,{id:"persetujuan2",modelValue:e.selectedPersetujuan2,"onUpdate:modelValue":a[8]||(a[8]=l=>e.selectedPersetujuan2=l),options:e.lSecondApproval,optionLabel:"nama",onChange:o.selectApproval2},null,8,["modelValue","options","onChange"])]),i("div",{class:m(["field col-12 md:col-2",{hidden:!e.isJabatanTertentu2}])},[s(d,{for:"jabatan_persetujuan2"},{default:n(()=>[u("Yakni Oleh")]),_:1}),s(c,{id:"jabatan_persetujuan2",modelValue:e.selectedJabatan2,"onUpdate:modelValue":a[9]||(a[9]=l=>e.selectedJabatan2=l),options:e.lJabatan,optionLabel:"jabatan",onChange:o.selectJabatan2},null,8,["modelValue","options","onChange"])],2),ie,i("div",{class:m(["field col-12 md:col-2",{hidden:!e.isApproval3Visible}])},[s(d,{for:"persetujuan2"},{default:n(()=>[u("Persetujuan Ketiga")]),_:1}),s(c,{id:"persetujuan2",modelValue:e.selectedPersetujuan3,"onUpdate:modelValue":a[10]||(a[10]=l=>e.selectedPersetujuan3=l),options:e.lThirdApproval,optionLabel:"nama",onChange:o.selectApproval3},null,8,["modelValue","options","onChange"])],2),i("div",{class:m(["field col-12 md:col-2",{hidden:!e.isJabatanTertentu3}])},[s(d,{for:"jabatan_persetujuan3"},{default:n(()=>[u("Yakni Oleh")]),_:1}),s(c,{id:"jabatan_persetujuan3",modelValue:e.selectedJabatan3,"onUpdate:modelValue":a[11]||(a[11]=l=>e.selectedJabatan3=l),options:e.lJabatan,optionLabel:"jabatan",onChange:o.selectJabatan3},null,8,["modelValue","options","onChange"])],2),le,i("div",{class:m(["field col-12 md:col-2",{hidden:!e.isApproval4Visible}])},[s(d,{for:"persetujuan4"},{default:n(()=>[u("Persetujuan Keempat")]),_:1}),s(c,{id:"persetujuan4",modelValue:e.selectedPersetujuan4,"onUpdate:modelValue":a[12]||(a[12]=l=>e.selectedPersetujuan4=l),options:e.lForthApproval,optionLabel:"nama",onChange:o.selectApproval4},null,8,["modelValue","options","onChange"])],2),i("div",{class:m(["field col-12 md:col-2",{hidden:!e.isJabatanTertentu4}])},[s(d,{for:"jabatan_persetujuan4"},{default:n(()=>[u("Yakni Oleh")]),_:1}),s(c,{id:"jabatan_persetujuan4",modelValue:e.selectedJabatan4,"onUpdate:modelValue":a[13]||(a[13]=l=>e.selectedJabatan4=l),options:e.lJabatan,optionLabel:"jabatan",onChange:o.selectJabatan4},null,8,["modelValue","options","onChange"])],2),se,i("div",ne,[i("div",ue,[s(_,{modelValue:e.item.all_employee,"onUpdate:modelValue":a[14]||(a[14]=l=>e.item.all_employee=l),inputId:"all_employee",binary:!0,value:"Cuti ini diberikan kepada seluruh karyawan"},null,8,["modelValue"]),oe])]),de],2),i("div",re,[s(D,{class:m({hidden:e.item.all_employee}),modelValue:e.lPickedJabatan,"onUpdate:modelValue":a[15]||(a[15]=l=>e.lPickedJabatan=l),listStyle:"height:342px",dataKey:"id",breakpoint:"1400px",showSourceControls:!1,showTargetControls:!1},{sourceheader:n(()=>[u(" Nama Jabatan ")]),targetheader:n(()=>[u(" Jabatan yang diberikan ")]),item:n(l=>[i("div",me,[i("span",ce,[pe,u(j(l.item.nama),1)])])]),_:1},8,["class","modelValue"])]),i("div",{class:m({hidden:!e.isEdit})},[i("div",be,[s(A,{value:e.subCuti,tableClass:"editable-cells-table p-datatable-small",tableStyle:"table-layout: auto;"},{header:n(()=>[he]),empty:n(()=>[fe]),default:n(()=>[(b(!0),f(k,null,w(e.columns,l=>(b(),L(y,{key:l.field,field:l.field,header:l.header,headerStyle:l.width,class:m(l.class)},{body:n(({data:v,field:C})=>[i("div",null,j(v[C]),1)]),_:2},1032,["field","header","headerStyle","class"]))),128)),s(y,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:n(({data:l,index:v})=>[s(S,{data:l,index:v,onEdit:C=>o.confirmEditSubCuti(l),onDelete:C=>o.confirmDeleteSubCuti(l)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value"])])],2),s(V,{visible:e.formDialog,"onUpdate:visible":a[19]||(a[19]=l=>e.formDialog=l),style:{width:"450px"},header:"Form Item",modal:!0,class:"p-fluid"},{footer:n(()=>[s(h,{label:"Batal",icon:"pi pi-times",class:"p-button-text",onClick:a[18]||(a[18]=l=>e.formDialog=!1)}),s(h,{label:"Simpan",icon:"pi pi-check",class:"p-button-text",onClick:o.updateSubCuti},null,8,["onClick"])]),default:n(()=>[i("div",_e,[i("div",je,[s(d,{required:"",for:"nama_sub_cuti"},{default:n(()=>[u("Nama Sub Cuti")]),_:1}),s(g,{id:"nama_sub_cuti",modelValue:e.itemSubCuti.nama_sub_cuti,"onUpdate:modelValue":a[16]||(a[16]=l=>e.itemSubCuti.nama_sub_cuti=l),required:"true"},null,8,["modelValue"])]),i("div",ve,[s(d,{required:"",for:"jumlahhari"},{default:n(()=>[u("Jumlah Hari")]),_:1}),s(J,{modelValue:e.itemSubCuti.jumlahhari,"onUpdate:modelValue":a[17]||(a[17]=l=>e.itemSubCuti.jumlahhari=l),min:0,id:"jumlahhari"},null,8,["modelValue"])])])]),_:1},8,["visible"]),s(V,{visible:e.deleteFormDialog,"onUpdate:visible":a[22]||(a[22]=l=>e.deleteFormDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(h,{label:"Tidak",icon:"pi pi-times",class:"p-button-text",onClick:a[20]||(a[20]=l=>e.deleteFormDialog=!1)}),s(h,{label:"Iya",icon:"pi pi-check",class:"p-button-text",onClick:a[21]||(a[21]=l=>o.destroy(e.item))})]),default:n(()=>[i("div",Ce,[ge,e.itemSubCuti?(b(),f("span",Je,[u("Are you sure you want to delete "),i("b",null,j(e.itemSubCuti.nama_sub_cuti),1),u("?")])):F("",!0)])]),_:1},8,["visible"]),ye,i("div",Ve,[i("div",ke,[i("div",Te,[s(h,{label:"Simpan",iconPos:"left",icon:"pi pi-save",onClick:a[23]||(a[23]=l=>o.submitForm())})])])])])])])],64)}const Le=x(B,[["render",De]]);export{Le as default};
