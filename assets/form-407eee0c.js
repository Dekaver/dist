import{a as w}from"./jadwalkerja-c25c7d6d.js";/* empty css                             */import{_ as E,r as u,o as c,c as b,d as n,b as t,t as y,e as d,l as _,m as C,q as B,k as f,n as P}from"./index-11eb6111.js";const J={data(){return{selectedType:null,lPegawai:null,item:{id:null,jmlkerja:null,cycle:null,jenis:null,batas_terlambat:null,batas_pulang:null,start_date:null,nama_kebijakan:null,detail:[]},lStatusType:[{nama:"Harian",kode:"h"},{nama:"Mingguan",kode:"m"}],columns:[{field:"selected",header:"#",class:"left"},{field:"nama_waktu",header:"Hari Kerja",class:"left"},{field:"time_in",header:"Jam Masuk",class:"left"},{field:"space",header:"",class:"left"},{field:"time_out",header:"Jam Keluar",class:"left"},{field:"time_break",header:"Jam Istirahat",class:"left"}],filters:{},isDone:!1,isEdit:!1,isSubmit:!1}},computed:{invalid:function(){return this.item.start_date==null}},watch:{"item.cycle":function(l){if(this.item.jenis==="h"){if(!this.isEdit){this.item.detail=[];let e=0;for(let a=0;a<this.item.cycle;a++)e!=6?e++:e=0,this.item.detail.push({selected:!0,nama_waktu:`Hari Ke ${a+1}`,day:e,time_in:"08:00",time_out:"17:00",time_break:"12:00"})}}else{this.item.detail=[];const e=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];for(let a=0;a<e.length;a++)e[a]=="Sabtu"||e[a]=="Minggu"?this.item.detail.push({selected:!1,nama_waktu:`${e[a]}`,day:a,time_in:"00:00",time_out:"00:00",time_break:"00:00"}):this.item.detail.push({selected:!0,nama_waktu:`${e[a]}`,day:a,time_in:"08:00",time_out:"17:00",time_break:"12:00"})}},"item.jenis":function(l){if(l==="h"){if(!this.isEdit){this.item.detail=[];let e=0;for(let a=0;a<this.item.cycle;a++)e!=6?e++:e=0,this.item.detail.push({selected:!0,nama_waktu:`Hari Ke ${a+1}`,day:e,time_in:"08:00",time_out:"17:00",time_break:"12:00"})}}else{this.item.detail=[];const e=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];for(let a=0;a<e.length;a++)e[a]=="Sabtu"||e[a]=="Minggu"?this.item.detail.push({selected:!1,nama_waktu:`${e[a]}`,day:a,time_in:"00:00",time_out:"00:00",time_break:"00:00"}):this.item.detail.push({selected:!0,nama_waktu:`${e[a]}`,day:a,time_in:"08:00",time_out:"17:00",time_break:"12:00"})}}},mounted(){this.item.id=this.$route.params.id?this.$route.params.id:null,this.isEdit=!!this.$route.params.id,this.item.start_date=this.$serverTime,this.item.cycle=1,this.item.jenis="m",this.selectedType=this.lStatusType[1],this.getData().finally(()=>{this.isEdit&&this.getJadwalKerja()})},methods:{onCellEditComplete(l){let{data:e,newValue:a,field:p}=l;switch(p){case"time_in":e[p]=this.$h.formatTime(a,"HH:mm");break;case"time_out":e[p]=this.$h.formatTime(a,"HH:mm");break;case"time_break":e[p]=this.$h.formatTime(a,"HH:mm");break;case"selected":e[p]=a;break}},async getData(){await w.getPegawai().then(l=>{this.lPegawai=[l.data.data,[]]}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Pegawai ",life:3e3})})},async submitForm(){try{this.item.pegawai=this.lPegawai[1],this.isEdit?w.update(this.item.id,this.item).then(l=>{this.$toast.add({severity:"success",summary:"Successful",detail:l.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"jadwal-kerja.index"})},1200)}).catch(l=>{this.$toast.add({severity:"error",summary:"Failed",detail:l.response.data.message,life:3e3})}):w.store({nama_kebijakan:this.item.nama_kebijakan,batas_terlambat:this.item.batas_terlambat,batas_pulang:this.item.batas_pulang,cycle:this.item.cycle,jenis:this.item.jenis,start_date:this.item.start_date,jmlkerja:this.item.jmlkerja,absen:this.item.absen,detail:this.item.detail,pegawai:this.item.pegawai}).then(l=>{this.$toast.add({severity:"success",summary:"Successful",detail:l.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"jadwal-kerja.index"})},1200)}).catch(l=>{this.$toast.add({severity:"error",summary:"Failed",detail:l.response.data.message,life:3e3})})}catch(l){this.$toast.add({severity:"error",summary:"Failed",detail:l.response.data.message,life:3e3})}},selectTypeJadwalKerja(l){this.item.jenis=l.value.kode},getJadwalKerja(){w.show(this.item.id).then(l=>{this.item=l.data.data,this.item.start_date=this.$h.formatDate(l.data.data.start_date),this.selectedType=this.lStatusType.find(e=>e.kode==l.data.data.jenis),this.lPegawai[1]=l.data.data.pegawai,this.item.detail=l.data.data.detail.map(e=>({...e,time_break:this.$h.formatTime(e.time_break),time_in:this.$h.formatTime(e.time_in),time_out:this.$h.formatTime(e.time_out)}))})}}},F={class:"grid"},H={class:"col-12"},I={class:"card"},M={class:"p-fluid formgrid grid mt-4"},$={class:"field col-12 md:col-4"},N={class:"field col-12 md:col-4"},L={class:"field col-12 md:col-4"},q={class:"field col-12 md:col-2"},O={class:"field col-12 md:col-2"},R=t("div",{class:"field col-12"},null,-1),W={class:"field col-12 md:col-3"},z=t("div",{class:"field col-12 md:col-1 align-self-center mt-4"},[t("span",{class:"font-bold"},"Menit")],-1),A={class:"field col-12 md:col-3"},G=t("div",{class:"field col-12 md:col-1 align-self-center mt-4"},[t("span",{class:"font-bold"},"Menit")],-1),Q={class:"col-12 md:col-6 my-5"},X=t("div",{class:"text-center"},"Empty",-1),Y={key:0,class:"font-bold"},Z={key:2},ee=["onClick"],te=["onClick"],ae=["onClick"],ie={key:4},le={class:"my-4"},se={class:"flex-1 flex flex-column gap-2"},oe={class:"font-bold"},ne={class:"flex align-items-center gap-2"},de=t("i",{class:"pi pi-briefcase"},null,-1),me={class:"text-800 text-sm"},re=t("br",null,null,-1),ue={class:"grid"},ce={class:"col-6"},_e={class:"flex flex-wrap gap-3 justify-content-start"},he={class:"col-6"},pe={class:"flex flex-wrap gap-3 justify-content-end"};function fe(l,e,a,p,s,j){const T=u("Toast"),h=u("Label"),x=u("InputText"),k=u("Calendar"),g=u("InputNumber"),S=u("Dropdown"),V=u("Checkbox"),U=u("Column"),K=u("DataTable"),D=u("PickList"),v=u("Button");return c(),b(C,null,[n(T),t("div",F,[t("div",H,[t("div",I,[t("h5",null,y(s.isEdit?"Edit":"Buat")+" Kebijakan Jadwal Kerja",1),t("div",M,[t("div",$,[n(h,{for:"nama_kebijakan",required:""},{default:d(()=>[_("Nama Jadwal Kerja")]),_:1}),n(x,{modelValue:s.item.nama_kebijakan,"onUpdate:modelValue":e[0]||(e[0]=i=>s.item.nama_kebijakan=i),id:"nama_kebijakan",type:"text"},null,8,["modelValue"])]),t("div",N,[n(h,{for:"start_date",required:""},{default:d(()=>[_("Tanggal Mulai Berlaku")]),_:1}),n(k,{dateFormat:"dd-mm-yy",modelValue:s.item.start_date,"onUpdate:modelValue":e[1]||(e[1]=i=>s.item.start_date=i),inputId:"start_date",showButtonBar:"",showIcon:"",iconDisplay:"input"},null,8,["modelValue"])]),t("div",L,[n(h,{for:"jmlkerja"},{default:d(()=>[_("Hari Kerja Sebulan")]),_:1}),n(g,{modelValue:s.item.jmlkerja,"onUpdate:modelValue":e[2]||(e[2]=i=>s.item.jmlkerja=i),min:0,id:"jmlkerja"},null,8,["modelValue"])]),t("div",q,[n(h,{for:"cycle"},{default:d(()=>[_("Cycle")]),_:1}),n(g,{modelValue:s.item.cycle,"onUpdate:modelValue":e[3]||(e[3]=i=>s.item.cycle=i),min:0,id:"cycle"},null,8,["modelValue"])]),t("div",O,[n(h,{for:"jenis"},{default:d(()=>[_("Tipe")]),_:1}),n(S,{id:"jenis",modelValue:s.selectedType,"onUpdate:modelValue":e[4]||(e[4]=i=>s.selectedType=i),options:s.lStatusType,optionLabel:"nama",onChange:j.selectTypeJadwalKerja},null,8,["modelValue","options","onChange"])]),R,t("div",W,[n(h,{for:"batas_terlambat",required:""},{default:d(()=>[_("Batas Terlambat")]),_:1}),n(g,{modelValue:s.item.batas_terlambat,"onUpdate:modelValue":e[5]||(e[5]=i=>s.item.batas_terlambat=i),min:0,id:"batas_terlambat"},null,8,["modelValue"])]),z,t("div",A,[n(h,{for:"batas_pulang",required:""},{default:d(()=>[_("Batas Pulang Cepat")]),_:1}),n(g,{modelValue:s.item.batas_pulang,"onUpdate:modelValue":e[6]||(e[6]=i=>s.item.batas_pulang=i),min:0,id:"batas_pulang"},null,8,["modelValue"])]),G,t("div",Q,[n(K,{value:s.item.detail,editMode:"cell",onCellEditComplete:j.onCellEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"table-layout: auto;"},{empty:d(()=>[X]),default:d(()=>[(c(!0),b(C,null,B(s.columns,i=>(c(),f(U,{key:i.field,field:i.field,header:i.header,headerStyle:i.width,class:P(i.class)},{body:d(({data:r,field:o})=>[o=="space"?(c(),b("span",Y,"S/d")):o=="selected"?(c(),f(V,{key:1,modelValue:r[o],"onUpdate:modelValue":m=>r[o]=m,id:"selected",binary:!0},null,8,["modelValue","onUpdate:modelValue"])):(c(),b("div",Z,y(r[o]),1))]),editor:d(({data:r,field:o})=>[o=="time_in"?(c(),f(k,{key:0,dateFormat:" ",id:"time_in",modelValue:r[o],"onUpdate:modelValue":m=>r[o]=m,showIcon:"",iconDisplay:"input",timeOnly:""},{inputicon:d(({clickCallback:m})=>[t("i",{class:"pi pi-clock",onClick:m},null,8,ee)]),_:2},1032,["modelValue","onUpdate:modelValue"])):o=="time_out"?(c(),f(k,{key:1,dateFormat:" ",id:"time_out",modelValue:r[o],"onUpdate:modelValue":m=>r[o]=m,showIcon:"",iconDisplay:"input",timeOnly:""},{inputicon:d(({clickCallback:m})=>[t("i",{class:"pi pi-clock",onClick:m},null,8,te)]),_:2},1032,["modelValue","onUpdate:modelValue"])):o=="time_break"?(c(),f(k,{key:2,dateFormat:" ",id:"time_break",modelValue:r[o],"onUpdate:modelValue":m=>r[o]=m,showIcon:"",iconDisplay:"input",timeOnly:""},{inputicon:d(({clickCallback:m})=>[t("i",{class:"pi pi-clock",onClick:m},null,8,ae)]),_:2},1032,["modelValue","onUpdate:modelValue"])):o=="selected"?(c(),f(V,{key:3,modelValue:r[o],"onUpdate:modelValue":m=>r[o]=m,id:"selected",binary:`${!r[o]}`},null,8,["modelValue","onUpdate:modelValue","binary"])):(c(),b("div",ie,y(r[o]),1))]),_:2},1032,["field","header","headerStyle","class"]))),128))]),_:1},8,["value","onCellEditComplete"])])]),t("div",le,[n(D,{modelValue:s.lPegawai,"onUpdate:modelValue":e[7]||(e[7]=i=>s.lPegawai=i),listStyle:"height:342px",dataKey:"id",breakpoint:"1400px",showSourceControls:!1,showTargetControls:!1},{sourceheader:d(()=>[_(" Nama Pegawai ")]),targetheader:d(()=>[_(" Pegawai yang diberikan ")]),item:d(i=>[t("div",se,[t("span",oe,y(i.item.nama),1),t("div",ne,[de,t("span",me,y(i.item.jabatan),1)])])]),_:1},8,["modelValue"])]),re,t("div",ue,[t("div",ce,[t("div",_e,[n(v,{label:"Back",severity:"secondary",iconPos:"left",icon:"pi pi-arrow-left",onClick:e[8]||(e[8]=i=>this.$router.back())})])]),t("div",he,[t("div",pe,[n(v,{label:"Save",onClick:e[9]||(e[9]=i=>j.submitForm())})])])])])])])],64)}const ge=E(J,[["render",fe]]);export{ge as default};
