/* empty css                             */import{a as C}from"./lembur-41c5a566.js";import{a as M}from"./jabatan-a5143f42.js";import{_ as U,r as b,o as d,c as h,d as i,b as t,t as v,e as u,l as m,m as P,q as w,n as f,k as _}from"./index-11eb6111.js";const W={data(){return{selectedKebijakanCuti:null,selectedPersetujuan1:null,selectedPersetujuan2:null,selectedPersetujuan3:null,selectedPersetujuan4:null,selectedJabatan1:null,selectedJabatan2:null,selectedJabatan3:null,selectedJabatan4:null,lPickedPegawai:null,lJabatan:null,item:{id:null,persetujuan1:null,persetujuan2:null,persetujuan3:null,persetujuan4:null,jabatan_persetujuan1:null,jabatan_persetujuan2:null,jabatan_persetujuan3:null,jabatan_persetujuan4:null,kebijakan:!0,biaya:null,nama:null},lKebijakanCuti:null,lFirstApproval:[{id:"1",nama:"Atasan Langsung"},{id:"2",nama:"Head Departemen"},{id:"3",nama:"Jabatan Tertentu"},{id:"4",nama:"Tidak Perlu Persetujuan"}],lSecondApproval:[{id:"1",nama:"Lembur Dapat Diambil"},{id:"2",nama:"Atasan Langsung 2"},{id:"3",nama:"Head Departemen"},{id:"4",nama:"Jabatan Tertentu"}],lThirdApproval:[{id:"1",nama:"Head Departemen"},{id:"2",nama:"Jabatan Tertentu"},{id:"3",nama:"Lembur Dapat Diambil"}],lForthApproval:[{id:"1",nama:"Jabatan Tertentu"},{id:"2",nama:"Lembur Dapat Diambil"}],filters:{},columns:[{field:"nama_sub_cuti",header:"Nama Sub Cuti",class:"left"},{field:"jumlahhari",header:"Jumlah Hari",class:"text-left"}],calculationColumns:[{field:"mulai",header:"Jam",class:"left"},{field:"to",header:"",class:"left"},{field:"selesai",header:"",class:"left"},{field:"equals",header:"",class:"left"},{field:"multiply",header:"Pengali",class:"text-left"}],lMultiplierWorkDay:[],lMultiplierWeekendDay:[],isJabatanTertentu1:!1,isJabatanTertentu2:!1,isApproval3Visible:!1,isJabatanTertentu3:!1,isApproval4Visible:!1,isJabatanTertentu4:!1,isBiayaVisible:!1,compensation:"Standard",isCutiNew:!0,isDone:!1,isEdit:!1,isSubmit:!1,deleteFormDialog:!1,formDialog:!1}},computed:{invalid:function(){return this.item.start_date==null}},watch:{compensation:function(e){e==="Biaya perjam"?(this.isBiayaVisible=!0,this.item.kebijakan=!1):(this.item.kebijakan=!0,this.item.biaya=null,this.isBiayaVisible=!1)},"item.persetujuan1":function(e){e==="3"?this.isJabatanTertentu1=!this.jabatan_persetujuan1:(this.isJabatanTertentu1=!1,this.item.jabatan_persetujuan1=null,this.selectedJabatan1=null)},"item.persetujuan2":function(e){e==="4"?(this.isJabatanTertentu2=!this.jabatan_persetujuan2,this.isApproval3Visible=!0):e==="1"?(this.isJabatanTertentu2=!1,this.item.jabatan_persetujuan2=null,this.item.jabatan_persetujuan3=null,this.item.jabatan_persetujuan4=null,this.selectedJabatan2=null,this.selectedJabatan3=null,this.selectedJabatan4=null,this.isJabatanTertentu3=!1,this.isJabatanTertentu4=!1,this.isApproval3Visible=!1,this.isApproval4Visible=!1,this.selectedPersetujuan3=null,this.selectedPersetujuan4=null):(this.isJabatanTertentu2=!1,this.item.jabatan_persetujuan2=null,this.selectedJabatan2=null,this.isApproval3Visible=!0)},"item.persetujuan3":function(e){e==="2"?(this.isJabatanTertentu3=!this.jabatan_persetujuan3,this.isApproval4Visible=!0):e==="3"?(this.isJabatanTertentu3=!1,this.item.jabatan_persetujuan3=null,this.item.jabatan_persetujuan4=null,this.selectedJabatan3=null,this.selectedJabatan4=null,this.selectedPersetujuan4=null,this.isApproval4Visible=!1,this.isJabatanTertentu4=!1):(this.isJabatanTertentu3=!1,this.item.jabatan_persetujuan3=null,this.selectedJabatan3=null,this.isApproval4Visible=!0)},"item.persetujuan4":function(e){e==="1"?this.isJabatanTertentu4=!this.isJabatanTertentu4:(this.isJabatanTertentu4=!1,this.item.jabatan_persetujuan4=null,this.selectedJabatan4=null)}},mounted(){this.item.id=this.$route.params.id?this.$route.params.id:null,this.isEdit=!!this.$route.params.id,this.item.saldo=0,this.lMultiplierWorkDay=[{jenis:"d",urut:"0",mulai:null,selesai:null,multiply:null}],this.lMultiplierWeekendDay=[{jenis:"e",urut:"0",mulai:null,selesai:null,multiply:null}],this.getData(),this.getJabatanPicked(),this.isEdit&&this.getLemburById()},methods:{onCellEditComplete(e){let{data:a,newValue:J,field:k}=e;switch(k){case"mulai":a[k]=J;break;case"selesai":a[k]=J;break;case"multiply":a[k]=J;break}},async getData(){await C.getPegawai().then(e=>{this.lPickedPegawai=[e.data.data,[]]}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Pegawai ",life:3e3})})},async getJabatanPicked(){await M.index().then(e=>{this.lJabatan=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Jabatan ",life:3e3})})},async getLemburById(){await C.getById(this.item.id).then(e=>{this.item=e.data.data,this.selectedPersetujuan1=this.lFirstApproval.find(a=>a.id===e.data.data.persetujuan1),this.selectedPersetujuan2=this.lSecondApproval.find(a=>a.id===e.data.data.persetujuan2),this.selectedPersetujuan3=this.lThirdApproval.find(a=>a.id===e.data.data.persetujuan3),this.selectedPersetujuan4=this.lForthApproval.find(a=>a.id===e.data.data.persetujuan4),this.selectedJabatan1=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan1),this.selectedJabatan2=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan2),this.selectedJabatan3=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan3),this.selectedJabatan4=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan4),this.lMultiplierWorkDay=e.data.data.multiplier.filter(a=>a.jenis==="d"),this.lMultiplierWeekendDay=e.data.data.multiplier.filter(a=>a.jenis==="e"),this.compensation=e.data.data.kebijakan?"Standard":"Biaya perjam",this.lPickedPegawai[1]=e.data.data.pegawai}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Lembur ",life:3e3})})},async submitForm(){try{this.isEdit?C.update(this.item.id,{...this.item,pegawai:this.lPickedPegawai[1],multiplier:[...this.lMultiplierWorkDay,...this.lMultiplierWeekendDay]}).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"lembur"})},1200)}):(delete this.item.id,C.store({...this.item,pegawai:this.lPickedPegawai[1],multiplier:[...this.lMultiplierWorkDay,...this.lMultiplierWeekendDay]}).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),setTimeout(()=>{this.$router.push({name:"lembur"})},1200)}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}))}catch(e){this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}},deleteWeekDayMultiplier(e){e!==0&&this.lMultiplierWorkDay.splice(e,1)},deleteWeekEndMultiplier(e){e!==0&&this.lMultiplierWeekendDay.splice(e,1)},addWeekDayMultiplier(e){this.lMultiplierWorkDay.push({jenis:"d",urut:"0",mulai:null,selesai:null,multiply:null})},addWeekEndMultiplier(e){this.lMultiplierWeekendDay.push({jenis:"e",urut:"0",mulai:null,selesai:null,multiply:null})},selectApproval1(e){this.item.persetujuan1=e.value.id},selectApproval2(e){this.item.persetujuan2=e.value.id},selectApproval3(e){this.item.persetujuan3=e.value.id},selectApproval4(e){this.item.persetujuan4=e.value.id},selectJabatan1(e){this.item.jabatan_persetujuan1=e.value.id},selectJabatan2(e){this.item.jabatan_persetujuan2=e.value.id},selectJabatan3(e){this.item.jabatan_persetujuan3=e.value.id},selectJabatan4(e){this.item.jabatan_persetujuan4=e.value.id}}},S={class:"grid"},B={class:"col-12"},E={class:"card"},F={class:"p-fluid formgrid grid mt-4"},I={class:"field col-12 md:col-4"},K=t("div",{class:"field col-12"},null,-1),N={class:"field col-12 md:col-4"},H=t("div",{class:"field col-12 md:col-8"},null,-1),q={class:"col-6 md:col-6"},O=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("span",null,"Hari Kerja")],-1),Y=t("div",{class:"text-center"},"Empty",-1),R={key:0,class:"font-bold"},z={key:1,class:"font-bold"},G={key:2},Q={key:3},X={class:"col-6 md:col-6"},Z=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("span",null,"Hari Libur")],-1),$=t("div",{class:"text-center"},"Empty",-1),ee={key:0,class:"font-bold"},ae={key:1,class:"font-bold"},te={key:2},le={key:3},se={class:"field col-12 md:col-6 mt-4"},ie={class:"flex justify-content-justify mt-4"},ne={class:"flex align-items-center"},ue=t("label",{for:"compensation1",class:"font-bold ml-3"},"Standard",-1),oe={class:"flex align-items-center ml-8"},de=t("label",{for:"compensation2",class:"font-bold ml-3"},"Biaya perjam",-1),re=t("div",{class:"field col-12"},null,-1),me={class:"p-fluid formgrid grid mt-4"},pe=t("div",{class:"field col-12"},null,-1),ce={class:"field col-12 md:col-2"},he=t("div",{class:"field col-12"},null,-1),be={class:"field col-12 md:col-2"},fe=t("div",{class:"field col-12"},null,-1),je=t("div",{class:"field col-12"},null,-1),_e={class:"my-4"},ye={class:"flex-1 flex flex-column gap-2"},ve={class:"font-bold"},ke={class:"flex align-items-center gap-2"},Ve=t("i",{class:"pi pi-briefcase"},null,-1),Je={class:"text-800 text-sm"},ge=t("br",null,null,-1),Ce={class:"grid"},Pe={class:"col-6"},De={class:"flex flex-wrap gap-3 justify-content-start"};function Te(e,a,J,k,l,r){const x=b("Toast"),p=b("Label"),y=b("InputText"),g=b("Column"),V=b("Button"),D=b("DataTable"),T=b("RadioButton"),A=b("InputNumber"),j=b("Dropdown"),L=b("PickList");return d(),h(P,null,[i(x),t("div",S,[t("div",B,[t("div",E,[t("h5",null,v(l.isEdit?"Edit":"Buat")+" Kebijakan Lembur",1),t("div",F,[t("div",I,[i(p,{for:"nama",required:""},{default:u(()=>[m("Nama Lembur")]),_:1}),i(y,{modelValue:l.item.nama,"onUpdate:modelValue":a[0]||(a[0]=s=>l.item.nama=s),id:"nama",type:"text"},null,8,["modelValue"])]),K,t("div",N,[i(p,{for:"calculation"},{default:u(()=>[m("Perhitungan Lembur")]),_:1})]),H,t("div",q,[i(D,{value:l.lMultiplierWorkDay,editMode:"cell",onCellEditComplete:r.onCellEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"table-layout: auto;"},{header:u(()=>[O]),empty:u(()=>[Y]),default:u(()=>[(d(!0),h(P,null,w(l.calculationColumns,s=>(d(),_(g,{key:s.field,field:s.field,header:s.header,headerStyle:s.width,class:f(s.class)},{body:u(({data:o,field:n})=>[n=="to"?(d(),h("span",R,"to")):n=="equals"?(d(),h("span",z,"=")):(d(),h("div",G,v(o[n]),1))]),editor:u(({data:o,field:n})=>[n=="mulai"?(d(),_(y,{key:0,id:"mulai",type:"number",modelValue:o[n],"onUpdate:modelValue":c=>o[n]=c},null,8,["modelValue","onUpdate:modelValue"])):n=="selesai"?(d(),_(y,{key:1,id:"selesai",type:"number",modelValue:o[n],"onUpdate:modelValue":c=>o[n]=c},null,8,["modelValue","onUpdate:modelValue"])):n=="multiply"?(d(),_(y,{key:2,id:"multiply",type:"number",modelValue:o[n],"onUpdate:modelValue":c=>o[n]=c},null,8,["modelValue","onUpdate:modelValue"])):(d(),h("div",Q,v(o[n]),1))]),_:2},1032,["field","header","headerStyle","class"]))),128)),i(g,{header:"",headerStyle:"width:6%; max-width:1rem;"},{body:u(({data:s,index:o})=>[i(V,{icon:"pi pi-trash",class:"p-button p-button-outlined mr-2",onClick:n=>r.deleteWeekDayMultiplier(o)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete"]),i(V,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary md:col-2 mt-4 mb-6",onClick:a[1]||(a[1]=s=>r.addWeekDayMultiplier())})]),t("div",X,[i(D,{value:l.lMultiplierWeekendDay,editMode:"cell",onCellEditComplete:r.onCellEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"table-layout: auto;"},{header:u(()=>[Z]),empty:u(()=>[$]),default:u(()=>[(d(!0),h(P,null,w(l.calculationColumns,s=>(d(),_(g,{key:s.field,field:s.field,header:s.header,headerStyle:s.width,class:f(s.class)},{body:u(({data:o,field:n})=>[n=="to"?(d(),h("span",ee,"to")):n=="equals"?(d(),h("span",ae,"=")):(d(),h("div",te,v(o[n]),1))]),editor:u(({data:o,field:n})=>[n=="mulai"?(d(),_(y,{key:0,id:"mulai",type:"number",modelValue:o[n],"onUpdate:modelValue":c=>o[n]=c},null,8,["modelValue","onUpdate:modelValue"])):n=="selesai"?(d(),_(y,{key:1,id:"selesai",type:"number",modelValue:o[n],"onUpdate:modelValue":c=>o[n]=c},null,8,["modelValue","onUpdate:modelValue"])):n=="multiply"?(d(),_(y,{key:2,id:"multiply",type:"number",modelValue:o[n],"onUpdate:modelValue":c=>o[n]=c},null,8,["modelValue","onUpdate:modelValue"])):(d(),h("div",le,v(o[n]),1))]),_:2},1032,["field","header","headerStyle","class"]))),128)),i(g,{header:"",headerStyle:"width:6%; max-width:1rem;"},{body:u(({data:s,index:o})=>[i(V,{icon:"pi pi-trash",class:"p-button p-button-outlined mr-2",onClick:n=>r.deleteWeekEndMultiplier(o)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete"]),i(V,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary md:col-2 mt-4 mb-6",onClick:a[2]||(a[2]=s=>r.addWeekEndMultiplier())})]),t("div",se,[i(p,{for:"jenis"},{default:u(()=>[m("Kompensansi Lembur")]),_:1}),t("div",ie,[t("div",ne,[i(T,{modelValue:l.compensation,"onUpdate:modelValue":a[3]||(a[3]=s=>l.compensation=s),inputId:"compensation1",name:"compensation",value:"Standard"},null,8,["modelValue"]),ue]),t("div",oe,[i(T,{modelValue:l.compensation,"onUpdate:modelValue":a[4]||(a[4]=s=>l.compensation=s),inputId:"compensation2",name:"compensation",value:"Biaya perjam"},null,8,["modelValue"]),de])])]),re,t("div",{class:f(["field col-12 md:col-4",{hidden:!l.isBiayaVisible}])},[i(A,{modelValue:l.item.biaya,"onUpdate:modelValue":a[5]||(a[5]=s=>l.item.biaya=s),min:0,id:"biaya"},null,8,["modelValue"])],2)]),t("div",me,[pe,t("div",ce,[i(p,{for:"persetujuan1"},{default:u(()=>[m("Persetujuan Pertama")]),_:1}),i(j,{id:"persetujuan1",modelValue:l.selectedPersetujuan1,"onUpdate:modelValue":a[6]||(a[6]=s=>l.selectedPersetujuan1=s),options:l.lFirstApproval,optionLabel:"nama",onChange:r.selectApproval1},null,8,["modelValue","options","onChange"])]),t("div",{class:f(["field col-12 md:col-2",{hidden:!l.isJabatanTertentu1}])},[i(p,{for:"jabatan_persetujuan1"},{default:u(()=>[m("Yakni Oleh")]),_:1}),i(j,{id:"jabatan_persetujuan1",modelValue:l.selectedJabatan1,"onUpdate:modelValue":a[7]||(a[7]=s=>l.selectedJabatan1=s),options:l.lJabatan,optionLabel:"jabatan",onChange:r.selectJabatan1},null,8,["modelValue","options","onChange"])],2),he,t("div",be,[i(p,{for:"persetujuan2"},{default:u(()=>[m("Persetujuan Kedua")]),_:1}),i(j,{id:"persetujuan2",modelValue:l.selectedPersetujuan2,"onUpdate:modelValue":a[8]||(a[8]=s=>l.selectedPersetujuan2=s),options:l.lSecondApproval,optionLabel:"nama",onChange:r.selectApproval2},null,8,["modelValue","options","onChange"])]),t("div",{class:f(["field col-12 md:col-2",{hidden:!l.isJabatanTertentu2}])},[i(p,{for:"jabatan_persetujuan2"},{default:u(()=>[m("Yakni Oleh")]),_:1}),i(j,{id:"jabatan_persetujuan2",modelValue:l.selectedJabatan2,"onUpdate:modelValue":a[9]||(a[9]=s=>l.selectedJabatan2=s),options:l.lJabatan,optionLabel:"jabatan",onChange:r.selectJabatan2},null,8,["modelValue","options","onChange"])],2),fe,t("div",{class:f(["field col-12 md:col-2",{hidden:!l.isApproval3Visible}])},[i(p,{for:"persetujuan2"},{default:u(()=>[m("Persetujuan Ketiga")]),_:1}),i(j,{id:"persetujuan2",modelValue:l.selectedPersetujuan3,"onUpdate:modelValue":a[10]||(a[10]=s=>l.selectedPersetujuan3=s),options:l.lThirdApproval,optionLabel:"nama",onChange:r.selectApproval3},null,8,["modelValue","options","onChange"])],2),t("div",{class:f(["field col-12 md:col-2",{hidden:!l.isJabatanTertentu3}])},[i(p,{for:"jabatan_persetujuan3"},{default:u(()=>[m("Yakni Oleh")]),_:1}),i(j,{id:"jabatan_persetujuan3",modelValue:l.selectedJabatan3,"onUpdate:modelValue":a[11]||(a[11]=s=>l.selectedJabatan3=s),options:l.lJabatan,optionLabel:"jabatan",onChange:r.selectJabatan3},null,8,["modelValue","options","onChange"])],2),je,t("div",{class:f(["field col-12 md:col-2",{hidden:!l.isApproval4Visible}])},[i(p,{for:"persetujuan4"},{default:u(()=>[m("Persetujuan Keempat")]),_:1}),i(j,{id:"persetujuan4",modelValue:l.selectedPersetujuan4,"onUpdate:modelValue":a[12]||(a[12]=s=>l.selectedPersetujuan4=s),options:l.lForthApproval,optionLabel:"nama",onChange:r.selectApproval4},null,8,["modelValue","options","onChange"])],2),t("div",{class:f(["field col-12 md:col-2",{hidden:!l.isJabatanTertentu4}])},[i(p,{for:"jabatan_persetujuan4"},{default:u(()=>[m("Yakni Oleh")]),_:1}),i(j,{id:"jabatan_persetujuan4",modelValue:l.selectedJabatan4,"onUpdate:modelValue":a[13]||(a[13]=s=>l.selectedJabatan4=s),options:l.lJabatan,optionLabel:"jabatan",onChange:r.selectJabatan4},null,8,["modelValue","options","onChange"])],2)]),t("div",_e,[i(L,{modelValue:l.lPickedPegawai,"onUpdate:modelValue":a[14]||(a[14]=s=>l.lPickedPegawai=s),listStyle:"height:342px",dataKey:"id",breakpoint:"1400px",showSourceControls:!1,showTargetControls:!1},{sourceheader:u(()=>[m(" Nama Pegawai ")]),targetheader:u(()=>[m(" Pegawai yang diberikan ")]),item:u(s=>[t("div",ye,[t("span",ve,v(s.item.nama),1),t("div",ke,[Ve,t("span",Je,v(s.item.jabatan),1)])])]),_:1},8,["modelValue"])]),ge,t("div",Ce,[t("div",Pe,[t("div",De,[i(V,{label:"Simpan",iconPos:"left",icon:"pi pi-save",onClick:a[15]||(a[15]=s=>r.submitForm())})])])])])])])],64)}const Me=U(W,[["render",Te]]);export{Me as default};
