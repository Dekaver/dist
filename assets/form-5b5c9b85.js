import{_ as B,F as E,r as i,A as M,o as r,c as p,b as a,d as s,e as d,t as m,l as C,m as O,q as U,k as v,n as $,f as A,B as V,p as J,g as P}from"./index-11eb6111.js";import{a as k}from"./api-41fd374f.js";import{a as G}from"./options-b2eb7ae6.js";const L={data(){return{lKantor:[],selectedKantor:null,id_kantor:null,tahun:null,isSearch:!1,textFooter:"Total",lItem:[{bulan:1,nama_bulan:"Januari",operasional:0,pendapatan:0},{bulan:2,nama_bulan:"Februari",operasional:0,pendapatan:0},{bulan:3,nama_bulan:"Maret",operasional:0,pendapatan:0},{bulan:4,nama_bulan:"April",operasional:0,pendapatan:0},{bulan:5,nama_bulan:"Mei",operasional:0,pendapatan:0},{bulan:6,nama_bulan:"Juni",operasional:0,pendapatan:0},{bulan:7,nama_bulan:"Juli",operasional:0,pendapatan:0},{bulan:8,nama_bulan:"Agustus",operasional:0,pendapatan:0},{bulan:9,nama_bulan:"September",operasional:0,pendapatan:0},{bulan:10,nama_bulan:"Oktober",operasional:0,pendapatan:0},{bulan:11,nama_bulan:"November",operasional:0,pendapatan:0},{bulan:12,nama_bulan:"Desember",operasional:0,pendapatan:0}],filters:{},isSubmitted:!1,item:{},columns:[{field:"nama_bulan",header:"Bulan"},{field:"pendapatan",header:"Pendapatan",type:"currency"},{field:"operasional",header:"Operasional",type:"currency"}]}},computed:{totalOperasional(){return this.lItem.reduce((e,t)=>e+parseFloat(t.operasional),0)},totalPendapatan(){return this.lItem.reduce((e,t)=>e+parseFloat(t.pendapatan),0)}},created(){this.initFilters()},mounted(){this.getData()},methods:{onCellEditComplete(e){let{data:t,newValue:b,field:_}=e;switch(_){default:if(t[_]==b)return;t[_]=b,this.save();break}},changeKantor(e){this.id_kantor=e.value.id},async getData(){await G.getKantor().then(e=>{this.lKantor=e.data.data}),await k.getTarget(this.$route.params.tahun,this.$route.params.kantor).then(e=>{this.lItem=e.data.data.data,this.item.tahun=this.$route.params.tahun,this.item.id_kantor=this.$route.params.kantor,this.selectedKantor=this.lKantor.find(t=>t.id==this.item.id_kantor)})},FormNew(){this.target={},this.isSubmitted=!1},async save(){this.isSubmitted=!0,this.item.detail=this.lItem,k.update(this.item).then(()=>{this.$toast.add({severity:"success",summary:"Successful",life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Falied",life:3e3})})},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:E.CONTAINS}}}}},h=e=>(J("data-v-3ecfe0c0"),e=e(),P(),e),R={class:"grid crud-demo"},q={class:"col-12"},z={class:"card"},j={class:"card fadein"},H=h(()=>a("h5",{class:"mbe-4"},"Target",-1)),Q={class:"p-fluid formgrid grid"},W={class:"field col-12 md:col-2"},X={class:"p-float-label"},Y=h(()=>a("p",{class:"mb-1"},"Tahun",-1)),Z={class:"field col-2"},ee=h(()=>a("label",{for:"kantor",class:"mb-2"},"Kantor",-1)),ae={class:"flex flex-column"},te={class:"grid"},oe={class:"col-12 md:col-4"},ne=h(()=>a("div",{class:"text-center"},"Empty",-1)),se={key:0},le={key:1,class:"text-right",style:{}},ie={key:2},re={key:2};function de(e,t,b,_,u,y){const I=i("Toast"),w=i("InputText"),S=i("Dropdown"),c=i("Column"),T=i("Button"),g=i("InputNumber"),N=i("Row"),F=i("ColumnGroup"),K=i("DataTable"),x=M("select-all-text");return r(),p("div",R,[a("div",q,[a("div",z,[s(I),a("div",j,[H,a("div",Q,[a("div",W,[a("span",X,[Y,s(w,{modelValue:this.item.tahun,"onUpdate:modelValue":t[0]||(t[0]=o=>this.item.tahun=o),disabled:""},null,8,["modelValue"])])]),a("div",Z,[ee,s(S,{id:"top",modelValue:u.selectedKantor,"onUpdate:modelValue":t[1]||(t[1]=o=>u.selectedKantor=o),disabled:"",options:u.lKantor,optionLabel:"nama",onChange:y.changeKantor},{option:d(o=>[a("div",ae,[a("div",null,m(o.option.nama),1)])]),_:1},8,["modelValue","options","onChange"])])])]),a("div",te,[a("div",oe,[s(K,{value:u.lItem,editMode:"cell",onCellEditComplete:y.onCellEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"width:100%"},{empty:d(()=>[ne]),default:d(()=>[s(c,{header:"#",headerStyle:"width:10px"},{body:d(o=>[C(m(o.index+1),1)]),_:1}),(r(!0),p(O,null,U(u.columns,(o,D)=>(r(),v(c,{field:o.field,header:o.header,class:$(o.class),key:o.field+"_"+D},{body:d(({data:l,field:n})=>[n=="icon"?(r(),p("div",se,[s(T,{icon:l[n],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):A("",!0),o.type=="currency"?(r(),p("div",le,m(e.$h.formatNumber(l[n])),1)):(r(),p("div",ie,m(l[n]),1))]),editor:d(({data:l,field:n})=>[n=="operasional"?V((r(),v(g,{key:0,modelValue:l[n],"onUpdate:modelValue":f=>l[n]=f,inputId:"minmax",class:"min-w-max"},null,8,["modelValue","onUpdate:modelValue"])),[[x]]):n=="pendapatan"?V((r(),v(g,{key:1,modelValue:l[n],"onUpdate:modelValue":f=>l[n]=f,inputId:"minmax",class:"min-w-max"},null,8,["modelValue","onUpdate:modelValue"])),[[x]]):(r(),p("div",re,m(l[n]),1))]),_:2},1032,["field","header","class"]))),128)),s(F,{type:"footer"},{default:d(()=>[s(N,null,{default:d(()=>[s(c,{class:"text-center",colspan:"2",footer:u.textFooter},{default:d(()=>[C(" Total ")]),_:1},8,["footer"]),s(c,{class:"text-right",footer:e.$h.formatNumber(this.totalPendapatan)},null,8,["footer"]),s(c,{class:"text-right",footer:e.$h.formatNumber(this.totalOperasional)},null,8,["footer"])]),_:1})]),_:1})]),_:1},8,["value","onCellEditComplete"])])])])])])}const me=B(L,[["render",de],["__scopeId","data-v-3ecfe0c0"]]);export{me as default};
