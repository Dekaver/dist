import{a as _}from"./jabatan-a5143f42.js";import{_ as v,S as j,r as h,o,c as r,b as s,d as n,e as p,l as c,f as m}from"./index-11eb6111.js";const J={data(){return{item:{id:null,persetujuan1:null,persetujuan2:null,persetujuan3:null,persetujuan4:null,jabatan_persetujuan1:null,jabatan_persetujuan2:null,jabatan_persetujuan3:null,jabatan_persetujuan4:null},lFirstApproval:[{id:null,nama:"Tidak Perlu Persetujuan"},{id:"1",nama:"Atasan Langsung"},{id:"2",nama:"Head Departemen"},{id:"3",nama:"Jabatan Tertentu"}],selectedPersetujuan1:null,selectedJabatan1:null,lSecondApproval:[{id:null,nama:"Dapat Diambil"},{id:"1",nama:"Atasan Langsung 2"},{id:"2",nama:"Head Departemen"},{id:"3",nama:"Jabatan Tertentu"}],selectedPersetujuan2:null,selectedJabatan2:null,lThirdApproval:[{id:null,nama:"Dapat Diambil"},{id:"2",nama:"Head Departemen"},{id:"3",nama:"Jabatan Tertentu"}],selectedPersetujuan3:null,selectedJabatan3:null,lForthApproval:[{id:null,nama:"Dapat Diambil"},{id:"3",nama:"Jabatan Tertentu"}],selectedPersetujuan4:null,selectedJabatan4:null,isEdit:!1}},watch:{"item.persetujuan1":function(e){if(!this.$isLoading.value)switch(e){case null:this.item.jabatan_persetujuan1=null,this.selectedJabatan1=null,this.item.persetujuan2=null;break;case"3":this.selectedJabatan1=null;break;default:this.selectedJabatan1=null,this.selectedPersetujuan2={id:null,nama:"Dapat Diambil"},this.item.persetujuan2=null;break}},"item.persetujuan2":function(e){if(!this.$isLoading.value)switch(e){case null:this.item.jabatan_persetujuan2=null,this.selectedJabatan2=null,this.item.persetujuan3=null;break;case"3":this.selectedJabatan2=null;break;default:this.selectedPersetujuan3={id:null,nama:"Dapat Diambil"},this.item.persetujuan3=null;break}},"item.persetujuan3":function(e){if(!this.$isLoading.value)switch(e){case null:this.item.jabatan_persetujuan3=null,this.selectedJabatan3=null,this.item.persetujuan4=null;break;case"3":this.selectedJabatan3=null;break;default:this.selectedPersetujuan4={id:null,nama:"Dapat Diambil"},this.item.persetujuan4=null;break}},"item.persetujuan4":function(e){if(!this.$isLoading.value)switch(e){case null:this.item.jabatan_persetujuan4=null,this.selectedJabatan4=null;break;case"3":this.selectedJabatan4=null;break}}},methods:{async getData(){await j.index().then(e=>{e.data.data!==void 0&&(this.item=e.data.data,this.selectedPersetujuan1=this.lFirstApproval.find(a=>a.id===e.data.data.persetujuan1),this.selectedPersetujuan2=this.lSecondApproval.find(a=>a.id===e.data.data.persetujuan2),this.selectedPersetujuan3=this.lThirdApproval.find(a=>a.id===e.data.data.persetujuan3),this.selectedPersetujuan4=this.lForthApproval.find(a=>a.id===e.data.data.persetujuan4),this.selectedJabatan1=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan1),this.selectedJabatan2=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan2),this.selectedJabatan3=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan3),this.selectedJabatan4=this.lJabatan.find(a=>a.id===e.data.data.jabatan_persetujuan4),this.isEdit=!0)}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})})},async getJabatanPicked(){await _.index().then(e=>{this.lJabatan=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Jabatan ",life:3e3})})},async saveData(){this.$isLoading.value=!0;try{this.isEdit?await j.update(this.item.id,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Success",detail:e.data.message,life:3e3}),this.getData()}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}):(delete this.item.id,await j.store({...this.item}).then(e=>{this.$toast.add({severity:"success",summary:"Success",detail:e.data.message,life:3e3}),this.getData()}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}))}catch(e){this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}finally{this.$timeoutLoading()}},selectApproval1(e){this.item.persetujuan1=e.value.id},selectApproval2(e){this.item.persetujuan2=e.value.id},selectApproval3(e){this.item.persetujuan3=e.value.id},selectApproval4(e){this.item.persetujuan4=e.value.id},selectJabatan1(e){this.item.jabatan_persetujuan1=e.value.id},selectJabatan2(e){this.item.jabatan_persetujuan2=e.value.id},selectJabatan3(e){this.item.jabatan_persetujuan3=e.value.id},selectJabatan4(e){this.item.jabatan_persetujuan4=e.value.id}},mounted(){this.getJabatanPicked(),this.$isLoading.value=!0,this.getData().finally(()=>{this.$timeoutLoading()})}},g={class:"grid crud-demo"},k={class:"col-12"},y={class:"card"},P=s("h5",null,"Setting Approval Penawaran",-1),V={class:"p-fluid formgrid grid mt-4"},D=s("div",{class:"field col-12"},null,-1),A={class:"field col-12 md:col-3"},C={key:0,class:"field col-12 md:col-3"},L=s("div",{class:"field col-12"},null,-1),w={key:1,class:"field col-12 md:col-3"},T={key:2,class:"field col-12 md:col-3"},F=s("div",{class:"field col-12"},null,-1),S={key:3,class:"field col-12 md:col-3"},U={key:4,class:"field col-12 md:col-3"},E=s("div",{class:"field col-12"},null,-1),B={key:5,class:"field col-12 md:col-3"},x={key:6,class:"field col-12 md:col-3"},N={class:"flex justify-content-left"};function O(e,a,Y,H,t,i){const b=h("Toast"),u=h("Label"),d=h("Dropdown"),f=h("Button");return o(),r("div",g,[s("div",k,[s("div",y,[n(b),P,s("div",V,[D,s("div",A,[n(u,{for:"persetujuan1"},{default:p(()=>[c("Persetujuan Pertama")]),_:1}),n(d,{id:"persetujuan1",modelValue:t.selectedPersetujuan1,"onUpdate:modelValue":a[0]||(a[0]=l=>t.selectedPersetujuan1=l),options:t.lFirstApproval,optionLabel:"nama",onChange:i.selectApproval1},null,8,["modelValue","options","onChange"])]),t.item.persetujuan1=="3"?(o(),r("div",C,[n(u,{for:"jabatan_persetujuan1"},{default:p(()=>[c("Yakni Oleh")]),_:1}),n(d,{id:"jabatan_persetujuan1",modelValue:t.selectedJabatan1,"onUpdate:modelValue":a[1]||(a[1]=l=>t.selectedJabatan1=l),options:e.lJabatan,optionLabel:"jabatan",onChange:i.selectJabatan1},null,8,["modelValue","options","onChange"])])):m("",!0),L,t.item.persetujuan1!=null?(o(),r("div",w,[n(u,{for:"persetujuan2"},{default:p(()=>[c("Persetujuan Kedua")]),_:1}),n(d,{id:"persetujuan2",modelValue:t.selectedPersetujuan2,"onUpdate:modelValue":a[2]||(a[2]=l=>t.selectedPersetujuan2=l),options:t.lSecondApproval,optionLabel:"nama",onChange:i.selectApproval2},null,8,["modelValue","options","onChange"])])):m("",!0),t.item.persetujuan2=="3"?(o(),r("div",T,[n(u,{for:"jabatan_persetujuan2"},{default:p(()=>[c("Yakni Oleh")]),_:1}),n(d,{id:"jabatan_persetujuan2",modelValue:t.selectedJabatan2,"onUpdate:modelValue":a[3]||(a[3]=l=>t.selectedJabatan2=l),options:e.lJabatan,optionLabel:"jabatan",onChange:i.selectJabatan2},null,8,["modelValue","options","onChange"])])):m("",!0),F,t.item.persetujuan2!=null?(o(),r("div",S,[n(u,{for:"persetujuan2"},{default:p(()=>[c("Persetujuan Ketiga")]),_:1}),n(d,{id:"persetujuan2",modelValue:t.selectedPersetujuan3,"onUpdate:modelValue":a[4]||(a[4]=l=>t.selectedPersetujuan3=l),options:t.lThirdApproval,optionLabel:"nama",onChange:i.selectApproval3},null,8,["modelValue","options","onChange"])])):m("",!0),t.item.persetujuan3=="3"?(o(),r("div",U,[n(u,{for:"jabatan_persetujuan3"},{default:p(()=>[c("Yakni Oleh")]),_:1}),n(d,{id:"jabatan_persetujuan3",modelValue:t.selectedJabatan3,"onUpdate:modelValue":a[5]||(a[5]=l=>t.selectedJabatan3=l),options:e.lJabatan,optionLabel:"jabatan",onChange:i.selectJabatan3},null,8,["modelValue","options","onChange"])])):m("",!0),E,t.item.persetujuan3!=null?(o(),r("div",B,[n(u,{for:"persetujuan4"},{default:p(()=>[c("Persetujuan Keempat")]),_:1}),n(d,{id:"persetujuan4",modelValue:t.selectedPersetujuan4,"onUpdate:modelValue":a[6]||(a[6]=l=>t.selectedPersetujuan4=l),options:t.lForthApproval,optionLabel:"nama",onChange:i.selectApproval4},null,8,["modelValue","options","onChange"])])):m("",!0),t.item.persetujuan4=="3"?(o(),r("div",x,[n(u,{for:"jabatan_persetujuan4"},{default:p(()=>[c("Yakni Oleh")]),_:1}),n(d,{id:"jabatan_persetujuan4",modelValue:t.selectedJabatan4,"onUpdate:modelValue":a[7]||(a[7]=l=>t.selectedJabatan4=l),options:e.lJabatan,optionLabel:"jabatan",onChange:i.selectJabatan4},null,8,["modelValue","options","onChange"])])):m("",!0)]),s("div",N,[n(f,{label:"Save",icon:"pi pi-check",class:"mt-4",type:"button",onClick:i.saveData},null,8,["onClick"])])])])])}const z=v(J,[["render",O]]);export{z as default};
