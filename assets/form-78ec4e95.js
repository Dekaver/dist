/* empty css                             */import{a as f}from"./absensi-0bba9da4.js";import{_ as E,r as c,o as s,c as i,d as a,b as n,t as d,e as m,m as Y,q as w,l as k,n as v,f as _,k as $}from"./index-11eb6111.js";const A={data(){return{item:{id:null,tanggal:null,catatan:null,selectedTanggal:null,selectedStatus:null},lStatusType:[{nama:"Harian",kode:"h"},{nama:"Mingguan",kode:"m"}],columns:[{field:"tanggal",header:"Tanggal",class:"left"},{field:"time_in",header:"Jam Masuk",class:"left"},{field:"time_out",header:"Jam Keluar",class:"left"},{field:"keterangan",header:"Status Absen",class:"left"},{field:"catatan",header:"Keterangan",class:"left"}],filters:{},lStatusAbsen:[{nama:"Masuk Tepat Waktu"},{nama:"Masuk Terlambat"},{nama:"Cuti Tahunan"},{nama:"Sakit"},{nama:"Izin"}],detail:[],isDone:!1,isEdit:!1,isClean:!0,isSubmit:!1,name:null,month:null,month_name:null,year:null,formDialog:!1,deleteFormDialog:!1}},computed:{invalid:function(){return this.item.start_date==null}},mounted(){this.item.id=this.$route.query.id,this.isEdit=!!this.$route.params.id,this.name=this.$route.query.name,this.month=this.$route.query.month,this.month_name=this.$route.query.bulan,this.year=this.$route.query.year,this.getData()},methods:{async Save(){try{this.isEdit?f.update({...this.item,tanggal:this.item.selectedTanggal,keterangan:this.item.selectedStatus.nama}).then(e=>{this.formDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.getData()}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}):f.create({...this.item,tanggal:this.item.selectedTanggal,keterangan:this.item.selectedStatus.nama}).then(e=>{this.formDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.getData()}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})})}catch(e){this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}},async Destroy(){f.destroy({id:this.$route.query.id,tanggal:this.item.selectedTanggal}).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.deleteFormDialog=!1,this.getData()}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})})},async getData(){await f.aktivitasAbsen(this.item.id,this.month,this.year).then(e=>{this.detail=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Aktivitas Absen ",life:3e3})})},add(e){this.FormError={},this.item.tanggal=this.$h.formatDate(e.tanggal,"DD-MM-YYYY"),this.item.selectedTanggal=e.tanggal,this.item.catatan=e.catatan??"",this.item.selectedStatus=this.lStatusAbsen[0],this.formDialog=!0,this.isEdit=!1,this.isClean=!0},edit(e){this.FormError={},this.item.tanggal=this.$h.formatDate(e.tanggal,"DD-MM-YYYY"),this.item.selectedTanggal=e.tanggal,this.item.catatan=e.catatan??"";const o=e.keterangan.toLowerCase().split(" , ");this.item.selectedStatus=this.lStatusAbsen.find(b=>b.nama.toLowerCase()===o[0])??this.lStatusAbsen[0],this.formDialog=!0,this.isEdit=!0,this.isClean=!0},check(e){this.FormError={},this.item.tanggal=this.$h.formatDate(e.tanggal,"DD-MM-YYYY"),this.item.selectedTanggal=e.tanggal,this.item.catatan="",this.item.selectedStatus=this.lStatusAbsen[0],this.isEdit=!1,this.isClean=!0,this.Save()},confirmDelete(e){this.FormError={},this.item.tanggal=this.$h.formatDate(e.tanggal,"DD-MM-YYYY"),this.item.selectedTanggal=e.tanggal,this.isEdit=!1,this.deleteFormDialog=!0,this.isClean=!0},HideDialog(){this.formDialog=!1}}},x={class:"grid"},V={class:"col-12"},q={class:"card"},L={class:"my-4 ml-3"},B={class:"p-fluid formgrid grid mt-4 mx-2"},U={class:"col-12 my-5"},H=n("div",{class:"text-center"},"Empty",-1),N={key:0},I={key:0},z={key:0},K={key:1},j={key:2},J={key:3},W={key:1},G={key:0},O={key:1},Q=n("span",{class:"text-red-500 font-bold"},"Libur",-1),R=[Q],X={key:2},Z={key:3},P={key:1},ee={key:0},te={key:1},ae={class:"text-red-500 font-bold"},se={key:2},ie={key:3},le={key:0},ne={key:1},oe={class:"formgrid grid"},re={class:"field col-12"},de={class:"field col-12"},me={class:"field col-12"},ue={class:"flex align-items-center justify-content-center"},ce=n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),he={key:0},ge=n("br",null,null,-1),fe={class:"grid mx-2 mt-2 mb-5"},_e={class:"col-6"},pe={class:"flex flex-wrap gap-3 justify-content-start"};function ye(e,o,b,ke,r,h){const M=c("Toast"),D=c("Column"),u=c("Button"),F=c("DataTable"),p=c("Label"),C=c("InputText"),y=c("ErrorMsg"),T=c("Dropdown"),S=c("Dialog");return s(),i(Y,null,[a(M),n("div",x,[n("div",V,[n("div",q,[n("h5",L,"Absen "+d(r.name)+", Periode "+d(r.month_name)+" "+d(r.year),1),n("div",B,[n("div",U,[a(F,{value:r.detail,tableClass:"editable-cells-table p-datatable-small",tableStyle:"table-layout: auto;"},{empty:m(()=>[H]),default:m(()=>[(s(!0),i(Y,null,w(r.columns,t=>(s(),$(D,{key:t.field,field:t.field,header:t.header,headerStyle:t.width,class:v(t.class)},{body:m(({data:l,field:g})=>[l.is_libur?(s(),i("div",P,[t.field=="tanggal"?(s(),i("div",ee,d(`${l.nama_waktu}, ${e.$h.formatDate(l[g],"DD MMM YYYY")}`),1)):t.field=="time_in"?(s(),i("div",te,[n("span",ae,d(l.nama_hari_libur),1)])):t.field=="keterangan"?(s(),i("div",se,d(l.keterangan),1)):t.field=="catatan"?(s(),i("div",ie,d(l.catatan),1)):_("",!0)])):(s(),i("div",N,[l.selected?(s(),i("div",I,[t.field=="tanggal"?(s(),i("div",z,d(`${l.nama_waktu}, ${e.$h.formatDate(l[g],"DD MMM YYYY")}`),1)):t.field=="time_in"||t.field=="time_out"?(s(),i("div",K,d(e.$h.formatTime(l[g],"HH:mm A")),1)):t.field=="keterangan"?(s(),i("div",j,d(l.keterangan),1)):t.field=="catatan"?(s(),i("div",J,d(l.catatan),1)):_("",!0)])):(s(),i("div",W,[t.field=="tanggal"?(s(),i("div",G,d(`${l.nama_waktu}, ${e.$h.formatDate(l[g],"DD MMM YYYY")}`),1)):t.field=="time_in"?(s(),i("div",O,R)):t.field=="keterangan"?(s(),i("div",X,d(l.keterangan),1)):t.field=="catatan"?(s(),i("div",Z,d(l.catatan),1)):_("",!0)]))]))]),_:2},1032,["field","header","headerStyle","class"]))),128)),a(D,{header:"Ubah Status",class:"ml-auto",headerStyle:"width:14%;min-width:10rem"},{body:m(t=>[t.data.is_absen?(s(),i("div",le,[a(u,{icon:"pi pi-pencil",class:"p-button p-button-primary mr-2",onClick:l=>h.edit(t.data)},null,8,["onClick"]),a(u,{icon:"pi pi-times",class:"p-button p-button-danger mr-2",onClick:l=>h.confirmDelete(t.data)},null,8,["onClick"])])):(s(),i("div",ne,[a(u,{icon:"pi pi-check",class:"p-button p-button-success mr-2",onClick:l=>h.check(t.data)},null,8,["onClick"]),a(u,{icon:"pi pi-plus",class:"p-button p-button-success mr-2",onClick:l=>h.add(t.data)},null,8,["onClick"])]))]),_:1})]),_:1},8,["value"])])]),a(S,{visible:r.formDialog,"onUpdate:visible":o[3]||(o[3]=t=>r.formDialog=t),style:{width:"450px"},header:"Form Item",modal:!0,class:"p-fluid"},{footer:m(()=>[a(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:h.HideDialog},null,8,["onClick"]),a(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:h.Save},null,8,["onClick"])]),default:m(()=>[n("div",oe,[n("div",re,[a(p,{required:"",for:"tanggal"},{default:m(()=>[k("Tanggal")]),_:1}),a(C,{id:"tanggal",modelValue:r.item.tanggal,"onUpdate:modelValue":o[0]||(o[0]=t=>r.item.tanggal=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v(e.FormError.nama&&"p-invalid"),disabled:""},null,8,["modelValue","class"]),a(y,{error:e.FormError.nama},null,8,["error"])]),n("div",de,[a(p,{required:"",for:"status"},{default:m(()=>[k("Status Absen")]),_:1}),a(T,{modelValue:r.item.selectedStatus,"onUpdate:modelValue":o[1]||(o[1]=t=>r.item.selectedStatus=t),id:"status",options:r.lStatusAbsen,optionLabel:"nama",class:"min-w-max"},null,8,["modelValue","options"]),a(y,{error:e.FormError.latitude},null,8,["error"])]),n("div",me,[a(p,{required:"",for:"keterangan"},{default:m(()=>[k("Keterangan")]),_:1}),a(C,{id:"keterangan",modelValue:r.item.catatan,"onUpdate:modelValue":o[2]||(o[2]=t=>r.item.catatan=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v(e.FormError.nama&&"p-invalid")},null,8,["modelValue","class"]),a(y,{error:e.FormError.nama},null,8,["error"])])])]),_:1},8,["visible"]),a(S,{visible:r.deleteFormDialog,"onUpdate:visible":o[6]||(o[6]=t=>r.deleteFormDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:m(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[4]||(o[4]=t=>r.deleteFormDialog=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:o[5]||(o[5]=t=>h.Destroy())})]),default:m(()=>[n("div",ue,[ce,r.item?(s(),i("span",he,"Are you sure you want to delete ?")):_("",!0)])]),_:1},8,["visible"]),ge,n("div",fe,[n("div",_e,[n("div",pe,[a(u,{label:"Back",severity:"secondary",iconPos:"left",icon:"pi pi-arrow-left",onClick:o[7]||(o[7]=t=>this.$router.back())})])])])])])])],64)}const Ce=E(A,[["render",ye]]);export{Ce as default};
