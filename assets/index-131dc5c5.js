import{_ as N,D as k,r as d,o as F,c as U,d as e,e as i,b as n,t as a,l as g,n as w}from"./index-11eb6111.js";import{a as y}from"./pegawai-9c760009.js";import"./custom-zod-e9521e5d.js";import{z as c}from"./index-0ec66d4d.js";function V(t){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/.test(t)}console.log(V);const C=c.object({oldPassword:c.string(),newPassword:c.string(),confirmNewPassword:c.string()}),D={data(){return{backendPath:"http://103.127.98.248:4000",FormError:{},pengguna:{},data:{id:null,nama:null,hp:null,hp2:null,hp3:null,email:null,wa:null,status:null,nama_panggilan:null,tempat_lahir:null,tanggal_lahir:null,jenis_kelamin:null,status_pernikahan:null,golongan_darah:null,nik_ktp:null,alamat_ktp:null,kodepos_ktp:null,provinsi_ktp:null,kabupaten_ktp:null,kecamatan_ktp:null,alamat_sama:null,alamat_domisili:null,kodepos_domisili:null,provinsi_domisili:null,kabupaten_domisili:null,kecamatan_domisili:null,id_agama:null,tinggi_badan:null,berat_badan:null,anak_ke:null,nip:null,mulai_bekerja:null,pkwt:null,is_hd:null,absen:null,status_karyawan:null,nomor_rekening:null,fotonya:null,aktifasi_umt:null,aktifasi_kehadiran:null,is_new:null,pemilik_rekening:null,is_driver:null,id_kantor:null,id_departemen:null,id_jabatan:null,id_site:null,id_level:null,atasan_langsung:null,ttd:null,jabatan_penawaran:null,jabatan:null,departemen:null,agama:null,provinsi_ktp_nama:null,kabupaten_ktp_nama:null,kecamatan_ktp_nama:null,provinsi_domisili_nama:null,kabupaten_domisili_nama:null,kecamatan_domisili_nama:null,username:null,login_terakhir:null,role:null}}},methods:{async getData(){try{const t=await y.show(this.$auth.id);this.data=t.data.data}catch(t){console.log(t)}},async onUpload(t){const o=t.files[0],p=new FormData;p.append("file",o),await k.post("/upload",p).then(async _=>{await this.updateFoto(_.data.data.filename),this.$toast.add({severity:"info",summary:"Success",detail:"File Uploaded",life:1e4})}).catch(_=>{console.log(_)})},async updateFoto(t){try{const o=await y.updateFoto(this.$auth.id,{fotonya:t});this.data.fotonya=o.data.data.fotonya,this.$auth.setFotonya(o.data.data.fotonya),console.log(o)}catch(o){console.log(o)}},async changePassword(){try{const t=C.parse(this.pengguna);if(t.newPassword!==t.confirmNewPassword)throw new Error("New password and confirm password must match.");const o=await k.patch(`/pengguna/${this.$auth.id}/change-password`,t);this.pengguna={},console.log(o),this.$toast.add({severity:"success",summary:"Success",detail:"Change Password",life:1e4})}catch(t){console.log(t),this.$toast.add({severity:"error",summary:"Failed",detail:"Change Password Failed",life:1e4}),t instanceof c.ZodError&&(this.FormError=t.format())}}},mounted(){this.getData()}},E={class:"grid"},K={class:"flex align-items-center gap-4"},S={class:"w-full"},A=n("p",null,"Drag and drop files to here to upload.",-1),T={class:"flex justify-content-between hover:bg-gray-200"},B=n("b",null,"Nama Lengkap",-1),L={class:"flex justify-content-between"},q=n("b",null,"Nama Panggilan",-1),I={class:"flex justify-content-between"},z=n("b",null,"Tempat & Tanggal Lahir",-1),M={class:"flex justify-content-between"},H=n("b",null,"NIP",-1),Z={class:"flex justify-content-between"},G=n("b",null,"NIK KTP",-1),R={class:"flex justify-content-between"},O=n("b",null,"Gender",-1),W={class:"flex justify-content-between"},J=n("b",null,"Status Pernikahan",-1),Q={class:"flex justify-content-between"},X=n("b",null,"Agama",-1),Y={class:"flex justify-content-between"},$=n("b",null,"Alamat sesuai KTP",-1),nn={class:"flex justify-content-between"},en=n("b",null,"Kota/Kabupaten",-1),sn={class:"flex justify-content-between"},an=n("b",null,"Provinsi",-1),ln={class:"flex justify-content-between"},tn=n("b",null,"Kode Pos",-1),on={class:"flex justify-content-between"},dn=n("b",null,"Alamat Tempat Tinggal",-1),un={class:"flex justify-content-between"},rn=n("b",null,"Kota/Kabupaten",-1),cn={class:"flex justify-content-between"},_n=n("b",null,"Provinsi",-1),pn={class:"flex justify-content-between"},mn=n("b",null,"Kode Pos",-1),hn={class:"flex justify-content-between"},fn=n("b",null,"Email",-1),gn={class:"flex justify-content-between"},wn=n("b",null,"WhatsApp",-1),bn={class:"flex justify-content-between"},kn=n("b",null,"No. HP",-1),yn={class:"flex justify-content-between"},vn=n("b",null,"No. HP2",-1),Pn={class:"flex justify-content-between"},xn=n("b",null,"No. HP3",-1),jn={class:"flex justify-content-between"},Nn=n("b",null,"Golongan Darah",-1),Fn={class:"flex justify-content-between"},Un=n("b",null,"Tinggi Badan",-1),Vn={class:"flex justify-content-between"},Cn=n("b",null,"Berat Badan",-1),Dn={class:"flex justify-content-between"},En=n("b",null,"Anak ke",-1),Kn={class:"flex flex-column gap-2 my-2"},Sn={class:"flex flex-column gap-2 my-2"},An={class:"flex flex-column gap-2 my-2"},Tn={class:"flex justify-content-end"};function Bn(t,o,p,_,s,b){const v=d("Image"),P=d("FileUpload"),x=d("Toast"),u=d("Panel"),l=d("Divider"),m=d("Label"),h=d("Password"),f=d("ErrorMsg"),j=d("Button");return F(),U("div",E,[e(u,{header:"Foto Profil",class:"col-6 md:col-12"},{default:i(()=>[n("div",K,[e(v,{src:`${s.backendPath}/src/uploads/storage/${s.data.fotonya}`,alt:"Image",preview:"",imageStyle:"max-width:200px; width:100%; border-radius:4px; aspect-ratio:1/1; object-fit:cover;"},null,8,["src"]),n("div",S,[e(P,{mode:"advanced",name:"demo[]",accept:"image/*",maxFileSize:1e6,onUploader:b.onUpload,chooseLabel:"Pilih File",multiple:"false",fileLimit:"1","custom-upload":!0},{empty:i(()=>[A]),_:1},8,["onUploader"]),e(x)])])]),_:1}),e(u,{header:"Data Pribadi",class:"col-12 md:col-6"},{default:i(()=>[n("div",T,[B,n("span",null,a(s.data.nama),1)]),e(l),n("div",L,[q,n("span",null,a(s.data.nama_panggilan),1)]),e(l),n("div",I,[z,n("span",null,a(s.data.tempat_lahir)+", "+a(t.$h.formatDate(s.data.tanggal_lahir)),1)]),e(l),n("div",M,[H,n("span",null,a(s.data.nip),1)]),e(l),n("div",Z,[G,n("span",null,a(s.data.nik_ktp),1)]),e(l),n("div",R,[O,n("span",null,a(s.data.jenis_kelamin),1)]),e(l),n("div",W,[J,n("span",null,a(s.data.status_pernikahan),1)]),e(l),n("div",Q,[X,n("span",null,a(s.data.agama),1)]),e(l)]),_:1}),e(u,{header:"Alamat",class:"col-12 md:col-6"},{default:i(()=>[n("div",Y,[$,n("span",null,a(s.data.alamat_ktp),1)]),e(l),n("div",nn,[en,n("span",null,a(s.data.kabupaten_ktp_nama),1)]),e(l),n("div",sn,[an,n("span",null,a(s.data.provinsi_ktp_nama),1)]),e(l),n("div",ln,[tn,n("span",null,a(s.data.kodepos_ktp),1)]),e(l),n("div",on,[dn,n("span",null,a(s.data.alamat_domisili),1)]),e(l),n("div",un,[rn,n("span",null,a(s.data.kabupaten_domisili_nama),1)]),e(l),n("div",cn,[_n,n("span",null,a(s.data.provinsi_domisili_nama),1)]),e(l),n("div",pn,[mn,n("span",null,a(s.data.kodepos_domisili),1)]),e(l)]),_:1}),e(u,{header:"Kontak",class:"col-4"},{default:i(()=>[n("div",hn,[fn,n("span",null,a(s.data.email),1)]),e(l),n("div",gn,[wn,n("span",null,a(s.data.wa),1)]),e(l),n("div",bn,[kn,n("span",null,a(s.data.hp),1)]),e(l),n("div",yn,[vn,n("span",null,a(s.data.hp2),1)]),e(l),n("div",Pn,[xn,n("span",null,a(s.data.hp3),1)]),e(l)]),_:1}),e(u,{header:"Lainnya",class:"col-4"},{default:i(()=>[n("div",jn,[Nn,n("span",null,a(s.data.golongan_darah),1)]),e(l),n("div",Fn,[Un,n("span",null,a(s.data.tinggi_badan)+" cm",1)]),e(l),n("div",Vn,[Cn,n("span",null,a(s.data.berat_badan)+" Kg",1)]),e(l),n("div",Dn,[En,n("span",null,a(s.data.anak_ke),1)]),e(l)]),_:1}),e(u,{header:"Informasi Akun",class:"col-4"},{default:i(()=>[n("div",Kn,[e(m,{required:""},{default:i(()=>[g("Old Password")]),_:1}),e(h,{id:"id",modelValue:s.pengguna.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=r=>s.pengguna.oldPassword=r),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":t.isSubmitted&&!s.pengguna.oldPassword}),inputClass:"w-full"},null,8,["modelValue","class"]),e(f,{error:s.FormError.oldPassword},null,8,["error"])]),n("div",Sn,[e(m,{required:""},{default:i(()=>[g("New Password")]),_:1}),e(h,{id:"id",modelValue:s.pengguna.newPassword,"onUpdate:modelValue":o[1]||(o[1]=r=>s.pengguna.newPassword=r),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":t.isSubmitted&&!s.pengguna.newPassword}),inputClass:"w-full"},null,8,["modelValue","class"]),e(f,{error:s.FormError.newPassword},null,8,["error"])]),n("div",An,[e(m,{required:""},{default:i(()=>[g("Confirm New Password")]),_:1}),e(h,{id:"id",modelValue:s.pengguna.confirmNewPassword,"onUpdate:modelValue":o[2]||(o[2]=r=>s.pengguna.confirmNewPassword=r),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":t.isSubmitted&&!s.pengguna.confirmNewPassword}),inputClass:"w-full"},null,8,["modelValue","class"]),e(f,{error:s.FormError.confirmNewPassword},null,8,["error"])]),n("div",Tn,[e(j,{type:"submit",label:"Update Password",onClick:o[3]||(o[3]=r=>b.changePassword())})])]),_:1})])}const Mn=N(D,[["render",Bn]]);export{Mn as default};
