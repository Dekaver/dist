import{_ as x,F as I,r as u,o as m,c as h,b as i,d as l,e as d,l as f,t as b,n as S,f as g,p as T,g as V}from"./index-11eb6111.js";import{P as N}from"./ProductService-0ec95d2b.js";const O={data(){return{products:null,checked:!0,productDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,product:{},selectedProducts:null,filters:{},isSubmitted:!1,statuses:[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}],lproducts:null,editingRows:[]}},productService:null,created(){this.productService=new N,this.initFilters()},mounted(){this.productService.getProducts().then(o=>this.products=o),this.productService.getProducts().then(o=>this.lproducts=o)},methods:{FormNew(){this.product={},this.isSubmitted=!1,this.productDialog=!0},HideDialog(){this.productDialog=!1,this.isSubmitted=!1},saveProduct(){this.isSubmitted=!0,this.product.name.trim()&&(this.product.id?(this.product.inventoryStatus=this.product.inventoryStatus.value?this.product.inventoryStatus.value:this.product.inventoryStatus,this.products[this.findIndexById(this.product.id)]=this.product,this.$toast.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.code=this.createId(),this.product.image="product-placeholder.svg",this.product.inventoryStatus=this.product.inventoryStatus?this.product.inventoryStatus.value:"INSTOCK",this.products.push(this.product),this.$toast.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})),this.productDialog=!1,this.product={})},editProduct(o){this.product={...o},this.productDialog=!0},confirmDeleteProduct(o){this.product=o,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(o=>o.id!==this.product.id),this.deleteProductDialog=!1,this.product={},this.$toast.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})},findIndexById(o){let t=-1;for(let a=0;a<this.products.length;a++)if(this.products[a].id===o){t=a;break}return t},createId(){let o="";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a++)o+=t.charAt(Math.floor(Math.random()*t.length));return o},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.products=this.products.filter(o=>!this.selectedProducts.includes(o)),this.deleteProductsDialog=!1,this.selectedProducts=null,this.$toast.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:I.CONTAINS}}},onRowEditSave(o){let{newData:t,index:a}=o;this.products[a]=t},getStatusLabel(o){switch(o){case"INSTOCK":return"success";case"LOWSTOCK":return"warning";case"OUTOFSTOCK":return"danger";default:return null}}}},r=o=>(T("data-v-508db998"),o=o(),V(),o),j={class:"grid crud-demo"},U={class:"col-12"},F={class:"card"},L={class:"my-2"},M={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},K=r(()=>i("h5",{class:"m-0"},"Manajemen Departemen",-1)),A={class:"block mt-2 md:mt-0 p-input-icon-left"},B=r(()=>i("i",{class:"pi pi-search"},null,-1)),R=r(()=>i("span",{class:"p-column-title"},"Jabatan",-1)),H=r(()=>i("span",{class:"p-column-title"},"Atasan",-1)),q=r(()=>i("span",{class:"p-column-title"},"Head Departement",-1)),z={class:"formgrid grid"},E={class:"field col-12 d-flex justifiy-content-center align-items-end"},J=r(()=>i("label",{for:"jabatan"},"Jabatan",-1)),W={key:0,class:"p-invalid"},Y={class:"field col-12 d-flex justifiy-content-center align-items-end"},G=r(()=>i("label",{for:"atasanlangsung"},"Atasan Langsung",-1)),Q={key:0,class:"p-invalid"},X={class:"col-6"},Z={class:""},$=r(()=>i("span",{id:"switch1",style:{position:"relative",bottom:"8px",left:"8px"}},"Head Department",-1)),ee={class:"flex align-items-center justify-content-center"},te=r(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),se={key:0},oe={class:"flex align-items-center justify-content-center"},le=r(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ie={key:0};function de(o,t,a,ne,e,c){const y=u("Toast"),n=u("Button"),P=u("FileUpload"),k=u("Toolbar"),_=u("InputText"),p=u("Column"),C=u("DataTable"),D=u("InputSwitch"),v=u("Dialog");return m(),h("div",j,[i("div",U,[i("div",F,[l(y),l(k,{class:"mb-4"},{start:d(()=>[i("div",L,[l(n,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:c.FormNew},null,8,["onClick"]),l(n,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:c.confirmDeleteSelected,disabled:!e.selectedProducts||!e.selectedProducts.length},null,8,["onClick","disabled"])])]),end:d(()=>[l(P,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),l(n,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=s=>c.exportCSV(s))})]),_:1}),l(C,{ref:"dt",value:e.products,selection:e.selectedProducts,"onUpdate:selection":t[2]||(t[2]=s=>e.selectedProducts=s),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:d(()=>[i("div",M,[K,i("span",A,[B,l(_,{modelValue:e.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=s=>e.filters.global.value=s),placeholder:"Search..."},null,8,["modelValue"])])])]),default:d(()=>[l(p,{selectionMode:"multiple",headerStyle:"width: 5%"}),l(p,{field:"namagudang",header:"Jabatan",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(s=>[R,f(" "+b(s.data.code),1)]),_:1}),l(p,{field:"kantor",header:"Atasan",sortable:!0,headerStyle:"width:25%; min-width:10rem;"},{body:d(s=>[H,f(" "+b(o.$h.formatNumber(s.data.price)),1)]),_:1}),l(p,{field:"kantor",header:"Head Departement",sortable:!0,headerStyle:"width:25%; min-width:10rem;"},{body:d(s=>[q,f(" "+b(o.$h.formatNumber(s.data.price)),1)]),_:1}),l(p,{headerStyle:"width:14%; min-width:10rem;"},{body:d(s=>[l(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:w=>c.editProduct(s.data)},null,8,["onClick"]),l(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",onClick:w=>c.confirmDeleteProduct(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),l(v,{visible:e.productDialog,"onUpdate:visible":t[6]||(t[6]=s=>e.productDialog=s),style:{width:"450px"},header:"Departemen Details",modal:!0,class:"p-fluid"},{footer:d(()=>[l(n,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:c.HideDialog},null,8,["onClick"]),l(n,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:c.saveProduct},null,8,["onClick"])]),default:d(()=>[i("div",z,[i("div",E,[J,l(_,{id:"jabatan",modelValue:e.product.jabatan,"onUpdate:modelValue":t[3]||(t[3]=s=>e.product.jabatan=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":e.isSubmitted&&!e.product.jabatan})},null,8,["modelValue","class"]),e.isSubmitted&&!e.product.jabatan?(m(),h("small",W,"required")):g("",!0)]),i("div",Y,[G,l(_,{id:"atasanlangsung",modelValue:e.product.atasanlangsung,"onUpdate:modelValue":t[4]||(t[4]=s=>e.product.atasanlangsung=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":e.isSubmitted&&!e.product.atasanlangsung})},null,8,["modelValue","class"]),e.isSubmitted&&!e.product.atasanlangsung?(m(),h("small",Q,"required")):g("",!0)]),i("div",X,[i("div",Z,[l(D,{modelValue:e.checked,"onUpdate:modelValue":t[5]||(t[5]=s=>e.checked=s),"aria-labelledby":"switch1"},null,8,["modelValue"]),$])])])]),_:1},8,["visible"]),l(v,{visible:e.deleteProductDialog,"onUpdate:visible":t[8]||(t[8]=s=>e.deleteProductDialog=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[l(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=s=>e.deleteProductDialog=!1)}),l(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:c.deleteProduct},null,8,["onClick"])]),default:d(()=>[i("div",ee,[te,e.product?(m(),h("span",se,[f("Are you sure you want to delete "),i("b",null,b(e.product.name),1),f("?")])):g("",!0)])]),_:1},8,["visible"]),l(v,{visible:e.deleteProductsDialog,"onUpdate:visible":t[10]||(t[10]=s=>e.deleteProductsDialog=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[l(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=s=>e.deleteProductsDialog=!1)}),l(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:c.deleteSelectedProducts},null,8,["onClick"])]),default:d(()=>[i("div",oe,[le,e.product?(m(),h("span",ie,"Are you sure you want to delete the selected products?")):g("",!0)])]),_:1},8,["visible"])])])])}const ce=x(O,[["render",de],["__scopeId","data-v-508db998"]]);export{ce as default};
