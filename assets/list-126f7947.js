import{_ as O,F as B,r as n,o as d,c,b as s,d as o,e as i,n as b,l as v,t as h,m as M,q as U,k as y,f as k,p as j,g as q}from"./index-11eb6111.js";import{a as x}from"./internaltransfer-7aab9fa3.js";import{a as E}from"./options-b2eb7ae6.js";const G={data(){return{selectedInternalTransfer:null,internal_transfer:null,lInternalTransfer:[],lCustomer:[],filteredCustomer:[],f:{selectedStatus:{label:"All",value:"A"},selectedCustomer:"",awal:null,akhir:null},selectedStatus:{label:"All",value:"A"},statuses:[{label:"All",value:"A"},{label:"Draft",value:"D"},{label:"Open",value:"O"},{label:"Close",value:"C"}],selectedColumns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"nomor_internal_order",header:"Nomor IO",class:"text-left"},{field:"gudang_asal",header:"Gudang Asal",class:"text-left"},{field:"gudang_tujuan",header:"Gudang Tujuan",class:"text-left"},{field:"created_name",header:"Created By",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],Columns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"nomor_internal_order",header:"Nomor IO",class:"text-left"},{field:"gudang_asal",header:"Gudang Asal",class:"text-left"},{field:"gudang_tujuan",header:"Gudang Tujuan",class:"text-left"},{field:"created_name",header:"Created By",class:"text-left"},{field:"transporter",header:"Transporter",class:"text-left"},{field:"driver",header:"Driver",class:"text-left"},{field:"nopol",header:"Nomor Plat",class:"text-left"},{field:"tanggal_kirim",header:"Tanggal Kirim",class:"text-left"},{field:"tanggal_terima",header:"Tanggal Terima",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],filter:!1,deleteDialog:!1,filters:{}}},productService:null,created(){this.initFilters()},computed:{filteredlInternalTransfer:function(){return this.lInternalTransfer.filter(e=>(this.f.selectedStatus.value=="A"?!0:this.f.selectedStatus.value==e.status)&&(typeof this.f.selectedCustomer=="string"?!0:this.f.selectedCustomer.id==e.id_customer)&&(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(e.tanggal).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(e.tanggal).toLocaleDateString()))}},mounted(){this.getData()},methods:{getData(){x.index().then(e=>{this.lInternalTransfer=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Delivery Order",life:3e3})}),E.getKontakCustomer().then(e=>{this.lCustomer=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Kontak Customer",life:3e3})})},confirmDelete(e){this.internal_transfer=e,this.deleteDialog=!0},submitDelete(){let e=!0;x.destroy(this.internal_transfer.id).then(()=>{this.deleteDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:"Quotation Deleted",life:3e3})}).catch(()=>{e=!1,this.$toast.add({severity:"error",summary:"Failed",detail:"Delete Quotation",life:3e3})}).finally(()=>{e&&(this.lInternalTransfer=this.lInternalTransfer.filter(a=>a.id!=this.internal_transfer.id))})},editInternalTransfer(e){this.$router.push(`/internal/transfer/${e.id}/edit`)},searchCustomer(e){e.query.trim().length?this.filteredCustomer=this.lCustomer.filter(a=>a.kontak.toLowerCase().includes(e.query.trim().toLowerCase())):this.filteredCustomer=[...this.lCustomer]},showHideFilter(){this.filter=!this.filter},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:B.CONTAINS}}}}},u=e=>(j("data-v-ace1cf89"),e=e(),q(),e),K={class:"grid crud-demo"},R={class:"col-12"},z={class:"card"},H={class:"my-2"},Q=u(()=>s("h5",{class:"mbe-4"},"Pencarian Delivery Order",-1)),Y={class:"p-fluid formgrid grid"},J={class:"field col-2"},W={class:"p-float-label"},X=u(()=>s("p",{class:"mb-1"},"Periode Awal",-1)),Z={class:"field col-2"},$={class:"p-float-label"},ee=u(()=>s("p",{class:"mb-1"},"Periode Akhir",-1)),te={class:"field col-2"},le={class:"p-float-label"},se=u(()=>s("p",{class:"mb-1"},"Customer",-1)),ae={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},oe=u(()=>s("label",{for:"salesquotation",class:"mb-1"},"Status",-1)),ne={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},re=u(()=>s("h5",{class:"m-0"},"Manage Delivery Order",-1)),ie={class:"block mt-2 md:mt-0 p-input-icon-left"},de=u(()=>s("i",{class:"pi pi-search"},null,-1)),ue=u(()=>s("div",{class:"text-center"},"Empty",-1)),ce=u(()=>s("span",{class:"p-column-title"},"DO Number",-1)),me={key:0},fe={key:1},pe={key:2},he={key:3,class:"text-right"},_e={key:4},ge={class:"flex align-items-center justify-content-center"},be=u(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ve={key:0};function Ce(e,a,ye,ke,t,f){const D=n("Toast"),m=n("Button"),w=n("router-link"),T=n("MyExport"),S=n("Toolbar"),C=n("Calendar"),I=n("AutoComplete"),V=n("Dropdown"),L=n("MultiSelect"),A=n("InputText"),_=n("Column"),N=n("Tag"),P=n("DataTable"),F=n("Dialog");return d(),c("div",K,[s("div",R,[s("div",z,[o(D),o(S,{class:"mb-4"},{start:i(()=>[s("div",H,[o(w,{to:"/internal/transfer/create",class:"btn btn-added me-2"},{default:i(()=>[o(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2"})]),_:1}),o(m,{icon:"pi pi-filter",label:"Filter",class:b(["p-button mx-2",{"p-button-block":t.filter,"p-button-outlined":!t.filter}]),onClick:f.showHideFilter},null,8,["onClick","class"])])]),end:i(()=>[o(T,{value:e.filteredItems,selectedColumns:t.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),s("div",{class:b(["card fadein",{hidden:!t.filter}])},[Q,s("div",Y,[s("div",J,[s("span",W,[X,o(C,{dateFormat:"dd-mm-yy",modelValue:t.f.awal,"onUpdate:modelValue":a[0]||(a[0]=l=>t.f.awal=l),inputId:"periodeawal"},null,8,["modelValue"])])]),s("div",Z,[s("span",$,[ee,o(C,{dateFormat:"dd-mm-yy",modelValue:t.f.akhir,"onUpdate:modelValue":a[1]||(a[1]=l=>t.f.akhir=l),inputId:"periodeakhir"},null,8,["modelValue"])])]),s("div",te,[s("span",le,[se,o(I,{modelValue:t.f.selectedCustomer,"onUpdate:modelValue":a[2]||(a[2]=l=>t.f.selectedCustomer=l),dropdown:"",suggestions:t.filteredCustomer,onComplete:f.searchCustomer,optionLabel:"kontak"},null,8,["modelValue","suggestions","onComplete"])])]),s("div",ae,[oe,o(V,{id:"salesquotation",modelValue:t.f.selectedStatus,"onUpdate:modelValue":a[3]||(a[3]=l=>t.f.selectedStatus=l),options:t.statuses,optionLabel:"label",placeholder:"Status"},null,8,["modelValue","options"])])])],2),o(P,{ref:"dt",value:f.filteredlInternalTransfer,selection:t.selectedInternalTransfer,"onUpdate:selection":a[6]||(a[6]=l=>t.selectedInternalTransfer=l),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Delivery order",responsiveLayout:"scroll"},{header:i(()=>[s("div",ne,[re,o(L,{modelValue:t.selectedColumns,"onUpdate:modelValue":a[4]||(a[4]=l=>t.selectedColumns=l),options:t.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),s("span",ie,[de,o(A,{modelValue:t.filters.global.value,"onUpdate:modelValue":a[5]||(a[5]=l=>t.filters.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:i(()=>[ue]),default:i(()=>[o(_,{field:"nomor",header:"DO Number",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(l=>[ce,v(" "+h(l.data.nomor),1)]),_:1}),(d(!0),c(M,null,U(t.selectedColumns,(l,g)=>(d(),y(_,{field:l.field,header:l.header,class:b(l.class),key:l.field+"_"+g,sortable:!0},{body:i(({data:p,field:r})=>[r=="icon"?(d(),c("div",me,[o(m,{icon:p[r],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):r=="status"?(d(),c("div",fe,[o(N,{value:e.$h.getLabel(p[r]),severity:e.$h.getLabel(p[r])},null,8,["value","severity"])])):r=="tanggal"||r=="tanggal_kirim"||r=="tanggal_terima"?(d(),c("div",pe,h(e.$h.formatDate(p[r])),1)):r=="grandtotal"?(d(),c("div",he,h(e.$h.formatNumber(p[r])),1)):(d(),c("div",_e,h(p[r]),1))]),_:2},1032,["field","header","class"]))),128)),o(_,{headerStyle:"width:6%; max-width:1rem;",class:"text-right"},{body:i(l=>[o(m,{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning mr-2",onClick:g=>f.editInternalTransfer(l.data)},null,8,["onClick"]),l.data.status=="D"?(d(),y(m,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:g=>f.confirmDelete(l.data)},null,8,["onClick"])):k("",!0)]),_:1})]),_:1},8,["value","selection","filters"])]),o(F,{visible:t.deleteDialog,"onUpdate:visible":a[8]||(a[8]=l=>t.deleteDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[o(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=l=>t.deleteDialog=!1)}),o(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:f.submitDelete},null,8,["onClick"])]),default:i(()=>[s("div",ge,[be,t.internal_transfer?(d(),c("span",ve,[v("Are you sure you want to delete "),s("b",null,h(t.internal_transfer.nomor),1),v("?")])):k("",!0)])]),_:1},8,["visible"])])])}const Te=O(G,[["render",Ce],["__scopeId","data-v-ace1cf89"]]);export{Te as default};
