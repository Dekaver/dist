import{_ as F,F as O,r as o,o as d,c as u,b as l,d as s,e as r,n as v,l as b,t as _,m as B,q as M,k as T,f as x,p as j,g as U}from"./index-11eb6111.js";import{a as k}from"./internaltransfer-7aab9fa3.js";const E={data(){return{selectedInternalTapiInternalTransfer:null,delivery_order:null,lInternalTapiInternalTransfer:[],f:{selectedStatus:{label:"All",value:"A"},awal:null,akhir:null},selectedStatus:{label:"All",value:"A"},statuses:[{label:"All",value:"A"},{label:"Draft",value:"D"},{label:"Open",value:"O"},{label:"Close",value:"C"}],selectedColumns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"nomor_internal_order",header:"Nomor IO",class:"text-left"},{field:"gudang_asal",header:"Gudang Asal",class:"text-left"},{field:"gudang_tujuan",header:"Gudang Tujuan",class:"text-left"},{field:"created_name",header:"Created By",class:"text-left"},{field:"status_terima",header:"Status Terima",class:"text-left"}],Columns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"nomor_internal_order",header:"Nomor IO",class:"text-left"},{field:"gudang_asal",header:"Gudang Asal",class:"text-left"},{field:"gudang_tujuan",header:"Gudang Tujuan",class:"text-left"},{field:"created_name",header:"Created By",class:"text-left"},{field:"transporter",header:"Transporter",class:"text-left"},{field:"driver",header:"Driver",class:"text-left"},{field:"nopol",header:"Nomor Plat",class:"text-left"},{field:"tanggal_kirim",header:"Tanggal Kirim",class:"text-left"},{field:"tanggal_terima",header:"Tanggal Terima",class:"text-left"},{field:"status_terima",header:"Status Terima",class:"text-left"}],filter:!1,deleteDialog:!1,filters:{}}},productService:null,created(){this.initFilters()},computed:{filteredlInternalTapiInternalTransfer:function(){return this.lInternalTapiInternalTransfer.filter(a=>(this.f.selectedStatus.value=="A"?!0:this.f.selectedStatus.value==a.status)&&(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(a.tanggal).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(a.tanggal).toLocaleDateString()))}},mounted(){this.getData()},methods:{getData(){k.indexReceive().then(a=>{this.lInternalTapiInternalTransfer=a.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Delivery Order",life:3e3})})},confirmDelete(a){this.delivery_order=a,this.deleteDialog=!0},submitDelete(){let a=!0;k.destroy(this.delivery_order.id).then(()=>{this.deleteDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:"Quotation Deleted",life:3e3})}).catch(()=>{a=!1,this.$toast.add({severity:"error",summary:"Failed",detail:"Delete Quotation",life:3e3})}).finally(()=>{a&&(this.lInternalTapiInternalTransfer=this.lInternalTapiInternalTransfer.filter(n=>n.id!=this.delivery_order.id))})},editInternalTapiInternalTransfer(a){this.$router.push(`/internal/receive/${a.id}/edit`)},showHideFilter(){this.filter=!this.filter},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:O.CONTAINS}}}}},c=a=>(j("data-v-031a0081"),a=a(),U(),a),R={class:"grid crud-demo"},G={class:"col-12"},q={class:"card"},z={class:"my-2"},H=c(()=>l("h5",{class:"mbe-4"},"Pencarian Delivery Order",-1)),K={class:"p-fluid formgrid grid"},Q={class:"field col-2"},Y={class:"p-float-label"},J=c(()=>l("p",{class:"mb-1"},"Periode Awal",-1)),W={class:"field col-2"},X={class:"p-float-label"},Z=c(()=>l("p",{class:"mb-1"},"Periode Akhir",-1)),$={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},ee=c(()=>l("label",{for:"salesquotation",class:"mb-1"},"Status",-1)),te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},le=c(()=>l("h5",{class:"m-0"},"Manage Delivery Order",-1)),ae={class:"block mt-2 md:mt-0 p-input-icon-left"},se=c(()=>l("i",{class:"pi pi-search"},null,-1)),ne=c(()=>l("div",{class:"text-center"},"Empty",-1)),oe=c(()=>l("span",{class:"p-column-title"},"DO Number",-1)),re={key:0},ie={key:1},de={key:2},ce={key:3,class:"text-right"},ue={key:4},me={class:"flex align-items-center justify-content-center"},pe=c(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),fe={key:0};function _e(a,n,he,ge,e,f){const D=o("Toast"),m=o("Button"),I=o("router-link"),C=o("MyExport"),w=o("Toolbar"),y=o("Calendar"),S=o("Dropdown"),V=o("MultiSelect"),L=o("InputText"),h=o("Column"),N=o("Tag"),P=o("DataTable"),A=o("Dialog");return d(),u("div",R,[l("div",G,[l("div",q,[s(D),s(w,{class:"mb-4"},{start:r(()=>[l("div",z,[s(I,{to:"/internal/receive/create",class:"btn btn-added me-2"},{default:r(()=>[s(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2"})]),_:1}),s(m,{icon:"pi pi-filter",label:"Filter",class:v(["p-button mx-2",{"p-button-block":e.filter,"p-button-outlined":!e.filter}]),onClick:f.showHideFilter},null,8,["onClick","class"])])]),end:r(()=>[s(C,{value:a.filteredItems,selectedColumns:e.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),l("div",{class:v(["card fadein",{hidden:!e.filter}])},[H,l("div",K,[l("div",Q,[l("span",Y,[J,s(y,{dateFormat:"dd-mm-yy",modelValue:e.f.awal,"onUpdate:modelValue":n[0]||(n[0]=t=>e.f.awal=t),inputId:"periodeawal"},null,8,["modelValue"])])]),l("div",W,[l("span",X,[Z,s(y,{dateFormat:"dd-mm-yy",modelValue:e.f.akhir,"onUpdate:modelValue":n[1]||(n[1]=t=>e.f.akhir=t),inputId:"periodeakhir"},null,8,["modelValue"])])]),l("div",$,[ee,s(S,{id:"salesquotation",modelValue:e.f.selectedStatus,"onUpdate:modelValue":n[2]||(n[2]=t=>e.f.selectedStatus=t),options:e.statuses,optionLabel:"label",placeholder:"Status"},null,8,["modelValue","options"])])])],2),s(P,{ref:"dt",value:f.filteredlInternalTapiInternalTransfer,selection:e.selectedInternalTapiInternalTransfer,"onUpdate:selection":n[5]||(n[5]=t=>e.selectedInternalTapiInternalTransfer=t),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Delivery order",responsiveLayout:"scroll"},{header:r(()=>[l("div",te,[le,s(V,{modelValue:e.selectedColumns,"onUpdate:modelValue":n[3]||(n[3]=t=>e.selectedColumns=t),options:e.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),l("span",ae,[se,s(L,{modelValue:e.filters.global.value,"onUpdate:modelValue":n[4]||(n[4]=t=>e.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:r(()=>[ne]),default:r(()=>[s(h,{field:"nomor",header:"Nomor",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(t=>[oe,b(" "+_(t.data.nomor),1)]),_:1}),(d(!0),u(B,null,M(e.selectedColumns,(t,g)=>(d(),T(h,{field:t.field,header:t.header,class:v(t.class),key:t.field+"_"+g,sortable:!0},{body:r(({data:p,field:i})=>[i=="icon"?(d(),u("div",re,[s(m,{icon:p[i],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):i=="status_terima"?(d(),u("div",ie,[s(N,{value:a.$h.getLabel(p[i]),severity:a.$h.getLabel(p[i])},null,8,["value","severity"])])):i=="tanggal"?(d(),u("div",de,_(a.$h.formatDate(p[i])),1)):i=="grandtotal"?(d(),u("div",ce,_(a.$h.formatNumber(p[i])),1)):(d(),u("div",ue,_(p[i]),1))]),_:2},1032,["field","header","class"]))),128)),s(h,{headerStyle:"width:6%; max-width:1rem;",class:"text-right"},{body:r(t=>[s(m,{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning mr-2",onClick:g=>f.editInternalTapiInternalTransfer(t.data)},null,8,["onClick"]),t.data.status=="D"?(d(),T(m,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:g=>f.confirmDelete(t.data)},null,8,["onClick"])):x("",!0)]),_:1})]),_:1},8,["value","selection","filters"])]),s(A,{visible:e.deleteDialog,"onUpdate:visible":n[7]||(n[7]=t=>e.deleteDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[s(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=t=>e.deleteDialog=!1)}),s(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:f.submitDelete},null,8,["onClick"])]),default:r(()=>[l("div",me,[pe,e.delivery_order?(d(),u("span",fe,[b("Are you sure you want to delete "),l("b",null,_(e.delivery_order.nomor),1),b("?")])):x("",!0)])]),_:1},8,["visible"])])])}const ye=F(E,[["render",_e],["__scopeId","data-v-031a0081"]]);export{ye as default};
