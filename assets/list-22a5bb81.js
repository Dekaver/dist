import{_ as N,F as M,r as n,o as d,c,b as l,d as o,e as i,n as b,l as _,t as h,m as A,q as U,f as E,k as B}from"./index-11eb6111.js";import{a as k}from"./uangmuka-9a822cf6.js";const O={data(){return{lItem:[],item:null,deleteDialog:!1,filter:!1,filters:{},f:{awal:null,akhir:null,selectedStatus:{label:"All",value:""}},statuses:[{label:"All",value:""},{label:"Draft",value:"D"},{label:"Close",value:"C"}],selectedColumns:[{field:"tanggal",header:"Tanggal",type:"date"},{field:"nomor_po",header:"Nomor PO"},{field:"supplier",header:"Supplier"},{field:"status",header:"Status"}],Columns:[{field:"tanggal",header:"Tanggal",type:"date"},{field:"nomor_po",header:"Nomor PO"},{field:"supplier",header:"Supplier"},{field:"status",header:"Status"}]}},created(){this.initFilters()},mounted(){this.getData()},computed:{filteredItems:function(){return this.lItem.filter(a=>(this.f.selectedStatus.value==""?!0:this.f.selectedStatus.value==a.status)&&(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(a.tanggal).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(a.tanggal).toLocaleDateString())&&(this.selectedAkun?this.selectedAkun.id==a.akun:!0))}},methods:{getData(){k.index().then(a=>{this.lItem=a.data.data})},FormEdit(a){this.$router.push({name:"uangmuka.edit",params:{id:a.id}})},Destroy(a){k.destroy(a.id).then(s=>{this.$toast.add({severity:"success",summary:"Success",detail:s.data.message,life:3e3}),this.lItem=this.lItem.filter(v=>v.id!=a.id),this.deleteDialog=!1}).catch(s=>{this.$toast.add({severity:"error",summary:"Error",detail:s.response.data.message,life:3e3}),this.deleteDialog=!1})},confirmDelete(a){this.deleteDialog=!0,this.item={...a}},showHideFilter(){this.filter=!this.filter},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:M.CONTAINS}}}}},R={class:"grid crud-demo"},j={class:"col-12"},z={class:"card"},H={class:"my-2"},q=l("h5",{class:"mbe-4"},"Pencarian Uang Muka",-1),K={class:"p-fluid formgrid grid"},Y={class:"field col-2"},G={class:"p-float-label"},J=l("p",{class:"mb-1"},"Periode Awal",-1),Q={class:"field col-2"},W={class:"p-float-label"},X=l("p",{class:"mb-1"},"Periode Akhir",-1),Z={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},$=l("label",{for:"status",class:"mb-1"},"Status",-1),ee={class:"field col-auto",style:{display:"flex","align-items":"flex-end","align-content":"flex-end"}},te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},le=l("h5",{class:"m-0"},"Manage Uang Muka",-1),se={class:"block mt-2 md:mt-0 p-input-icon-left"},oe=l("i",{class:"pi pi-search"},null,-1),ae=l("span",{class:"p-column-title"},"Nomor",-1),ne={key:0},ie={key:1},re={key:2},de={key:3,class:"text-right"},ue={key:4},ce={class:"flex align-items-center justify-content-center"},me=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),pe={key:0};function he(a,s,v,fe,t,m){const D=n("Toast"),p=n("Button"),w=n("router-link"),C=n("MyExport"),S=n("Toolbar"),y=n("Calendar"),x=n("Dropdown"),V=n("MultiSelect"),P=n("InputText"),f=n("Column"),T=n("Tag"),L=n("ActionButton"),I=n("DataTable"),F=n("Dialog");return d(),c("div",R,[l("div",j,[l("div",z,[o(D),o(S,{class:"mb-4"},{start:i(()=>[l("div",H,[o(w,{to:"/finance/uang-muka/create",class:"btn btn-added me-2"},{default:i(()=>[o(p,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1}),o(p,{icon:"pi pi-filter",label:"Filter",class:b(["p-button mx-2",{"p-button-block":t.filter,"p-button-outlined":!t.filter}]),onClick:m.showHideFilter},null,8,["onClick","class"])])]),end:i(()=>[o(C,{value:m.filteredItems,selectedColumns:t.selectedColumns,title:"Export Uang Muka"},null,8,["value","selectedColumns"])]),_:1}),l("div",{class:b(["card fadein",{hidden:!t.filter}])},[q,l("div",K,[l("div",Y,[l("span",G,[J,o(y,{dateFormat:"dd-mm-yy",modelValue:t.f.awal,"onUpdate:modelValue":s[0]||(s[0]=e=>t.f.awal=e),inputId:"f.awal"},null,8,["modelValue"])])]),l("div",Q,[l("span",W,[X,o(y,{dateFormat:"dd-mm-yy",modelValue:t.f.akhir,"onUpdate:modelValue":s[1]||(s[1]=e=>t.f.akhir=e),inputId:"f.akhir"},null,8,["modelValue"])])]),l("div",Z,[$,o(x,{id:"status",modelValue:t.f.selectedStatus,"onUpdate:modelValue":s[2]||(s[2]=e=>t.f.selectedStatus=e),options:t.statuses,optionLabel:"label",placeholder:"Status"},null,8,["modelValue","options"])]),l("div",ee,[o(p,{label:"Search"})])])],2),o(I,{ref:"dt",value:m.filteredItems,selection:a.selectedItem,"onUpdate:selection":s[5]||(s[5]=e=>a.selectedItem=e),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Purchase order",responsiveLayout:"scroll"},{header:i(()=>[l("div",te,[le,o(V,{modelValue:t.selectedColumns,"onUpdate:modelValue":s[3]||(s[3]=e=>t.selectedColumns=e),options:t.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),l("span",se,[oe,o(P,{modelValue:t.filters.global.value,"onUpdate:modelValue":s[4]||(s[4]=e=>t.filters.global.value=e),placeholder:"Search..."},null,8,["modelValue"])])])]),default:i(()=>[o(f,{header:"#",headerStyle:"width:10px"},{body:i(e=>[_(h(e.index+1),1)]),_:1}),o(f,{field:"nomor",header:"Nomor",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(e=>[ae,_(" "+h(e.data.nomor),1)]),_:1}),(d(!0),c(A,null,U(t.selectedColumns,(e,g)=>(d(),B(f,{field:e.field,header:e.header,class:b(e.class),key:e.field+"_"+g,sortable:!0},{body:i(({data:u,field:r})=>[r=="icon"?(d(),c("div",ne,[o(p,{icon:u[r],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):r=="status"?(d(),c("div",ie,[o(T,{value:a.$h.getLabel(u[r]),severity:a.$h.getLabel(u[r])},null,8,["value","severity"])])):r=="tanggal"?(d(),c("div",re,h(a.$h.formatDate(u[r])),1)):r=="total"?(d(),c("div",de,h(a.$h.formatNumber(u[r])),1)):(d(),c("div",ue,h(u[r]),1))]),_:2},1032,["field","header","class"]))),128)),o(f,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:i(({data:e,index:g})=>[o(L,{data:e,index:g,onEdit:u=>m.FormEdit(e),onDelete:u=>m.confirmDelete(e),showDelete:e.status=="D"},null,8,["data","index","onEdit","onDelete","showDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),o(F,{visible:t.deleteDialog,"onUpdate:visible":s[8]||(s[8]=e=>t.deleteDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[o(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[6]||(s[6]=e=>t.deleteDialog=!1)}),o(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:s[7]||(s[7]=e=>m.Destroy(t.item))})]),default:i(()=>[l("div",ce,[me,t.item?(d(),c("span",pe,[_("Are you sure you want to delete "),l("b",null,h(t.item.nomor),1),_("?")])):E("",!0)])]),_:1},8,["visible"])])])])}const be=N(O,[["render",he]]);export{be as default};
