import{D as c,_ as M,F as N,r as n,o as u,c as p,b as o,d as i,e as r,l as d,t as _,m as U,q as A,n as b,f as q,k as H}from"./index-11eb6111.js";import{a as R}from"./api-32d028ca.js";import{A as j}from"./index-b9e295bc.js";import"./custom-zod-e9521e5d.js";import{z as f}from"./index-0ec66d4d.js";const h="/hari-libur",v={index(e){return c.get(`${h}/${e}`)},store(e){return c.post(h,e)},update(e,t){return c.patch(`${h}/${e}`,t)},show(e){return c.get(`${h}/${e}`)},destroy(e){return c.delete(`${h}/${e}`)}},O=f.object({nama:f.string().min(1).max(255),tanggal:f.date(),hari_libur_tipe_id:f.number()}),z={data(){return{lItem:[],item:{},selectedItem:null,lTipe:[],selectedTipe:null,filters:{},f:{tahun:null},selectedColumns:[{field:"nama",header:"Hari Libur",class:"w-20rem"},{field:"tanggal",header:"Tanggal",class:"w-20rem"},{field:"tipe",header:"Tipe",class:"w-20rem"}],Columns:[{field:"nama",header:"Hari Libur",class:"w-20rem"},{field:"tanggal",header:"Tanggal",class:"w-20rem"},{field:"tipe",header:"Tipe",class:"w-20rem"}],isClean:!0,isEdit:!1,formDialog:!1,deleteFormDialog:!1}},created(){this.initFilters()},mounted(){this.f.tahun=new Date().getFullYear(),this.getData()},computed:{FormError(){var e,t;return!this.isClean&&((t=(e=O.safeParse(this.item))==null?void 0:e.error)==null?void 0:t.format())||{}}},methods:{async getData(){await v.index(this.f.tahun).then(e=>{this.lItem=e.data.data}),await R.index().then(e=>{this.lTipe=e.data.data})},async Save(){try{if(this.$isLoading.value=!0,this.isClean=!1,Object.keys(this.FormError).length>0)return;this.isEdit?await v.update(this.item.id,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lItem[this.lItem.findIndex(t=>t.id===this.item.id)]=this.item,this.formDialog=!1}):await v.store(this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.getData(),this.lItem.push(e.data.data),this.formDialog=!1})}catch(e){console.log(e),e instanceof f.ZodError?this.FormError=e.format():e instanceof j&&this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}finally{this.$timeoutLoading()}},Destroy(e){this.lItem=this.lItem.filter(t=>t.id!==e.id),v.destroy(e.id).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),this.getData(),this.deleteFormDialog=!1})},initFilters(){this.filters={global:{value:null,matchMode:N.CONTAINS}}},exportCSV(){this.$refs.dt.exportCSV()},FormNew(){this.item={},this.selectedTipe=null,this.FormError={},this.formDialog=!0},FormEdit(e){this.FormError={},this.item={...e},this.item.tanggal=new Date(e.tanggal),this.selectedTipe=this.lTipe.find(t=>t.id===e.hari_libur_tipe_id),this.formDialog=!0,this.isEdit=!0},confirmDelete(e){this.item={...e},this.deleteFormDialog=!0},selectTipe(e){this.item.hari_libur_tipe_id=e.value.id,this.item.tipe=e.value.tipe},HideDialog(){this.formDialog=!1}}},Y={class:"grid crud-demo"},G={class:"col-12"},K={class:"card"},Z={class:"my-2"},J={class:"p-fluid formgrid grid my-4"},Q={class:"field col-2"},W=o("label",{for:"tahun",class:"mb-2"},[d("Tahun"),o("small",{class:"text-red-500"},"*")],-1),X={class:"field col-auto",style:{display:"flex","align-items":"flex-end","align-content":"flex-end"}},$={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ee=o("h5",{class:"m-0"},"Daftar Hari Libur",-1),te={class:"block mt-2 ml-2 md:mt-0 p-input-icon-left"},le=o("i",{class:"pi pi-search"},null,-1),se=o("div",{class:"text-center"},"Empty",-1),ie={key:0},oe={key:1},re={class:"formgrid grid"},ae={class:"field col-12"},ne={class:"field col-12"},de={class:"field col-12"},me={class:"flex align-items-center justify-content-center"},ue=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ce={key:0};function pe(e,t,he,fe,s,a){const k=n("Toast"),m=n("Button"),E=n("MyExport"),V=n("Toolbar"),y=n("InputText"),S=n("MultiSelect"),D=n("Column"),I=n("ActionButton"),L=n("DataTable"),x=n("Label"),w=n("ErrorMsg"),P=n("Calendar"),B=n("Dropdown"),T=n("Dialog");return u(),p("div",Y,[o("div",G,[o("div",K,[i(k),i(V,{class:"mb-4"},{start:r(()=>[o("div",Z,[i(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:a.FormNew},null,8,["onClick"])])]),end:r(()=>[i(E,{value:s.lItem,selectedColumns:s.selectedColumns,title:"Export Item"},null,8,["value","selectedColumns"])]),_:1}),o("div",J,[o("div",Q,[W,i(y,{id:"tahun",type:"text",modelValue:s.f.tahun,"onUpdate:modelValue":t[0]||(t[0]=l=>s.f.tahun=l)},null,8,["modelValue"])]),o("div",X,[i(m,{label:"Search",onClick:t[1]||(t[1]=l=>a.getData())})])]),i(L,{ref:"dt",value:s.lItem,dataKey:"id",paginator:!0,rows:10,filters:s.filters,rowGroupMode:"rowspan",groupRowsBy:"id",sortMode:"single",sortField:"id",sortOrder:1,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{header:r(()=>[o("div",$,[ee,i(S,{modelValue:s.selectedColumns,"onUpdate:modelValue":t[2]||(t[2]=l=>s.selectedColumns=l),options:s.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),o("span",te,[le,i(y,{modelValue:s.filters.global.value,"onUpdate:modelValue":t[3]||(t[3]=l=>s.filters.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:r(()=>[se]),default:r(()=>[i(D,{header:"#",headerStyle:"width:10px"},{body:r(l=>[d(_(l.index+1),1)]),_:1}),(u(!0),p(U,null,A(s.selectedColumns,(l,C)=>(u(),H(D,{field:l.field,header:l.header,class:b(l.class),key:l.field+"_"+C,sortable:!0},{body:r(({data:g,field:F})=>[F=="tanggal"?(u(),p("div",ie,_(e.$h.formatDate(g[F])),1)):(u(),p("div",oe,_(g[F]),1))]),_:2},1032,["field","header","class"]))),128)),i(D,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:r(({data:l,index:C})=>[i(I,{data:l,index:C,onEdit:g=>a.FormEdit(l),onDelete:g=>a.confirmDelete(l)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","filters"]),i(T,{visible:s.formDialog,"onUpdate:visible":t[7]||(t[7]=l=>s.formDialog=l),style:{width:"450px"},header:"Form Item",modal:!0,class:"p-fluid"},{footer:r(()=>[i(m,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:a.HideDialog},null,8,["onClick"]),i(m,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:a.Save},null,8,["onClick"])]),default:r(()=>[o("div",re,[o("div",ae,[i(x,{required:"",for:"item"},{default:r(()=>[d("Nama")]),_:1}),i(y,{id:"item",modelValue:s.item.nama,"onUpdate:modelValue":t[4]||(t[4]=l=>s.item.nama=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:b(a.FormError.nama&&"p-invalid")},null,8,["modelValue","class"]),i(w,{error:a.FormError.nama},null,8,["error"])]),o("div",ne,[i(x,{required:"",for:"item"},{default:r(()=>[d("Tanggal")]),_:1}),i(P,{modelValue:s.item.tanggal,"onUpdate:modelValue":t[5]||(t[5]=l=>s.item.tanggal=l),showButtonBar:"",showIcon:"",iconDisplay:"input",class:b(a.FormError.tanggal&&"p-invalid")},null,8,["modelValue","class"]),i(w,{error:a.FormError.tanggal},null,8,["error"])]),o("div",de,[i(x,{required:"",for:"item"},{default:r(()=>[d("Tipe")]),_:1}),i(B,{modelValue:s.selectedTipe,"onUpdate:modelValue":t[6]||(t[6]=l=>s.selectedTipe=l),options:s.lTipe,optionLabel:"tipe",placeholder:"Select a Tipe",onChange:a.selectTipe,class:b(a.FormError.tipe&&"p-invalid")},null,8,["modelValue","options","onChange","class"]),i(w,{error:a.FormError.tipe},null,8,["error"])])])]),_:1},8,["visible"]),i(T,{visible:s.deleteFormDialog,"onUpdate:visible":t[10]||(t[10]=l=>s.deleteFormDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[i(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=l=>s.deleteFormDialog=!1)}),i(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:t[9]||(t[9]=l=>a.Destroy(s.item))})]),default:r(()=>[o("div",me,[ue,s.item?(u(),p("span",ce,[d("Are you sure you want to delete "),o("b",null,_(s.item.nama),1),d("?")])):q("",!0)])]),_:1},8,["visible"])])])])}const De=M(z,[["render",pe]]);export{De as default};
