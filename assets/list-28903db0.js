import{_ as B,Y as f,J as H,F as O,r as n,o as c,c as m,b as l,d as s,e as d,l as V,t as h,m as j,q as R,n as r,f as p,k as z,p as W,g as Y}from"./index-11eb6111.js";import{a as J}from"./options-b2eb7ae6.js";const G={data(){return{lKontak:null,kontak:{},lKategori:[],filteredKategori:[],selectedKategori:null,lTop:[],selectedTop:null,lAccountUtang:[],filteredAccountUtang:[],filteredAccountPiutang:[],selectedAccountUtang:null,selectedAccountPiutang:null,kontakDialog:!1,deletekontakDialog:!1,filters:{},isSubmitted:!1,isEdit:!1,selectedColumns:[{header:"Kode",field:"kode",class:"w-20rem"},{header:"Inisial",field:"inisial",class:"w-20rem"},{header:"Perusahaan",field:"kontak",class:"w-20rem"}],Columns:[{header:"Kode",field:"kode",class:"w-20rem"},{header:"Inisial",field:"inisial",class:"w-20rem"},{header:"Perusahaan",field:"kontak",class:"w-20rem"},{header:"Email",field:"email",class:"w-20rem"},{header:"Telepon",field:"telepon",class:"w-20rem"},{header:"NPWP",field:"npwp",class:"w-20rem"}]}},created(){this.initFilters()},mounted(){this.$isLoading.value=!1,this.getOption(),this.getData()},methods:{async getData(){await f.index().then(i=>{this.lKontak=i.data.data}),await H.index().then(i=>{this.lTop=i.data.data.filter(t=>t.keterangan!="Custom")})},async getOption(){await J.getKategorikontak().then(i=>{this.lKategori=i.data.data})},FormNew(){this.kontak={},this.isSubmitted=!1,this.kontakDialog=!0,this.kontak.is_customer=!0,this.kontak.is_supplier=!0,this.kontak.is_aktif=!0,this.selectedAccountUtang=null,this.selectedAccountPiutang=null,this.selectedKategori=null},HideDialog(){this.kontakDialog=!1,this.isSubmitted=!1},Save(){try{this.$isLoading.value=!0,this.isSubmitted=!0,this.kontak&&(this.kontak.is_customer||(this.kontak.akun_piutang=null),this.kontak.is_supplier||(this.kontak.akun_hutang=null),this.isEdit?f.update(this.kontak.id,this.kontak).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lKontak[this.lKontak.findIndex(t=>t.id==i.data.data.id)]=i.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Error",detail:"Failed Updated Kontak",life:3e3})}).finally(()=>{this.isEdit=!1,this.isLoading=!1,this.kontakDialog=!1}):f.store(this.kontak).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lKontak.push(i.data.data)}).catch(()=>{this.$toast.add({severity:"error",summary:"Error",detail:"Failed Created Kontak",life:3e3})}).finally(()=>{this.isLoading=!1}),this.kontak={},this.isSubmitted=!1)}catch(i){console.log(i)}finally{this.isEdit=!1,this.$timeoutLoading()}},FormEdit(i){this.isEdit=!0,this.kontak={...i},this.kontak.id_kategori!=null&&(this.selectedKategori=this.lKategori.find(t=>t.id==this.kontak.id_kategori)),this.kontak.id_top!=null&&(this.selectedTop=this.lTop.find(t=>t.id==this.kontak.id_top)),this.kontakDialog=!0},confirmDelete(i){this.kontak=i,this.deletekontakDialog=!0},Destroy(){this.deletekontakDialog=!1,f.destroy(this.kontak.id).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lKontak=this.lKontak.filter(t=>t.id!==i.data.data.id)}).catch(i=>{this.$toast.add({severity:"error",summary:"Error",detail:i.response.data.message,life:3e3})}),this.kontak={}},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:O.CONTAINS}}},searchUtang(i){setTimeout(()=>{i.query.trim().length?this.filteredAccountUtang=this.lAccountUtang.filter(t=>t.account.toLowerCase().includes(i.query.toLowerCase())):this.filteredAccountUtang=[...this.lAccountUtang]},250)},searchPiutang(i){setTimeout(()=>{i.query.trim().length?this.filteredAccountPiutang=this.lAccountPiutang.filter(t=>t.account.toLowerCase().includes(i.query.toLowerCase())):this.filteredAccountPiutang=[...this.lAccountPiutang]},250)},searchKategori(i){setTimeout(()=>{i.query.trim().length?this.filteredKategori=this.lKategori.filter(t=>t.kategori.toLowerCase().includes(i.query.toLowerCase())):this.filteredKategori=[...this.lKategori]},250)},selectHutang(i){this.kontak.akun_hutang=i.value.id_account},selectPiutang(i){this.kontak.akun_piutang=i.value.id_account},selectKategori(i){this.kontak.id_kategori=i.value.id},changeTop(i){this.kontak.id_top=i.value.id}}},a=i=>(W("data-v-7e40e82e"),i=i(),Y(),i),Q={class:"grid crud-demo"},X={class:"col-12"},Z={class:"card"},$={class:"my-2"},ee={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},te=a(()=>l("h5",{class:"m-0"},"Manage Kontak",-1)),oe={class:"block mt-2 md:mt-0 p-input-icon-left"},le=a(()=>l("i",{class:"pi pi-search"},null,-1)),ie={class:"card flex flex-wrap justify-content-center gap-3"},se={class:"flex align-items-center"},ne=a(()=>l("label",{for:"is-customer",class:"ml-2"}," Customer ",-1)),ae={class:"flex align-items-center"},de=a(()=>l("label",{for:"is-supplier",class:"ml-2"}," Supplier ",-1)),re={class:"formgrid grid"},ue={class:"field col-2"},ce=a(()=>l("label",{for:"kode"},"Kode",-1)),ke={key:0,class:"p-invalid"},me={class:"field col-4"},pe=a(()=>l("label",{for:"inisial"},"Inisial",-1)),_e={key:0,class:"p-invalid"},he={class:"field col-6"},fe=a(()=>l("label",{for:"kontak"},"Perusahaan",-1)),ge={key:0,class:"p-invalid"},ve={class:"formgrid grid"},be={class:"field col-4"},Ve=a(()=>l("label",{for:"telepon"},"Telepon",-1)),ye={class:"field col-4"},Ce=a(()=>l("label",{for:"email"},"Email",-1)),we={class:"field col-4"},Ke=a(()=>l("label",{for:"kategori"},"Kategori",-1)),xe={class:"formgrid grid"},Se={key:0,class:"p-invalid"},Ue={key:0,class:"p-invalid"},Ae={class:"field col-4"},De={class:"flex flex-column"},Te={class:"text-xs text-green-500"},Pe={class:"formgrid grid"},Le={class:"col-12 flex align-items-center justify-content-end gap-2"},Ie=a(()=>l("label",{for:"account"},"Aktif",-1)),Ee=a(()=>l("hr",null,null,-1)),Me={class:"formgrid grid"},Ne={class:"field col-6"},qe=a(()=>l("label",{for:"attention"},"Attention",-1)),Fe={class:"field col-6"},Be=a(()=>l("label",{for:"hp"},"Hp",-1)),He={class:"formgrid grid"},Oe={class:"field col-6"},je=a(()=>l("label",{for:"batasKredit"},"Batas Kredit",-1)),Re={class:"field col-6"},ze=a(()=>l("label",{for:"npwp"},"NPWP",-1)),We={class:"formgrid grid"},Ye={class:"field col-12"},Je=a(()=>l("label",{for:"alamat_penagihan"},"Alamat Penagih",-1)),Ge={class:"field col-12"},Qe=a(()=>l("label",{for:"alamat_kirim"},"Alamat Pengiriman",-1)),Xe={class:"flex align-items-center justify-content-center"},Ze=a(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),$e={key:0};function et(i,t,tt,ot,e,u){const x=n("Toast"),_=n("Button"),S=n("MyExport"),U=n("Toolbar"),A=n("MultiSelect"),k=n("InputText"),g=n("Column"),D=n("ActionButton"),T=n("DataTable"),y=n("Checkbox"),P=n("AutoComplete"),C=n("AutoCompleteAkun"),L=n("Label"),I=n("Dropdown"),E=n("ErrorMsg"),M=n("InputSwitch"),N=n("InputMask"),q=n("InputNumber"),w=n("Textarea"),K=n("Dialog");return c(),m("div",Q,[l("div",X,[l("div",Z,[s(x),s(U,{class:"mb-4"},{start:d(()=>[l("div",$,[s(_,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:u.FormNew},null,8,["onClick"])])]),end:d(()=>[s(S,{value:e.lKontak,selectedColumns:e.selectedColumns,title:"Export Kontak"},null,8,["value","selectedColumns"])]),_:1}),s(T,{ref:"dt",value:e.lKontak,selection:i.selectedlKontak,"onUpdate:selection":t[2]||(t[2]=o=>i.selectedlKontak=o),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Kontak",responsiveLayout:"scroll"},{header:d(()=>[l("div",ee,[te,s(A,{modelValue:e.selectedColumns,"onUpdate:modelValue":t[0]||(t[0]=o=>e.selectedColumns=o),options:e.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),l("span",oe,[le,s(k,{modelValue:e.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=o=>e.filters.global.value=o),placeholder:"Search..."},null,8,["modelValue"])])])]),default:d(()=>[s(g,{header:"#",headerStyle:"width:10px"},{body:d(o=>[V(h(o.index+1),1)]),_:1}),(c(!0),m(j,null,R(e.selectedColumns,(o,v)=>(c(),z(g,{field:o.field,header:o.header,class:r(o.class),key:o.field+"_"+v,sortable:!0},{body:d(({data:b,field:F})=>[l("div",null,h(b[F]),1)]),_:2},1032,["field","header","class"]))),128)),s(g,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:d(({data:o,index:v})=>[s(D,{data:o,index:v,onEdit:b=>u.FormEdit(o),onDelete:b=>u.confirmDelete(o)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),s(K,{visible:e.kontakDialog,"onUpdate:visible":t[21]||(t[21]=o=>e.kontakDialog=o),style:{width:"720px"},header:"kontak Details",modal:!0,class:"p-fluid"},{footer:d(()=>[s(_,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:u.HideDialog},null,8,["onClick"]),s(_,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:u.Save,loading:i.$isLoading.value,disabled:i.$isLoading.value},null,8,["onClick","loading","disabled"])]),default:d(()=>[l("div",ie,[l("div",se,[s(y,{modelValue:e.kontak.is_customer,"onUpdate:modelValue":t[3]||(t[3]=o=>e.kontak.is_customer=o),inputId:"is-customer",binary:!0,class:r({"p-invalid":e.isSubmitted&&!e.kontak.is_customer&&!e.kontak.is_supplier})},null,8,["modelValue","class"]),ne]),l("div",ae,[s(y,{modelValue:e.kontak.is_supplier,"onUpdate:modelValue":t[4]||(t[4]=o=>e.kontak.is_supplier=o),inputId:"is-supplier",binary:!0,class:r({"p-invalid":e.isSubmitted&&!e.kontak.is_customer&&!e.kontak.is_supplier})},null,8,["modelValue","class"]),de])]),l("div",re,[l("div",ue,[ce,s(k,{id:"kode",modelValue:e.kontak.kode,"onUpdate:modelValue":t[5]||(t[5]=o=>e.kontak.kode=o),modelModifiers:{trim:!0},autofocus:"",class:r({"p-invalid":e.isSubmitted&&!e.kontak.kode})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kontak.kode?(c(),m("small",ke,"required")):p("",!0)]),l("div",me,[pe,s(k,{id:"inisial",modelValue:e.kontak.inisial,"onUpdate:modelValue":t[6]||(t[6]=o=>e.kontak.inisial=o),modelModifiers:{trim:!0},autofocus:"",class:r({"p-invalid":e.isSubmitted&&!e.kontak.inisial})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kontak.inisial?(c(),m("small",_e,"required")):p("",!0)]),l("div",he,[fe,s(k,{id:"kontak",modelValue:e.kontak.kontak,"onUpdate:modelValue":t[7]||(t[7]=o=>e.kontak.kontak=o),modelModifiers:{trim:!0},autofocus:"",class:r({"p-invalid":e.isSubmitted&&!e.kontak.kontak})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kontak.kontak?(c(),m("small",ge,"required")):p("",!0)])]),l("div",ve,[l("div",be,[Ve,s(k,{placeholder:"(+99) 999-99999999",id:"telepon",modelValue:e.kontak.telepon,"onUpdate:modelValue":t[8]||(t[8]=o=>e.kontak.telepon=o),autofocus:""},null,8,["modelValue"])]),l("div",ye,[Ce,s(k,{id:"email",modelValue:e.kontak.email,"onUpdate:modelValue":t[9]||(t[9]=o=>e.kontak.email=o),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])]),l("div",we,[Ke,s(P,{modelValue:e.selectedKategori,"onUpdate:modelValue":t[10]||(t[10]=o=>e.selectedKategori=o),suggestions:e.filteredKategori,onComplete:u.searchKategori,optionLabel:"kategori",onItemSelect:u.selectKategori,dropdown:"",forceSelection:""},null,8,["modelValue","suggestions","onComplete","onItemSelect"])])]),l("div",xe,[l("div",{class:r(["field",{hidden:!e.kontak.is_supplier&&e.kontak.is_customer,"col-4":e.kontak.is_supplier&&!e.kontak.is_customer,"col-4":e.kontak.is_customer&&e.kontak.is_supplier||!e.kontak.is_customer&&!e.kontak.is_supplier}])},[s(C,{modelValue:e.kontak.akun_hutang,"onUpdate:modelValue":t[11]||(t[11]=o=>e.kontak.akun_hutang=o),label:"Account Hutang",head:2,level:4,orderBy:"code",class:r(null)},null,8,["modelValue"]),e.isSubmitted&&!e.kontak.kontak?(c(),m("small",Se,"required")):p("",!0)],2),l("div",{class:r(["field",{hidden:e.kontak.is_supplier&&!e.kontak.is_customer,"col-4":!e.kontak.is_supplier&&e.kontak.is_customer,"col-4":e.kontak.is_customer&&e.kontak.is_supplier||!e.kontak.is_customer&&!e.kontak.is_supplier}])},[s(C,{modelValue:e.kontak.akun_piutang,"onUpdate:modelValue":t[12]||(t[12]=o=>e.kontak.akun_piutang=o),label:"Account Piutang",min:1002,max:1004,level:4,orderBy:"code",class:r(null)},null,8,["modelValue"]),e.isSubmitted&&!e.kontak.kontak?(c(),m("small",Ue,"required")):p("",!0)],2),l("div",Ae,[s(L,{for:"top",required:""}),s(I,{id:"top",modelValue:e.selectedTop,"onUpdate:modelValue":t[13]||(t[13]=o=>e.selectedTop=o),options:e.lTop,optionLabel:"keterangan",placeholder:"Top",onChange:u.changeTop,class:r(e.isSubmitted&&!e.kontak.id_top&&"p-invalid")},{option:d(o=>[l("div",De,[l("div",Te,h(o.option.top),1),l("div",null,h(o.option.keterangan),1)])]),_:1},8,["modelValue","options","onChange","class"]),s(E,{error:e.isSubmitted&&!e.kontak.id_top},null,8,["error"])])]),l("div",Pe,[l("div",Le,[Ie,s(M,{modelValue:e.kontak.is_aktif,"onUpdate:modelValue":t[14]||(t[14]=o=>e.kontak.is_aktif=o),binary:!0},null,8,["modelValue"])])]),Ee,l("div",Me,[l("div",Ne,[qe,s(k,{id:"attention",modelValue:e.kontak.attention,"onUpdate:modelValue":t[15]||(t[15]=o=>e.kontak.attention=o),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])]),l("div",Fe,[Be,s(N,{mask:"(+99)999-?99999999",placeholder:"(+99)999-99999999",id:"hp",modelValue:e.kontak.hp,"onUpdate:modelValue":t[16]||(t[16]=o=>e.kontak.hp=o),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])])]),l("div",He,[l("div",Oe,[je,s(q,{id:"batasKredit",modelValue:e.kontak.batasKredit,"onUpdate:modelValue":t[17]||(t[17]=o=>e.kontak.batasKredit=o),modelModifiers:{number:!0},autofocus:""},null,8,["modelValue"])]),l("div",Re,[ze,s(k,{id:"npwp",modelValue:e.kontak.npwp,"onUpdate:modelValue":t[18]||(t[18]=o=>e.kontak.npwp=o),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])])]),l("div",We,[l("div",Ye,[Je,s(w,{modelValue:e.kontak.alamat_penagihan,"onUpdate:modelValue":t[19]||(t[19]=o=>e.kontak.alamat_penagihan=o),id:"alamat_penagihan"},null,8,["modelValue"])]),l("div",Ge,[Qe,s(w,{modelValue:e.kontak.alamat_kirim,"onUpdate:modelValue":t[20]||(t[20]=o=>e.kontak.alamat_kirim=o),id:"alamat_kirim"},null,8,["modelValue"])])])]),_:1},8,["visible"]),s(K,{visible:e.deletekontakDialog,"onUpdate:visible":t[23]||(t[23]=o=>e.deletekontakDialog=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[s(_,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[22]||(t[22]=o=>e.deletekontakDialog=!1)}),s(_,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:u.Destroy},null,8,["onClick"])]),default:d(()=>[l("div",Xe,[Ze,e.kontak?(c(),m("span",$e,[V("Are you sure you want to delete "),l("b",null,h(e.kontak.kontak),1),V("?")])):p("",!0)])]),_:1},8,["visible"])])])])}const st=B(G,[["render",et],["__scopeId","data-v-7e40e82e"]]);export{st as default};
