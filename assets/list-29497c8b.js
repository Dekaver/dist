import{a as T}from"./api-27c516d8.js";import{a as P}from"./api-2cd2ff16.js";import{D as o,_ as y,r as l,o as h,c as m,d,b as e,e as r,l as n,t as v,f as x,m as b}from"./index-11eb6111.js";/* empty css                             */const p={index(t){return o.get("/ptkp-ter/"+t+"/index")},store(t){return o.post("/ptkp-ter/",t)},update(t,s){return o.patch("/ptkp-ter/"+t,s)},show(t){return o.get("/ptkp-ter/"+t,"/show")},destroy(t){return o.delete("/ptkp-ter/"+t)},forMapping(t){return o.get("/ptkp-ter/"+t+"/mapping")}},w={data(){return{lTer:null,item:{id:null,detail:[]},filters:{},isEdit:!1,selectedPtkp:null,lPtkp:[],id_ptkp:null,lTer:[[],[]]}},mounted(){this.item.id=1,this.isEdit=!0,this.getData().finally(()=>{P.index().then(t=>{this.lTer=[t.data.data,[]]}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Pegawai ",life:3e3})}),this.isEdit&&this.getDataTer()})},methods:{ubahPtkp(t){t.value===null?(this.id_ptkp=null,this.lPtkpTarif=[]):(this.id_ptkp=this.selectedPtkp.id,this.getTerPtkp(),this.getDataTer())},async getData(){await T.index().then(t=>{this.lPtkp=t.data.data})},getTerPtkp(){this.getDataTer()},async submitForm(){try{this.item.id_ptkp=this.id_ptkp,this.item.ter=this.lTer[1],console.log(this.item,"item ezaaa"),await p.store(this.item).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3})}).catch(t=>{this.$toast.add({severity:"error",summary:"Failed",detail:t.response.data.message,life:3e3})})}catch(t){this.$toast.add({severity:"error",summary:"Failed",detail:t.response.data.message,life:3e3})}},async getDataTer(){this.lTer=[[],[]],await p.index(this.id_ptkp).then(async t=>{this.item.ter=t.data.data,this.lTer[1]=t.data.data}),await p.forMapping(this.id_ptkp).then(t=>{this.lTer[0]=t.data.data})}}},D={class:"grid"},V={class:"col-12"},C={class:"card"},E=e("h5",null,"PTKP TER",-1),L={class:"p-fluid formgrid grid mt-4"},F={class:"field col-12 md:col-4"},B={key:0,class:"my-4"},S={class:"flex-1 flex flex-column gap-2"},K={class:"font-bold"},N=e("br",null,null,-1),R={class:"grid"},I={class:"col-12"},M={class:"flex flex-wrap gap-3 justify-content-end"};function U(t,s,j,q,a,c){const u=l("Toast"),_=l("Label"),k=l("Dropdown"),f=l("PickList"),g=l("Button");return h(),m(b,null,[d(u),e("div",D,[e("div",V,[e("div",C,[E,e("div",L,[e("div",F,[d(_,{for:"ptkp",required:""},{default:r(()=>[n("PTKP")]),_:1}),d(k,{id:"ptkp",modelValue:a.selectedPtkp,"onUpdate:modelValue":s[0]||(s[0]=i=>a.selectedPtkp=i),onChange:c.ubahPtkp,options:a.lPtkp,placeholder:"PILIH PTKP",optionLabel:"ptkp",showClear:""},null,8,["modelValue","onChange","options"])])]),this.id_ptkp!=null?(h(),m("div",B,[d(f,{modelValue:a.lTer,"onUpdate:modelValue":s[1]||(s[1]=i=>a.lTer=i),listStyle:"height:342px",dataKey:"id",breakpoint:"1400px",showSourceControls:!1,showTargetControls:!1},{sourceheader:r(()=>[n(" TER yang belum dipilih ")]),targetheader:r(()=>[n(" TER yang sudah dipilih ")]),item:r(i=>[e("div",S,[e("span",K,v(i.item.ter),1)])]),_:1},8,["modelValue"])])):x("",!0),N,e("div",R,[e("div",I,[e("div",M,[d(g,{label:"Save",disabled:a.id_ptkp==null,onClick:s[2]||(s[2]=i=>c.submitForm())},null,8,["disabled"])])])])])])])],64)}const G=y(w,[["render",U]]);export{G as default};
