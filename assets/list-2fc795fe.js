import{_ as N,X as I,F as P,r as n,o as d,c,b as t,d as o,e as i,n as k,t as m,l as b,m as B,q as U,k as x,f as D}from"./index-11eb6111.js";import{a as w}from"./acckas-581f2fe3.js";import{_ as j}from"./data-empty-73bd2e8a.js";const K={data(){return{lItem:[],item:{id:null,date:null,reference:null,akun:null,nama_akun:null,description:null,total:null,kepada:null,type:null,status:null},lAkun:[],selectedAkun:null,selectedColumns:[{field:"date",header:"Tanggal",type:"date"},{field:"reference",header:"Nomor"},{field:"kepada",header:"Nama"},{field:"akun",header:"Akun"},{field:"description",header:"Deskripsi"},{field:"total",header:"Nilai",type:"currency"},{field:"status",header:"Status"}],Columns:[{field:"date",header:"Tanggal"},{field:"reference",header:"Nomor"},{field:"kepada",header:"Nama"},{field:"akun",header:"Akun"},{field:"description",header:"Deskripsi"},{field:"total",header:"Nilai",type:"currency"},{field:"status",header:"Status"}],deleteDialog:!1,periodeawal:null,periodeakhir:null,product:{},filter:!1,filters:{},f:{awal:null,akhir:null,selectedStatus:{label:"All",value:""}},statuses:[{label:"All",value:""},{label:"Draft",value:"D"},{label:"Close",value:"C"}]}},productService:null,created(){this.initFilters()},mounted(){this.getData()},computed:{filteredItems:function(){return this.lItem.filter(s=>(this.f.selectedStatus.value==""?!0:this.f.selectedStatus.value==s.status)&&(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(s.date).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(s.date).toLocaleDateString())&&(this.selectedAkun?this.selectedAkun.id==s.akun:!0))}},methods:{async getData(){await w.index("O").then(s=>{this.lItem=s.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Load data kas",life:3e3})}),await I.indexByCashable().then(s=>{this.lAkun=s.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Load data akun",life:3e3})})},Destroy(s){this.deleteDialog=!1,w.destroy(s.id).then(a=>{this.$toast.add({severity:"success",summary:"Successful",detail:a.data.message,life:3e3}),this.lItem=this.lItem.filter(g=>g.id!==s.id),this.item={}}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Delete data kas",life:3e3})})},FormDelete(s){this.deleteDialog=!0,this.item={...s}},FormEdit(s){this.$router.push({name:"kaskeluar.edit",params:{id:s.id}})},exportCSV(){this.$refs.dt.exportCSV()},showHideFilter(){this.filter=!this.filter},initFilters(){this.filters={global:{value:null,matchMode:P.CONTAINS}}}}},E={class:"grid crud-demo"},R={class:"col-12"},M={class:"card"},O={class:"my-2"},X=t("h5",{class:"mbe-4"},"Pencarian Kas Keluar",-1),z={class:"p-fluid formgrid grid"},H={class:"field col-2"},q={class:"p-float-label"},Y=t("p",{class:"mb-1"},"Periode Awal",-1),G={class:"field col-2"},J={class:"p-float-label"},Q=t("p",{class:"mb-1"},"Periode Akhir",-1),W={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},Z=t("label",{for:"akun",class:"mb-1"},"Akun",-1),$={class:"flex flex-column"},ee={class:"text-xs text-green-500"},te={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},le=t("label",{for:"status",class:"mb-1"},"Status",-1),se={class:"field col-auto",style:{display:"flex","align-items":"flex-end","align-content":"flex-end"}},ae={class:"flex flex-column gap-2 md:gap-0 md:flex-row md:justify-content-between md:align-items-center"},oe=t("h5",null,"Kas Keluar",-1),ie={class:"block p-input-icon-left"},ne=t("i",{class:"pi pi-search"},null,-1),de=t("div",{class:"flex flex-column gap-2 justify-content-center align-items-center"},[t("div",{class:"text-4xl"},"Loading...")],-1),re=t("div",{class:"flex flex-column gap-2 justify-content-center align-items-center"},[t("img",{src:j,alt:"",style:{width:"300px"}}),t("div",{class:"text-4xl"},"Belum ada data.")],-1),ue={key:0},ce={key:1},me={key:2},pe={key:3},fe={key:4,class:"text-right"},he={key:5},_e={class:"flex align-items-center justify-content-center"},ke=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),be={key:0};function ge(s,a,g,ye,l,f){const C=n("Toast"),r=n("Button"),S=n("router-link"),V=n("Toolbar"),y=n("Calendar"),v=n("Dropdown"),A=n("InputText"),h=n("Column"),F=n("Tag"),L=n("DataTable"),T=n("Dialog");return d(),c("div",E,[t("div",R,[t("div",M,[o(C),o(V,{class:"mb-4"},{start:i(()=>[t("div",O,[o(S,{to:"/kas/keluar/create",class:"btn btn-added me-2"},{default:i(()=>[o(r,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})]),o(r,{icon:"pi pi-filter",label:"Filter",class:k(["p-button mx-2",{"p-button-block":l.filter,"p-button-outlined":!l.filter}]),onClick:f.showHideFilter},null,8,["onClick","class"])]),end:i(()=>[o(r,{label:"Export XLSX",icon:"pi pi-upload",class:"p-button-help w-max",onClick:a[0]||(a[0]=e=>f.exportCSV(e))})]),_:1}),t("div",{class:k(["card fadein",{hidden:!l.filter}])},[X,t("div",z,[t("div",H,[t("span",q,[Y,o(y,{dateFormat:"dd-mm-yy",modelValue:l.f.awal,"onUpdate:modelValue":a[1]||(a[1]=e=>l.f.awal=e),inputId:"f.awal"},null,8,["modelValue"])])]),t("div",G,[t("span",J,[Q,o(y,{dateFormat:"dd-mm-yy",modelValue:l.f.akhir,"onUpdate:modelValue":a[2]||(a[2]=e=>l.f.akhir=e),inputId:"f.akhir"},null,8,["modelValue"])])]),t("div",W,[Z,o(v,{id:"akun",modelValue:l.selectedAkun,"onUpdate:modelValue":a[3]||(a[3]=e=>l.selectedAkun=e),options:l.lAkun,optionLabel:"name",placeholder:"Akun"},{option:i(e=>[t("div",$,[t("div",ee,m(e.option.code),1),t("div",null,m(e.option.name),1)])]),_:1},8,["modelValue","options"])]),t("div",te,[le,o(v,{id:"status",modelValue:l.f.selectedStatus,"onUpdate:modelValue":a[4]||(a[4]=e=>l.f.selectedStatus=e),options:l.statuses,optionLabel:"label",placeholder:"Status"},null,8,["modelValue","options"])]),t("div",se,[o(r,{label:"Search"})])])],2),o(L,{ref:"dt",value:f.filteredItems,selection:s.selectedItem,"onUpdate:selection":a[6]||(a[6]=e=>s.selectedItem=e),dataKey:"id",paginator:!0,rows:10,filters:l.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll",tableStyle:"table-layout:auto"},{header:i(()=>[t("div",ae,[oe,t("span",ie,[ne,o(A,{modelValue:l.filters.global.value,"onUpdate:modelValue":a[5]||(a[5]=e=>l.filters.global.value=e),placeholder:"Search...",class:"w-full"},null,8,["modelValue"])])])]),loading:i(()=>[de]),empty:i(()=>[re]),default:i(()=>[o(h,{header:"#",headerStyle:"width:10px"},{body:i(e=>[b(m(e.index+1),1)]),_:1}),(d(!0),c(B,null,U(l.selectedColumns,(e,_)=>(d(),x(h,{field:e.field,header:e.header,class:k(e.class),key:e.field+"_"+_,sortable:!0},{body:i(({data:p,field:u})=>[u=="icon"?(d(),c("div",ue,[o(r,{icon:p[u],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):u=="akun"?(d(),c("div",ce,m(p.kode_akun)+" - "+m(p.nama_akun),1)):u=="status"?(d(),c("div",me,[o(F,{value:s.$h.getLabel(p[u]),severity:s.$h.getLabel(p[u])},null,8,["value","severity"])])):e.type=="date"?(d(),c("div",pe,m(s.$h.formatDate(p[u])),1)):e.type=="currency"?(d(),c("div",fe,m(s.$h.formatNumber(p[u])),1)):(d(),c("div",he,m(p[u]),1))]),_:2},1032,["field","header","class"]))),128)),o(h,{header:"Action"},{body:i(({data:e})=>[o(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning mr-2",onClick:_=>f.FormEdit(e)},null,8,["onClick"]),e.status!="C"?(d(),x(r,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:_=>f.FormDelete(e)},null,8,["onClick"])):D("",!0)]),_:1})]),_:1},8,["value","selection","filters"]),o(T,{visible:l.deleteDialog,"onUpdate:visible":a[9]||(a[9]=e=>l.deleteDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[o(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=e=>l.deleteDialog=!1)}),o(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:a[8]||(a[8]=e=>f.Destroy(l.item))})]),default:i(()=>[t("div",_e,[ke,l.item?(d(),c("span",be,[b("Are you sure you want to delete "),t("b",null,m(l.item.nomor),1),b("?")])):D("",!0)])]),_:1},8,["visible"])])])])}const we=N(K,[["render",ge]]);export{we as default};
