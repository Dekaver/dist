import{_ as N,s as k,F as B,r as n,o as r,c as m,b as o,d as a,e as i,n as _,k as D,f as w,m as R,q as U,l as C,t as h}from"./index-11eb6111.js";import{a as V}from"./paymentar-110b431d.js";const M={data(){return{lItem:[],selectedItem:null,lPersetujuan:[],deleteDialog:!1,filter:!1,filters:!1,f:{awal:null,akhir:null,id_customer:null,selectedStatus:{label:"All",value:""}},statuses:[{label:"All",value:""},{label:"Draft",value:"D"},{label:"Approve",value:"C"}],selectedColumns:[{field:"number",header:"Bank Voucer"},{field:"date",header:"Tanggal",type:"date"},{field:"customer",header:"Nama Pelanggan"},{field:"description",header:"Keterangan"},{field:"total",header:"Total",type:"currency"},{field:"status",header:"Status"}],Columns:[{field:"number",header:"Bank Voucer"},{field:"date",header:"Tanggal",type:"date"},{field:"customer",header:"Nama Pelanggan"},{field:"description",header:"Keterangan"},{field:"total",header:"Total",type:"currency"},{field:"status",header:"Status"}]}},created(){this.initFilters()},mounted(){this.getData(),k.on("update-persetujuan-payment-ar",()=>{this.getDataPersetujuan()})},beforeUnmount(){k.off("update-persetujuan-payment-ar")},computed:{filteredlItem(){return this.lItem.filter(e=>(this.f.selectedStatus.value==""?!0:this.f.selectedStatus.value==e.status)&&(this.f.id_customer==null?!0:this.f.id_customer.id==e.id_customer)&&(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(e.date).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(e.date).toLocaleDateString()))}},methods:{async getData(){await V.index().then(e=>{this.lItem=e.data.data}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})})},async Destroy(e){await V.destroy(e.id).then(l=>{this.$toast.add({severity:"success",summary:"Success",detail:l.data.message,life:3e3}),this.lItem=this.lItem.filter(b=>b.id!==e.id),this.deleteDialog=!1}).catch(l=>{this.$toast.add({severity:"error",summary:"Failed",detail:l.response.data.message,life:3e3})})},FormEdit(e){this.$router.push({name:"paymentar.edit",params:{id:e.id}})},onRowDblclick(e){this.$router.push({name:"paymentar.edit",params:{id:e.data.id}})},jurnal(e){this.$router.push({name:"paymentar.jurnal",params:{id:e.id}})},confirmDelete(e){this.deleteDialog=!0,this.item={...e}},showHideFilter(){this.filter=!this.filter},button(e){let l=[];return e.status=="A"&&l.push({label:"Journal Voucher",icon:"pi pi-book",action:"journal",command:()=>{this.Cetak(e)}}),l.push({label:"Edit",icon:"pi pi-pencil",action:"edit",command:()=>{this.FormEdit(e)}}),e.status!="A"&&l.push({label:"Delete",icon:"pi pi-trash",action:"delete",command:()=>{this.Destroy(e)}}),l},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:B.CONTAINS}}}}},J={class:"grid crud-demo"},K={class:"col-12"},q={class:"card"},O={class:"my-2"},z=o("h5",{class:"mbe-4"},"Filter Payment AR",-1),H={class:"p-fluid formgrid grid"},Y={class:"field col-2"},G={class:"p-float-label"},Q=o("p",{class:"mb-1"},"Start Date",-1),W={class:"field col-2"},X={class:"p-float-label"},Z=o("p",{class:"mb-1"},"End Date",-1),$={class:"field col-2"},ee={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},te=o("label",{for:"salesquotation",class:"mb-1"},"Status",-1),le={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},se=o("h5",{class:"m-0"},"Management Payment AR",-1),oe={class:"block mt-2 md:mt-0 p-input-icon-left"},ae=o("i",{class:"pi pi-search"},null,-1),ne=o("div",{class:"text-center"},"Empty",-1),ie={key:0},re={key:1},de={key:2},ue={key:3,class:"text-right"},ce={key:4},me={class:"flex align-items-center justify-content-center"},pe=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),he={key:0};function fe(e,l,b,_e,s,u){const x=n("Toast"),p=n("Button"),g=n("router-link"),P=n("MyExport"),S=n("Toolbar"),y=n("Calendar"),T=n("AutoCompleteKontak"),F=n("Dropdown"),A=n("InputText"),I=n("Tag"),v=n("Column"),L=n("ActionButton"),j=n("DataTable"),E=n("Dialog");return r(),m("div",J,[o("div",K,[o("div",q,[a(x),a(S,{class:"mb-4"},{start:i(()=>{var t;return[o("div",O,[a(g,{to:"/finance/ar/payment/create",class:"btn btn-added me-2"},{default:i(()=>[a(p,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1}),a(p,{icon:"pi pi-filter",class:_(["p-button mx-2",{"p-button-block":s.filter,"p-button-outlined":!s.filter}]),label:"Filter",onClick:u.showHideFilter},null,8,["onClick","class"]),(t=s.lPersetujuan)!=null&&t.length?(r(),D(g,{key:0,to:"/finance/ar/payment/persetujuan",class:"btn btn-added mx-2"},{default:i(()=>[a(p,{icon:"pi pi-shield",class:"p-button p-button-outlined",label:"Persetujuan",badge:s.lPersetujuan.length,severity:"warning",badgeSeverity:"warning"},null,8,["badge"])]),_:1})):w("",!0)])]}),end:i(()=>[a(P,{value:u.filteredlItem,selectedColumns:s.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),o("div",{class:_(["card fadein",{hidden:!s.filter}])},[z,o("div",H,[o("div",Y,[o("span",G,[Q,a(y,{dateFormat:"dd-mm-yy",modelValue:s.f.awal,"onUpdate:modelValue":l[0]||(l[0]=t=>s.f.awal=t),inputId:"periodeawal"},null,8,["modelValue"])])]),o("div",W,[o("span",X,[Z,a(y,{dateFormat:"dd-mm-yy",modelValue:s.f.akhir,"onUpdate:modelValue":l[1]||(l[1]=t=>s.f.akhir=t),inputId:"periodeakhir"},null,8,["modelValue"])])]),o("div",$,[a(T,{modelValue:s.f.id_customer,"onUpdate:modelValue":l[2]||(l[2]=t=>s.f.id_customer=t),optionLabel:"kontak",label:"Pelanggan","is-customer":""},null,8,["modelValue"])]),o("div",ee,[te,a(F,{id:"salesquotation",modelValue:s.f.selectedStatus,"onUpdate:modelValue":l[3]||(l[3]=t=>s.f.selectedStatus=t),options:s.statuses,optionLabel:"label",placeholder:"All"},null,8,["modelValue","options"])])])],2),a(j,{ref:"dt",value:u.filteredlItem,selection:s.selectedItem,"onUpdate:selection":l[5]||(l[5]=t=>s.selectedItem=t),dataKey:"id","selection-mode":"single",onRowDblclick:u.onRowDblclick,paginator:!0,rows:10,filters:s.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll",tableStyle:"table-layout:auto"},{header:i(()=>[o("div",le,[se,o("span",oe,[ae,a(A,{modelValue:s.filters.global.value,"onUpdate:modelValue":l[4]||(l[4]=t=>s.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:i(()=>[ne]),default:i(()=>[(r(!0),m(R,null,U(s.selectedColumns,(t,f)=>(r(),D(v,{field:t.field,header:t.header,class:_(t.class),key:t.field+"_"+f,sortable:!0},{body:i(({data:d,field:c})=>[c=="icon"?(r(),m("div",ie,[a(p,{icon:d[c],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):c=="status"?(r(),m("div",re,[a(I,{value:e.$h.getLabel(d[c]),severity:e.$h.getLabel(d[c])},null,8,["value","severity"])])):t.type=="date"?(r(),m("div",de,h(e.$h.formatDate(d[c])),1)):t.type=="currency"?(r(),m("div",ue,h(e.$h.formatNumber(d[c])),1)):(r(),m("div",ce,h(d[c]),1))]),_:2},1032,["field","header","class"]))),128)),a(v,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:i(({data:t,index:f})=>[a(L,{data:t,index:f,onEdit:d=>u.FormEdit(t),onDelete:d=>u.confirmDelete(t),onJurnal:d=>u.jurnal(t),showDelete:t.status=="D",showJurnal:t.status!="D"},null,8,["data","index","onEdit","onDelete","onJurnal","showDelete","showJurnal"])]),_:1})]),_:1},8,["value","selection","onRowDblclick","filters"]),a(E,{visible:s.deleteDialog,"onUpdate:visible":l[8]||(l[8]=t=>s.deleteDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[a(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[6]||(l[6]=t=>s.deleteDialog=!1)}),a(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:l[7]||(l[7]=t=>u.Destroy(e.item))})]),default:i(()=>[o("div",me,[pe,e.item?(r(),m("span",he,[C("Are you sure you want to delete "),o("b",null,h(e.item.nomor),1),C("?")])):w("",!0)])]),_:1},8,["visible"])])])])}const ye=N(M,[["render",fe]]);export{ye as default};
