import{_ as R,F as E,r as a,o as c,c as u,b as i,d as l,e as r,l as _,t as g,m as P,q as T,n as b,f as v,k as N}from"./index-11eb6111.js";import{a as f}from"./role-1adf88f1.js";const A={data(){return{lRole:[],role:{},selectedRole:null,filters:{},selectedColumns:[{header:"Role",field:"role",class:"w-20rem"}],Columns:[{header:"Role",field:"role",class:"w-20rem"}],isSubmitted:!1,isEdit:!1,formDialog:!1,deleteFormDialog:!1}},created(){this.initFilters()},mounted(){this.getData()},methods:{getData(){f.index().then(s=>{this.lRole=s.data.data})},Save(){this.isSubmitted=!0,this.isEdit?f.update(this.role.id,this.role).then(s=>{this.$toast.add({severity:"success",summary:"Successful",detail:s.data.message,life:3e3}),this.getData(),this.formDialog=!1}):f.store(this.role).then(s=>{this.$toast.add({severity:"success",summary:"Successful",detail:s.data.message,life:3e3}),this.getData(),this.formDialog=!1})},Destroy(s){this.lRole=this.lRole.filter(o=>o.id!==s.id),f.destroy(s.id).then(o=>{this.$toast.add({severity:"success",summary:"Successful",detail:o.data.message,life:3e3}),this.getData(),this.deleteFormDialog=!1})},initFilters(){this.filters={global:{value:null,matchMode:E.CONTAINS}}},exportCSV(){this.$refs.dt.exportCSV()},FormNew(){this.isSubmitted=!1,this.role={role:null},this.formDialog=!0},FormEdit(s){this.role={...s},this.isSubmitted=!1,this.formDialog=!0,this.isEdit=!0},confirmDelete(s){this.role={...s},this.deleteFormDialog=!0},FormHakAkses(s){this.$router.push({name:"setting hak-akses",params:{id:s.id}})},HideDialog(){this.formDialog=!1}}},V={class:"grid crud-demo"},B={class:"col-12"},L={class:"card"},M={class:"my-2"},H=i("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[i("h5",{class:"m-0"},"Manajemen Role")],-1),j=i("div",{class:"text-center"},"Empty",-1),I={class:"formgrid grid"},q={class:"field col-12 d-flex justifiy-content-center align-items-end"},O=i("label",{for:"role"},"Role",-1),U={key:0,class:"p-invalid"},z={class:"flex align-items-center justify-content-center"},K=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Y={key:0};function G(s,o,J,Q,e,n){const D=a("Toast"),d=a("Button"),y=a("MyExport"),x=a("Toolbar"),h=a("Column"),C=a("ActionButton"),w=a("DataTable"),F=a("InputText"),k=a("Dialog");return c(),u("div",V,[i("div",B,[i("div",L,[l(D),l(x,{class:"mb-4"},{start:r(()=>[i("div",M,[l(d,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.FormNew},null,8,["onClick"])])]),end:r(()=>[l(y,{value:e.lRole,selectedColumns:e.selectedColumns,title:"Export Role"},null,8,["value","selectedColumns"])]),_:1}),l(w,{ref:"dt",value:e.lRole,dataKey:"id",paginator:!0,rows:10,filters:e.filters,sortMode:"single",sortField:"id",sortOrder:1,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Role",responsiveLayout:"scroll"},{header:r(()=>[H]),empty:r(()=>[j]),default:r(()=>[l(h,{header:"#",headerStyle:"width:10px"},{body:r(t=>[_(g(t.index+1),1)]),_:1}),(c(!0),u(P,null,T(e.selectedColumns,(t,p)=>(c(),N(h,{field:t.field,header:t.header,class:b(t.class),key:t.field+"_"+p,sortable:!0},{body:r(({data:m,field:S})=>[i("div",null,g(m[S]),1)]),_:2},1032,["field","header","class"]))),128)),l(h,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:r(({data:t,index:p})=>[l(C,{data:t,index:p,onEdit:m=>n.FormEdit(t),onDelete:m=>n.confirmDelete(t),onHakAkses:m=>n.FormHakAkses(t),menuItems:[{label:"Hak Akses",icon:"pi pi-lock",action:"hak-akses"}]},null,8,["data","index","onEdit","onDelete","onHakAkses"])]),_:1})]),_:1},8,["value","filters"]),l(k,{visible:e.formDialog,"onUpdate:visible":o[1]||(o[1]=t=>e.formDialog=t),style:{width:"450px"},header:"Departemen Details",modal:!0,class:"p-fluid"},{footer:r(()=>[l(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.HideDialog},null,8,["onClick"]),l(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:n.Save},null,8,["onClick"])]),default:r(()=>[i("div",I,[i("div",q,[O,l(F,{id:"role",modelValue:e.role.role,"onUpdate:modelValue":o[0]||(o[0]=t=>e.role.role=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:b({"p-invalid":e.isSubmitted&&!e.role.role})},null,8,["modelValue","class"]),e.isSubmitted&&!e.role.role?(c(),u("small",U,"required")):v("",!0)])])]),_:1},8,["visible"]),l(k,{visible:e.deleteFormDialog,"onUpdate:visible":o[4]||(o[4]=t=>e.deleteFormDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[l(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[2]||(o[2]=t=>e.deleteFormDialog=!1)}),l(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:o[3]||(o[3]=t=>n.Destroy(e.role))})]),default:r(()=>[i("div",z,[K,e.role?(c(),u("span",Y,[_("Are you sure you want to delete "),i("b",null,g(e.role.role),1),_("?")])):v("",!0)])]),_:1},8,["visible"])])])])}const Z=R(A,[["render",G]]);export{Z as default};
