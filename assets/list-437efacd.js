import{_ as x,F as V,r as n,o as r,c,b as o,d as l,e as d,m as N,q as A,l as y,t as u,f as S,k as L,n as B}from"./index-11eb6111.js";import{a as b}from"./proposalap-fc9fa4f8.js";const E={data(){return{periodeawal:null,periodeakhir:null,deleteFormDialog:!1,lProposalAP:[],selectedProposalAp:null,selectedColumns:[{field:"nomor",header:"Nomor Proposal"},{field:"tanggal",header:"Tanggal"},{field:"keterangan",header:"Notes"},{field:"status",header:"Status"}],Columns:[{field:"nomor",header:"Nomor Proposal"},{field:"tanggal",header:"Tanggal"},{field:"keterangan",header:"Notes"},{field:"status",header:"Status"}]}},created(){this.initFilters()},mounted(){this.getData()},methods:{async getData(){await b.index().then(e=>{this.lProposalAP=e.data.data}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})})},FormEdit(e){this.$router.push({name:"proposalap.edit",params:{id:e.id}})},FormDelete(e){this.item={...e},this.deleteFormDialog=!0},Destroy(e){b.destroy(e.id).then(s=>{this.$toast.add({severity:"success",summary:"Success",detail:s.data.message,life:3e3}),this.getData()}).catch(s=>{this.$toast.add({severity:"error",summary:"Failed",detail:s.response.data.message,life:3e3})}).finally(()=>{this.deleteFormDialog=!1,this.item=null})},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:V.CONTAINS}}}}},I={class:"grid crud-demo"},M={class:"col-12"},U={class:"card"},R={class:"my-2"},O={class:"card"},j=o("h5",{class:"mbe-4"},"Pencarian Proposal",-1),z={class:"p-fluid formgrid grid"},$={class:"field col-2"},q={class:"p-float-label"},K=o("p",{class:"mb-1"},"Periode Awal",-1),Y={class:"field col-2"},G={class:"p-float-label"},H=o("p",{class:"mb-1"},"Periode Akhir",-1),J={class:"field col-auto",style:{display:"flex","align-items":"flex-end","align-content":"flex-end"}},Q={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},W=o("h5",{class:"m-0"},"Management Payment Proposal",-1),X={class:"block mt-2 md:mt-0 p-input-icon-left"},Z=o("i",{class:"pi pi-search"},null,-1),ee={key:0},te={key:1},oe={key:2},se={key:3,class:"text-right"},le={key:4},ae={class:"flex align-items-center justify-content-center"},ne=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ie={key:0};function re(e,s,de,ce,a,h){const v=n("Toast"),p=n("Button"),k=n("router-link"),P=n("MyExport"),C=n("Toolbar"),g=n("Calendar"),D=n("InputText"),F=n("Tag"),f=n("Column"),w=n("DataTable"),T=n("Dialog");return r(),c("div",I,[o("div",M,[o("div",U,[l(v),l(C,{class:"mb-4"},{start:d(()=>[o("div",R,[l(k,{to:"/finance/ap/proposal/create",class:"btn btn-added me-2"},{default:d(()=>[l(p,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})])]),end:d(()=>[l(P,{value:e.filteredItems,selectedColumns:a.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),o("div",O,[j,o("div",z,[o("div",$,[o("span",q,[K,l(g,{dateFormat:"dd-mm-yy",modelValue:a.periodeawal,"onUpdate:modelValue":s[0]||(s[0]=t=>a.periodeawal=t),inputId:"periodeawal"},null,8,["modelValue"])])]),o("div",Y,[o("span",G,[H,l(g,{dateFormat:"dd-mm-yy",modelValue:a.periodeakhir,"onUpdate:modelValue":s[1]||(s[1]=t=>a.periodeakhir=t),inputId:"periodeakhir"},null,8,["modelValue"])])]),o("div",J,[l(p,{label:"Search"})])])]),l(w,{ref:"dt",value:a.lProposalAP,selection:a.selectedProposalAp,"onUpdate:selection":s[3]||(s[3]=t=>a.selectedProposalAp=t),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll",tableStyle:"table-layout:auto"},{header:d(()=>[o("div",Q,[W,o("span",X,[Z,l(D,{modelValue:e.filters.global.value,"onUpdate:modelValue":s[2]||(s[2]=t=>e.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),default:d(()=>[(r(!0),c(N,null,A(a.selectedColumns,(t,_)=>(r(),L(f,{field:t.field,header:t.header,class:B(t.class),key:t.field+"_"+_,sortable:!0},{body:d(({data:m,field:i})=>[i=="icon"?(r(),c("div",ee,[l(p,{icon:m[i],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):i=="status"?(r(),c("div",te,[l(F,{value:e.$h.getLabel(m[i]),severity:e.$h.getLabel(m[i])},null,8,["value","severity"])])):i=="tanggal"?(r(),c("div",oe,u(e.$h.formatDate(m[i])),1)):t.type=="currency"?(r(),c("div",se,u(e.$h.formatNumber(m[i])),1)):(r(),c("div",le,u(m[i]),1))]),_:2},1032,["field","header","class"]))),128)),l(f,null,{body:d(t=>[l(p,{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning mr-2",onClick:_=>h.FormEdit(t.data)},null,8,["onClick"]),l(p,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:_=>h.FormDelete(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),l(T,{visible:a.deleteFormDialog,"onUpdate:visible":s[6]||(s[6]=t=>a.deleteFormDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[l(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[4]||(s[4]=t=>a.deleteFormDialog=!1)}),l(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:s[5]||(s[5]=t=>h.Destroy(e.item))})]),default:d(()=>[o("div",ae,[ne,e.item?(r(),c("span",ie,[y("Are you sure you want to delete "),o("b",null,u(e.item.nomor),1),y("?")])):S("",!0)])]),_:1},8,["visible"])])])])}const ue=x(E,[["render",re]]);export{ue as default};
