import{_ as V,F as L,r as a,o as d,c as g,b as l,d as o,e as r,l as c,t as _,m as P,q as M,n as C,f as N,k as B}from"./index-11eb6111.js";import{a as u}from"./api-32d028ca.js";import{A}from"./index-b9e295bc.js";import"./custom-zod-e9521e5d.js";import{z as y}from"./index-0ec66d4d.js";const R=y.object({tipe:y.string().min(1).max(255)}),U={data(){return{lItem:[],item:{tipe:null},selectedItem:null,filters:{},selectedColumns:[{field:"tipe",header:"Tipe",class:"w-20rem"}],Columns:[{field:"tipe",header:"Tipe",class:"w-20rem"}],isClean:!0,isEdit:!1,formDialog:!1,deleteFormDialog:!1}},created(){this.initFilters()},mounted(){this.getData()},computed:{FormError(){var e,t;return!this.isClean&&((t=(e=R.safeParse(this.item))==null?void 0:e.error)==null?void 0:t.format())||{}}},methods:{async getData(){await u.index().then(e=>{this.lItem=e.data.data})},async Save(){try{if(this.$isLoading.value=!0,this.isClean=!1,Object.keys(this.FormError).length>0)return;this.isEdit?await u.update(this.item.id,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lItem[this.lItem.findIndex(t=>t.id===this.item.id)]=this.item,this.formDialog=!1}):await u.store(this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lItem.push(e.data.data),this.formDialog=!1})}catch(e){console.log(e),e instanceof y.ZodError?this.FormError=e.format():e instanceof A&&this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}finally{this.$timeoutLoading()}},async Destroy(e){this.lItem=this.lItem.filter(t=>t.id!==e.id),await u.destroy(e.id).then(t=>{this.$toast.add({severity:"success",summary:"Successful",detail:t.data.message,life:3e3}),this.getData(),this.deleteFormDialog=!1})},initFilters(){this.filters={global:{value:null,matchMode:L.CONTAINS}}},exportCSV(){this.$refs.dt.exportCSV()},FormNew(){this.item={},this.FormError={},this.formDialog=!0,this.isClean=!0},FormEdit(e){this.FormError={},this.item={...e},this.formDialog=!0,this.isEdit=!0,this.isClean=!0},confirmDelete(e){this.item={...e},this.deleteFormDialog=!0},HideDialog(){this.formDialog=!1}}},j={class:"grid crud-demo"},O={class:"col-12"},q={class:"card"},z={class:"my-2"},H={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},G=l("h5",{class:"m-0"},"Daftar Tipe Hari Libur",-1),K={class:"block mt-2 md:mt-0 p-input-icon-left"},Y=l("i",{class:"pi pi-search"},null,-1),Z=l("div",{class:"text-center"},"Empty",-1),J={class:"formgrid grid"},Q={class:"field col-12"},W={class:"flex align-items-center justify-content-center"},X=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),$={key:0};function ee(e,t,te,se,i,n){const x=a("Toast"),m=a("Button"),D=a("MyExport"),w=a("Toolbar"),F=a("MultiSelect"),v=a("InputText"),p=a("Column"),k=a("ActionButton"),E=a("DataTable"),S=a("Label"),I=a("ErrorMsg"),b=a("Dialog");return d(),g("div",j,[l("div",O,[l("div",q,[o(x),o(w,{class:"mb-4"},{start:r(()=>[l("div",z,[o(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.FormNew},null,8,["onClick"])])]),end:r(()=>[o(D,{value:i.lItem,selectedColumns:i.selectedColumns,title:"Export Item"},null,8,["value","selectedColumns"])]),_:1}),o(E,{ref:"dt",value:i.lItem,dataKey:"id",paginator:!0,rows:10,filters:i.filters,rowGroupMode:"rowspan",groupRowsBy:"id",sortMode:"single",sortField:"id",sortOrder:1,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{header:r(()=>[l("div",H,[G,o(F,{modelValue:i.selectedColumns,"onUpdate:modelValue":t[0]||(t[0]=s=>i.selectedColumns=s),options:i.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),l("span",K,[Y,o(v,{modelValue:i.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.filters.global.value=s),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:r(()=>[Z]),default:r(()=>[o(p,{header:"#",headerStyle:"width:10px"},{body:r(s=>[c(_(s.index+1),1)]),_:1}),(d(!0),g(P,null,M(i.selectedColumns,(s,f)=>(d(),B(p,{field:s.field,header:s.header,class:C(s.class),key:s.field+"_"+f,sortable:!0},{body:r(({data:h,field:T})=>[l("div",null,_(h[T]),1)]),_:2},1032,["field","header","class"]))),128)),o(p,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:r(({data:s,index:f})=>[o(k,{data:s,index:f,onEdit:h=>n.FormEdit(s),onDelete:h=>n.confirmDelete(s)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","filters"]),o(b,{visible:i.formDialog,"onUpdate:visible":t[3]||(t[3]=s=>i.formDialog=s),style:{width:"450px"},header:"Form Item",modal:!0,class:"p-fluid"},{footer:r(()=>[o(m,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.HideDialog},null,8,["onClick"]),o(m,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:n.Save},null,8,["onClick"])]),default:r(()=>[l("div",J,[l("div",Q,[o(S,{required:"",for:"item"},{default:r(()=>[c("Nama")]),_:1}),o(v,{id:"item",modelValue:i.item.tipe,"onUpdate:modelValue":t[2]||(t[2]=s=>i.item.tipe=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:C(n.FormError.tipe&&"p-invalid")},null,8,["modelValue","class"]),o(I,{error:n.FormError.tipe},null,8,["error"])])])]),_:1},8,["visible"]),o(b,{visible:i.deleteFormDialog,"onUpdate:visible":t[6]||(t[6]=s=>i.deleteFormDialog=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[o(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[4]||(t[4]=s=>i.deleteFormDialog=!1)}),o(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:t[5]||(t[5]=s=>n.Destroy(i.item))})]),default:r(()=>[l("div",W,[X,i.item?(d(),g("span",$,[c("Are you sure you want to delete "),l("b",null,_(i.item.tipe),1),c("?")])):N("",!0)])]),_:1},8,["visible"])])])])}const ne=V(U,[["render",ee]]);export{ne as default};
