import{_ as F,J as h,F as L,r as n,o as y,c as b,b as a,d as t,e as o,l as c,t as k,w as N,n as D,f as V,p as M,g as O}from"./index-11eb6111.js";import{A as B}from"./index-b9e295bc.js";import{z as p}from"./index-0ec66d4d.js";const A=p.object({top:p.number().nullable(),keterangan:p.string().min(1).max(50)}),K={data(){return{lItem:[],item:{top:null,keterangan:null},itemDialog:!1,deleteItemDialog:!1,selectedColumns:[{header:"TOP",field:"top",class:"w-20rem"},{header:"Keterangan",field:"keterangan",class:"w-20rem"}],Columns:[{header:"TOP",field:"top",class:"w-20rem"},{header:"Keterangan",field:"keterangan",class:"w-20rem"}],isEdit:!1,isClean:!0,filters:{}}},created(){this.initFilters()},mounted(){this.$isLoading.value=!0,this.getData().finally(()=>{this.$timeoutLoading()})},computed:{FormError(){var e,s;return this.isClean?{}:((s=(e=A.safeParse(this.item))==null?void 0:e.error)==null?void 0:s.format())||{}}},methods:{async getData(){await h.index().then(e=>{this.lItem=e.data.data}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})})},HideDialog(){this.itemDialog=!1,this.isSubmitted=!1},async Save(){try{if(this.isClean=!1,this.$isLoading.value=!0,Object.keys(this.FormError).length>0)return;this.isEdit?await h.update(this.item.id,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lItem[this.lItem.findIndex(s=>s.id===e.data.data.id)]=this.item,this.itemDialog=!1}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}):await h.store(this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lItem.push(e.data.data),this.itemDialog=!1}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}),this.isClean=!1}catch(e){e&&(e instanceof p.ZodError?this.FormError=e.format():e instanceof B&&this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})),console.log(e)}finally{this.$timeoutLoading()}},FormNew(){this.item={},this.isClean=!0,this.isEdit=!1,this.itemDialog=!0},FormEdit(e){this.item={...e},this.itemDialog=!0,this.isEdit=!0},confirmDelete(e){this.item=e,this.deleteItemDialog=!0},async Destroy(){this.deleteItemDialog=!1,await h.destroy(this.item.id).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lItem=this.lItem.filter(s=>s.id!==this.item.id)}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}).finally(()=>{this.getData()})},initFilters(){this.filters={global:{value:null,matchMode:L.CONTAINS}}}}},d=e=>(M("data-v-c91f7441"),e=e(),O(),e),U={class:"grid crud-demo"},j={class:"col-12"},R={class:"card"},z={class:"my-2"},H={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},J=d(()=>a("h5",{class:"m-0"},"Manage TOP",-1)),Y={class:"block mt-2 md:mt-0 p-input-icon-left"},Z=d(()=>a("i",{class:"pi pi-search"},null,-1)),q=d(()=>a("hr",null,null,-1)),G=d(()=>a("div",{class:"text-center"},"Item is Empty",-1)),Q=d(()=>a("hr",null,null,-1)),W={class:"field"},X={class:"field"},$={class:"flex align-items-center justify-content-center"},ee=d(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),te={key:0};function se(e,s,ie,le,l,r){const w=n("Toast"),m=n("Button"),x=n("MyExport"),C=n("Toolbar"),f=n("InputText"),u=n("Column"),E=n("ActionButton"),I=n("DataTable"),g=n("Label"),S=n("InputNumber"),_=n("ErrorMsg"),v=n("Dialog");return y(),b("div",U,[a("div",j,[a("div",R,[t(w),t(C,{class:"mb-4"},{start:o(()=>[a("div",z,[t(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:r.FormNew},null,8,["onClick"])])]),end:o(()=>[t(x,{value:l.lItem,selectedColumns:l.selectedColumns,title:"Export Item"},null,8,["value","selectedColumns"])]),_:1}),t(I,{ref:"dt",value:l.lItem,dataKey:"id",paginator:!0,rows:10,filters:l.filters,sortMode:"single",sortField:"item",sortOrder:1,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Item",responsiveLayout:"scroll"},{header:o(()=>[a("div",H,[J,a("span",Y,[Z,t(f,{modelValue:l.filters.global.value,"onUpdate:modelValue":s[0]||(s[0]=i=>l.filters.global.value=i),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:o(()=>[q,G,Q]),default:o(()=>[t(u,{header:"#",headerStyle:"width:5%"},{body:o(i=>[c(k(i.index+1),1)]),_:1}),t(u,{header:"TOP",field:"top",headerStyle:"width:35%"}),t(u,{header:"Keterangan",field:"keterangan",headerStyle:"width:50%"}),t(u,{header:"Aksi",headerStyle:"width:10%"},{body:o(({data:i,index:P})=>[t(E,{data:i,index:P,onEdit:T=>r.FormEdit(i),onDelete:T=>r.confirmDelete(i)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","filters"]),t(v,{visible:l.itemDialog,"onUpdate:visible":s[4]||(s[4]=i=>l.itemDialog=i),style:{width:"450px"},header:"TOP",modal:!0,class:"p-fluid"},{footer:o(()=>[t(m,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:r.HideDialog},null,8,["onClick"]),t(m,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:r.Save,loading:e.$isLoading.value,disabled:e.$isLoading.value},null,8,["onClick","loading","disabled"])]),default:o(()=>[a("form",{onSubmit:s[3]||(s[3]=N((...i)=>r.Save&&r.Save(...i),["prevent"]))},[a("div",W,[t(g,{for:"item"},{default:o(()=>[c("TOP")]),_:1}),t(S,{id:"item",modelValue:l.item.top,"onUpdate:modelValue":s[1]||(s[1]=i=>l.item.top=i),placeholder:"0",autofocus:"",class:D(r.FormError.top&&"p-invalid"),min:0},null,8,["modelValue","class"]),t(_,{error:r.FormError.top},null,8,["error"])]),a("div",X,[t(g,{for:"keterangan"},{default:o(()=>[c("Keterangan")]),_:1}),t(f,{id:"keterangan",modelValue:l.item.keterangan,"onUpdate:modelValue":s[2]||(s[2]=i=>l.item.keterangan=i),placeholder:"Net 30",class:D(r.FormError.keterangan&&"p-invalid")},null,8,["modelValue","class"]),t(_,{error:r.FormError.keterangan},null,8,["error"])])],32)]),_:1},8,["visible"]),t(v,{visible:l.deleteItemDialog,"onUpdate:visible":s[6]||(s[6]=i=>l.deleteItemDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[t(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[5]||(s[5]=i=>l.deleteItemDialog=!1)}),t(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:r.Destroy},null,8,["onClick"])]),default:o(()=>[a("div",$,[ee,l.item?(y(),b("span",te,[c("Are you sure you want to delete "),a("b",null,k(l.item.item),1),c("?")])):V("",!0)])]),_:1},8,["visible"])])])])}const ne=F(K,[["render",se],["__scopeId","data-v-c91f7441"]]);export{ne as default};
