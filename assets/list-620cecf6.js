import{_ as V,$ as B,F as G,r as i,o as d,c as h,b as l,d as o,e as n,n as u,k as f,l as p,t as g,m as L,q as P}from"./index-11eb6111.js";import{a as F}from"./produk-90d88791.js";import{a as T}from"./kategoriproduk-68d52205.js";const N={data(){return{items:[],selectedColumns:[{field:"nama_barang",header:"Nama Barang",class:"text-left"},{field:"satuan",header:"Satuan",class:"text-left"},{field:"kategori_barang",header:"Kategori Barang",class:"text-left"},{field:"stok",header:"Stok",class:"text-left"}],Columns:[{field:"nama_barang",header:"Nama Barang",class:"text-left"},{field:"satuan",header:"Satuan",class:"text-left"},{field:"kategori_barang",header:"Kategori Barang",class:"text-left"},{field:"stok",header:"Stok",class:"text-left"}],lKategori:[],selectedKategori:null,lGudang:[],selectedGudang:null,filter:!1,filters:{},f:{id_gudang:null,id_kategori:null}}},created(){this.initFilters()},computed:{filteredlItems:function(){return this.items.filter(e=>(this.selectedKategori==null?!0:e.id_kategori==this.selectedKategori.id)&&(this.selectedGudang==null?!0:e.id_gudang==this.selectedGudang.id))}},mounted(){this.getData()},methods:{ubahKategori(e){e.value===null?this.f.id_kategori=null:this.f.id_kategori=this.selectedKategori.id,this.getReport()},ubahGudang(e){e.value===null?this.f.id_gudang=null:this.f.id_gudang=this.selectedGudang.id,this.getReport()},async getData(){this.loading=!0,await T.index().then(e=>{this.lKategori=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Kategori Barang",life:3e3})}).finally(()=>{this.loading=!1}),await B.index().then(e=>{this.lGudang=e.data.data,e.data.data.length==1&&(this.selectedGudang=e.data.data[0])}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Gudang",life:3e3})}).finally(()=>{this.loading=!1}),this.getReport()},async getReport(){await F.getWithStok(this.f).then(e=>{this.items=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Barang",life:3e3})}).finally(()=>{this.loading=!1})},selectKontak(e){this.id_customer=e.value.id,this.customer=e.value.text},formatNumber(e){if(e)return e.toLocaleString("en-US",{style:"currency",currency:"USD"})},exportCSV(){this.$refs.dt.exportCSV()},showHideFilter(){this.filter=!this.filter},initFilters(){this.filters={global:{value:null,matchMode:G.CONTAINS}}}},components:{}},D={class:"grid crud-demo"},I={class:"col-12"},R={class:"card"},M={class:"my-2"},U=l("h5",{class:"mbe-4"},"Filter Barang",-1),E={class:"p-fluid formgrid grid"},j={class:"field col-2 d-flex justifiy-content-center align-items-end"},O=l("label",{for:"kategori",class:"mb-1"},"Kategori",-1),H={class:"field col-2 d-flex justifiy-content-center align-items-end"},q=l("label",{for:"gudang",class:"mb-1"},"Gudang",-1),z={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},A=l("h5",{class:"m-0"},"Penerimaan Barang",-1),W={class:"flex gap-2 col-12 md:col-5"},J={class:"block p-input-icon-left w-full"},Q=l("i",{class:"pi pi-search"},null,-1);function X(e,s,Y,Z,a,r){const _=i("Toast"),b=i("Button"),k=i("MyExport"),y=i("Toolbar"),m=i("Dropdown"),x=i("InputText"),C=i("MultiSelect"),c=i("Column"),v=i("DataTable");return d(),h("div",D,[l("div",I,[l("div",R,[o(_),o(y,{class:"mb-4"},{start:n(()=>[l("div",M,[o(b,{icon:"pi pi-filter",label:"Filter",class:u(["p-button mx-2",{"p-button-block":a.filter,"p-button-outlined":!a.filter}]),onClick:r.showHideFilter},null,8,["onClick","class"])])]),end:n(()=>[o(k,{value:e.filteredItems,selectedColumns:a.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),l("div",{class:u(["card",{hidden:!a.filter}])},[U,l("div",E,[l("div",j,[O,o(m,{id:"kategori",modelValue:a.selectedKategori,"onUpdate:modelValue":s[0]||(s[0]=t=>a.selectedKategori=t),onChange:r.ubahKategori,options:a.lKategori,placeholder:"Kategori",optionLabel:"kategori_barang",showClear:""},null,8,["modelValue","onChange","options"])]),l("div",H,[q,o(m,{id:"gudang",modelValue:a.selectedGudang,"onUpdate:modelValue":s[1]||(s[1]=t=>a.selectedGudang=t),onChange:r.ubahGudang,options:a.lGudang,placeholder:"Gudang",optionLabel:"gudang",showClear:""},null,8,["modelValue","onChange","options"])])])],2),o(v,{ref:"dt",value:r.filteredlItems,selection:e.selectedItem,"onUpdate:selection":s[4]||(s[4]=t=>e.selectedItem=t),dataKey:"id",paginator:!0,rows:10,filters:a.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Barang",responsiveLayout:"scroll"},{header:n(()=>[l("div",z,[A,l("div",W,[l("span",J,[Q,o(x,{modelValue:a.filters.global.value,"onUpdate:modelValue":s[2]||(s[2]=t=>a.filters.global.value=t),placeholder:"Search...",class:"w-full"},null,8,["modelValue"])]),o(C,{modelValue:a.selectedColumns,"onUpdate:modelValue":s[3]||(s[3]=t=>a.selectedColumns=t),options:a.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-3rem"},null,8,["modelValue","options"])])])]),default:n(()=>[(d(),f(c,{field:"no",header:"No",sortable:!1,headerStyle:"width:4%; min-width:3rem;",key:"no"},{body:n(t=>[p(g(t.index+1),1)]),_:1})),o(c,{field:"kode_barang",header:"Part Number",sortable:!0,headerStyle:"width:14%; min-width:10rem;",key:"kode_barang"},{body:n(t=>[p(g(t.data.kode_barang),1)]),_:1}),(d(!0),h(L,null,P(a.selectedColumns,(t,w)=>(d(),f(c,{field:t.field,header:t.header,class:u(t.class),key:t.field+"_"+w,sortable:!0},{body:n(({data:K,field:S})=>[l("div",null,g(K[S]),1)]),_:2},1032,["field","header","class"]))),128))]),_:1},8,["value","selection","filters"])])])])}const ae=V(N,[["render",X]]);export{ae as default};
