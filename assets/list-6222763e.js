import{_ as V,z as x,F as O,r as d,o as i,c as u,b as a,d as n,e as m,f as F,n as S,l as N,t as f,m as G,q as I,k as R}from"./index-11eb6111.js";import{a as B}from"./index-fa5c02f8.js";import{a as C}from"./options-b2eb7ae6.js";import{a as b}from"./xlsx.min-b21a3818.js";const A={data(){return{lItem:[],filter:!1,filters:{},f:{awal:null,akhir:null,selectedSupplier:null,selectedGudang:null},columns:[{field:"kode_barang",header:"Kode Barang"},{field:"nama_barang",header:"Nama Barang"},{field:"po_date",header:"Tanggal PO",type:"date"},{field:"po_number",header:"Nomor PO"},{field:"diorder",header:"Di Order",type:"number"},{field:"diambil",header:"Di Terima",type:"number"},{field:"sisa",header:"Sisa",type:"number"},{field:"satuan",header:"Satuan"},{field:"gudang",header:"Gudang"},{field:"supplier",header:"Supplier"}]}},created(){this.initFilters()},mounted(){this.getData()},computed:{filteredItems:function(){return this.lItem.filter(e=>(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(e.tanggal).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(e.tanggal).toLocaleDateString())&&(this.f.selectedSupplier?this.f.selectedSupplier.id==e.id_supplier:!0)&&(this.f.selectedGudang?this.f.selectedGudang.id==e.id_gudang:!0))}},methods:{async getData(){await C.getKontakSupplier().then(e=>{this.lSupplier=e.data.data}),await C.getGudang().then(e=>{this.lGudang=e.data.data})},async getReport(){await B.outstandingPO().then(e=>{this.lItem=e.data.data})},showHideFilter(){this.filter=!this.filter},clearFilter(){this.f={awal:null,akhir:null,selectedSupplier:null,selectedGudang:null}},exportToXLSX(){var e=document.querySelector("table"),o=e.cloneNode(!0),w=o.querySelector("thead tr").childElementCount,g=document.createElement("th");g.setAttribute("colspan",w),g.textContent="Outstanding PO";var t=document.createElement("tr");t.append(g);var s=o.querySelector("thead");s.insertBefore(t,s.childNodes[0]);const h=b.utils.table_to_sheet(o),p=[{width:15},{wch:25},{width:15},{width:13},{width:13},{width:20},{width:20},{width:20},{width:20},{width:14},{width:15},{width:15}];h["!cols"]=p,h.A1.s={font:{name:"Arial Black",sz:12,bold:!0},alignment:{vertical:"center",horizontal:"center"}};const _=b.utils.book_new();b.utils.book_append_sheet(_,h,"Sheet1"),b.writeFile(_,`Outstanding PO ${x().tz("Asia/Makassar").format("DD-MM-YYYY")}.xlsx`)},initFilters(){this.filters={global:{value:null,matchMode:O.CONTAINS}}}}},E={class:"grid crud-demo"},M={class:"col-12"},U={class:"card"},z={class:"my-2"},q={key:0,class:"m-2"},H=a("h5",{class:"mbe-4"},"Pencarian Outstanding PO",-1),X={class:"p-fluid formgrid grid"},Y={class:"field col-2"},j={class:"p-float-label"},K=a("p",{class:"mb-1"},"Periode Awal",-1),J={class:"field col-2"},Q={class:"p-float-label"},W=a("p",{class:"mb-1"},"Periode Akhir",-1),Z={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},$=a("label",{for:"supplier",class:"mb-1"},"Supplier",-1),ee={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},te=a("label",{for:"gudang",class:"mb-1"},"Gudang",-1),le={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ae=a("h5",{class:"m-0"},"Laporan Outstanding PO",-1),oe={class:"block mt-2 md:mt-0 p-input-icon-left"},ne=a("i",{class:"pi pi-search"},null,-1),se={key:0},ie={key:1},re={key:2},de={key:3},ue={key:4},ce={key:5};function pe(e,o,w,g,t,s){const h=d("Toast"),p=d("Button"),_=d("Toolbar"),k=d("Calendar"),y=d("Dropdown"),D=d("InputText"),v=d("Column"),P=d("Tag"),T=d("DataTable");return i(),u("div",E,[a("div",M,[a("div",U,[n(h),n(_,{class:"mb-4"},{start:m(()=>[a("div",z,[n(p,{icon:"pi pi-filter",label:"Filter",onClick:s.showHideFilter},null,8,["onClick"])]),t.f.awal||t.f.akhir||t.f.selectedGudang||t.f.selectedSupplier?(i(),u("div",q,[n(p,{icon:"pi pi-times",label:"Clear",severity:"danger",outlined:"",onClick:s.clearFilter},null,8,["onClick"])])):F("",!0)]),end:m(()=>[n(p,{label:"Export",icon:"pi pi-upload",severity:"help",onClick:s.exportToXLSX},null,8,["onClick"])]),_:1}),a("div",{class:S(["card fadein",{hidden:!t.filter}])},[H,a("div",X,[a("div",Y,[a("span",j,[K,n(k,{dateFormat:"dd-mm-yy",onDateSelect:s.getReport,modelValue:t.f.awal,"onUpdate:modelValue":o[0]||(o[0]=l=>t.f.awal=l),inputId:"f.awal",maxDate:t.f.akhir},null,8,["onDateSelect","modelValue","maxDate"])])]),a("div",J,[a("span",Q,[W,n(k,{dateFormat:"dd-mm-yy",onDateSelect:s.getReport,modelValue:t.f.akhir,"onUpdate:modelValue":o[1]||(o[1]=l=>t.f.akhir=l),inputId:"f.akhir",minDate:t.f.awal},null,8,["onDateSelect","modelValue","minDate"])])]),a("div",Z,[$,n(y,{id:"supplier",modelValue:t.f.selectedSupplier,"onUpdate:modelValue":o[2]||(o[2]=l=>t.f.selectedSupplier=l),onChange:s.getReport,options:e.lSupplier,optionLabel:"kontak",placeholder:"Supplier",showClear:""},null,8,["modelValue","onChange","options"])]),a("div",ee,[te,n(y,{id:"gudang",modelValue:t.f.selectedGudang,"onUpdate:modelValue":o[3]||(o[3]=l=>t.f.selectedGudang=l),onChange:s.getReport,options:e.lGudang,optionLabel:"gudang",placeholder:"Gudang",showClear:""},null,8,["modelValue","onChange","options"])])])],2),n(T,{ref:"dt",value:s.filteredItems,selection:e.selectedItem,"onUpdate:selection":o[5]||(o[5]=l=>e.selectedItem=l),dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Entries",filters:t.filters,responsiveLayout:"scroll"},{header:m(()=>[a("div",le,[ae,a("span",oe,[ne,n(D,{modelValue:t.filters.global.value,"onUpdate:modelValue":o[4]||(o[4]=l=>t.filters.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:m(()=>[n(v,{header:"No.",headerStyle:"width:10px"},{body:m(l=>[N(f(l.index+1),1)]),_:1}),(i(!0),u(G,null,I(t.columns,(l,L)=>(i(),R(v,{field:l.field,header:l.header,class:S(l.class),key:l.field+"_"+L,sortable:!0},{body:m(({data:c,field:r})=>[r=="icon"?(i(),u("div",se,[n(p,{icon:c[r],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):r=="status"?(i(),u("div",ie,[n(P,{value:e.$h.getLabel(c[r]),severity:e.$h.getLabel(c[r])},null,8,["value","severity"])])):l.type=="date"?(i(),u("div",re,f(e.$h.formatDate(c[r])),1)):l.type=="number"?(i(),u("div",de,f(e.$h.formatNumber(c[r])),1)):l.type=="currency"?(i(),u("div",ue,f(e.$h.formatNumber(c[r])),1)):(i(),u("div",ce,f(c[r]),1))]),_:2},1032,["field","header","class"]))),128))]),_:1},8,["value","selection","filters"])])])])}const _e=V(A,[["render",pe]]);export{_e as default};
