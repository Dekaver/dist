import{A as S}from"./index-b9e295bc.js";import{_ as T,F as M,r as n,o as m,c,b as o,d as l,e as r,l as d,t as b,m as j,q as P,n as f,f as A,k as B}from"./index-11eb6111.js";import"./custom-zod-e9521e5d.js";import{a as v}from"./absentempat-5495884d.js";import{z as y}from"./index-0ec66d4d.js";const q=y.object({nama:y.string().min(1).max(255),jarak_absen:y.number()}),U={data(){return{lItem:[],item:{nama:null,latitude:null,longitude:null,jarak_absen:null},selectedItem:null,filters:{},selectedColumns:[{field:"nama",header:"Nama Tempat",class:"w-20rem"},{field:"latitude",header:"Latitude",class:"w-20rem"},{field:"longitude",header:"Longitude",class:"w-20rem"},{field:"jarak_absen",header:"Jarak Absen",class:"w-20rem"}],Columns:[{field:"nama",header:"Nama Tempat",class:"w-20rem"},{field:"latitude",header:"Latitude",class:"w-20rem"},{field:"longitude",header:"Longitude",class:"w-20rem"},{field:"jarak_absen",header:"Jarak Absen",class:"w-20rem"}],isClean:!0,isEdit:!1,formDialog:!1,deleteFormDialog:!1}},created(){this.initFilters()},mounted(){this.getData()},computed:{FormError(){var i,e;return!this.isClean&&((e=(i=q.safeParse(this.item))==null?void 0:i.error)==null?void 0:e.format())||{}}},methods:{async getData(){await v.index().then(i=>{this.lItem=i.data.data})},async Save(){try{if(this.$isLoading.value=!0,this.isClean=!1,Object.keys(this.FormError).length>0)return;this.isEdit?await v.update(this.item.id,{...this.item,latitude:Number(this.item.latitude),longitude:Number(this.item.longitude)}).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lItem[this.lItem.findIndex(e=>e.id===this.item.id)]=this.item,this.formDialog=!1}):await v.store({...this.item,latitude:Number(this.item.latitude),longitude:Number(this.item.longitude)}).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lItem.push(i.data.data),this.formDialog=!1})}catch(i){console.log(i),i instanceof y.ZodError?this.FormError=i.format():i instanceof S&&this.$toast.add({severity:"error",summary:"Failed",detail:i.response.data.message,life:3e3})}finally{this.$timeoutLoading()}},async Destroy(i){this.lItem=this.lItem.filter(e=>e.id!==i.id),await v.destroy(i.id).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.getData(),this.deleteFormDialog=!1})},initFilters(){this.filters={global:{value:null,matchMode:M.CONTAINS}}},exportCSV(){this.$refs.dt.exportCSV()},FormNew(){this.item={},this.FormError={},this.formDialog=!0,this.isClean=!0},FormEdit(i){this.FormError={},this.item={...i},this.formDialog=!0,this.isEdit=!0,this.isClean=!0},confirmDelete(i){this.item={...i},this.deleteFormDialog=!0},HideDialog(){this.formDialog=!1}}},R={class:"grid crud-demo"},O={class:"col-12"},z={class:"card"},J={class:"my-2"},H={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},G=o("h5",{class:"m-0"},"Daftar Tempat Absen",-1),K={class:"block mt-2 ml-2 md:mt-0 p-input-icon-left"},Y=o("i",{class:"pi pi-search"},null,-1),Z=o("div",{class:"text-center"},"Empty",-1),Q={key:0},W={key:1},X={class:"formgrid grid"},$={class:"field col-12"},ee={class:"field col-12"},te={class:"field col-12"},le={class:"field col-4"},se=o("div",{class:"field col-4 md:col-1 align-self-center mt-4"},[o("span",{class:"font-bold"},"Meter")],-1),ie={class:"flex align-items-center justify-content-center"},oe=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),re={key:0};function ae(i,e,ne,de,s,a){const D=n("Toast"),u=n("Button"),F=n("MyExport"),E=n("Toolbar"),V=n("MultiSelect"),p=n("InputText"),k=n("Column"),N=n("ActionButton"),L=n("DataTable"),h=n("Label"),_=n("ErrorMsg"),I=n("InputNumber"),x=n("Dialog");return m(),c("div",R,[o("div",O,[o("div",z,[l(D),l(E,{class:"mb-4"},{start:r(()=>[o("div",J,[l(u,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:a.FormNew},null,8,["onClick"])])]),end:r(()=>[l(F,{value:s.lItem,selectedColumns:s.selectedColumns,title:"Export Item"},null,8,["value","selectedColumns"])]),_:1}),l(L,{ref:"dt",value:s.lItem,dataKey:"id",paginator:!0,rows:10,filters:s.filters,rowGroupMode:"rowspan",groupRowsBy:"id",sortMode:"single",sortField:"id",sortOrder:1,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{header:r(()=>[o("div",H,[G,l(V,{modelValue:s.selectedColumns,"onUpdate:modelValue":e[0]||(e[0]=t=>s.selectedColumns=t),options:s.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),o("span",K,[Y,l(p,{modelValue:s.filters.global.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:r(()=>[Z]),default:r(()=>[l(k,{header:"#",headerStyle:"width:10px"},{body:r(t=>[d(b(t.index+1),1)]),_:1}),(m(!0),c(j,null,P(s.selectedColumns,(t,C)=>(m(),B(k,{field:t.field,header:t.header,class:f(t.class),key:t.field+"_"+C,sortable:!0},{body:r(({data:g,field:w})=>[w=="jarak_absen"?(m(),c("div",Q,b(g[w])+" (m)",1)):(m(),c("div",W,b(g[w]),1))]),_:2},1032,["field","header","class"]))),128)),l(k,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:r(({data:t,index:C})=>[l(N,{data:t,index:C,onEdit:g=>a.FormEdit(t),onDelete:g=>a.confirmDelete(t)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","filters"]),l(x,{visible:s.formDialog,"onUpdate:visible":e[6]||(e[6]=t=>s.formDialog=t),style:{width:"450px"},header:"Form Item",modal:!0,class:"p-fluid"},{footer:r(()=>[l(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:a.HideDialog},null,8,["onClick"]),l(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:a.Save},null,8,["onClick"])]),default:r(()=>[o("div",X,[o("div",$,[l(h,{required:"",for:"item"},{default:r(()=>[d("Nama")]),_:1}),l(p,{id:"item",modelValue:s.item.nama,"onUpdate:modelValue":e[2]||(e[2]=t=>s.item.nama=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f(a.FormError.nama&&"p-invalid")},null,8,["modelValue","class"]),l(_,{error:a.FormError.nama},null,8,["error"])]),o("div",ee,[l(h,{required:"",for:"item"},{default:r(()=>[d("Latitude")]),_:1}),l(p,{id:"item",modelValue:s.item.latitude,"onUpdate:modelValue":e[3]||(e[3]=t=>s.item.latitude=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f(a.FormError.latitude&&"p-invalid"),type:"number"},null,8,["modelValue","class"]),l(_,{error:a.FormError.latitude},null,8,["error"])]),o("div",te,[l(h,{required:"",for:"item"},{default:r(()=>[d("Longitude")]),_:1}),l(p,{id:"item",modelValue:s.item.longitude,"onUpdate:modelValue":e[4]||(e[4]=t=>s.item.longitude=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f(a.FormError.longitude&&"p-invalid"),type:"number"},null,8,["modelValue","class"]),l(_,{error:a.FormError.longitude},null,8,["error"])]),o("div",le,[l(h,{required:"",for:"item"},{default:r(()=>[d("Jarak Absen")]),_:1}),l(I,{id:"item",modelValue:s.item.jarak_absen,"onUpdate:modelValue":e[5]||(e[5]=t=>s.item.jarak_absen=t),min:0,required:"true",autofocus:"",class:f(a.FormError.jarak_absen&&"p-invalid")},null,8,["modelValue","class"]),l(_,{error:a.FormError.jarak_absen},null,8,["error"])]),se])]),_:1},8,["visible"]),l(x,{visible:s.deleteFormDialog,"onUpdate:visible":e[9]||(e[9]=t=>s.deleteFormDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[l(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[7]||(e[7]=t=>s.deleteFormDialog=!1)}),l(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:e[8]||(e[8]=t=>a.Destroy(s.item))})]),default:r(()=>[o("div",ie,[oe,s.item?(m(),c("span",re,[d("Are you sure you want to delete "),o("b",null,b(s.item.nama),1),d("?")])):A("",!0)])]),_:1},8,["visible"])])])])}const he=T(U,[["render",ae]]);export{he as default};
