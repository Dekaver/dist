import{_ as E,a0 as J,F as N,r as m,o as d,c as r,b as s,d as o,e as c,t as D,m as q,q as B,f as h,n as g,l as V,k as A,p as G,g as O}from"./index-11eb6111.js";import{a as C}from"./menu-e8db35ba.js";const R={data(){return{expandableRowGroups:J(),lMenu:null,item:{icon:null,id:null,jenis:null,name:null,outcome:null,urut:null,target:null,parent:null,url:null,keterangan:null},selectedlMenu:null,filters:{},selectedColumns:[{field:"urut",header:"URUT"},{field:"name",header:"Menu"},{field:"outcome",header:"Outcome"},{field:"jenis",header:"Jenis"},{field:"icon",header:"Icon"},{field:"keterangan",header:"Keterangan"}],Columns:[{field:"urut",header:"URUT"},{field:"name",header:"Menu"},{field:"outcome",header:"Outcome"},{field:"url",header:"URL"},{field:"target",header:"Target"},{field:"jenis",header:"Jenis"},{field:"icon",header:"Icon"},{field:"keterangan",header:"Keterangan"}],lParent:[],selectedParent:null,lJenis:[{id:"D",name:"Detail"},{id:"G",name:"Group"}],selectedJenis:null,isSubmitted:!1,formDialog:!1,deleteformDialog:!1,deletelMenuDialog:!1,isEdit:!1,icons:null,filteredIcon:null,nullItem:null}},created(){this.initFilters()},mounted(){this.$isLoading.value=!0,this.nullItem={...this.item},this.getData().finally(()=>{this.getIcon(),this.$timeoutLoading()})},methods:{getIcon(){fetch("demo/data/icons.json",{headers:{"Cache-Control":"no-cache"}}).then(l=>l.json()).then(l=>{let u=l.icons.filter(n=>!n.icon.tags.includes("deprecate"));u.sort((n,e)=>n.properties.name<e.properties.name?-1:n.properties.name>e.properties.name?1:0),u=u.map(n=>`pi pi-${n.properties.name}`),this.icons=u})},async getData(){await C.index().then(l=>{this.lMenu=l.data.data,this.lParent=l.data.data.filter(t=>t.jenis=="G")}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Data Menu ",life:3e3})})},FormNew(){this.item={...this.nullItem},this.selectedJenis=null,this.selectedParent=null,this.isSubmitted=!1,this.formDialog=!0,this.isEdit=!1},FormEdit(l){this.item={...l},this.item.id_lama=this.item.id,this.isEdit=!0,this.formDialog=!0},HideDialog(){this.formDialog=!1,this.isSubmitted=!1},async saveMenu(){try{if(this.$isLoading.value=!0,this.isSubmitted=!0,this.item.name&&this.item.id&&this.item.jenis&&(this.item.jenis=="D"&&this.item.outcome||this.item.jenis=="G")&&this.item.icon)this.isEdit?await C.update(this.item.id_lama,this.item).then(l=>{this.$toast.add({severity:"success",summary:"Successful",detail:"menu Updated",life:3e3}),this.item.id=l.data.data.id,this.formDialog=!1,this.lMenu[this.findIndexById(this.item.id)]=this.item,this.item={...this.nullItem}}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Update menu ",life:3e3})}):await C.store(this.item).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"menu Created",life:3e3}),this.lMenu.push(this.item),this.item={...this.nullItem},this.formDialog=!1,this.getData()}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Create menu ",life:3e3})});else{this.$timeoutLoading();return}}catch(l){this.$toast.add({severity:"error",summary:"Failed",detail:l,life:3e3})}finally{this.$timeoutLoading()}},confirmDelete(l){this.item=l,this.deleteformDialog=!0},selectJenis(l){var t;this.item.jenis=((t=l.value)==null?void 0:t.id)||null,this.generateId()},selectParent(l){var t;this.item.parent=((t=l.value)==null?void 0:t.id)||null,this.generateId()},generateId(){if(this.item.jenis&&this.item.parent){const l=this.lMenu.filter(t=>t.parent==this.item.parent&&t.jenis==this.item.jenis);if(l[0]==null)this.item.id=parseInt(`${this.selectedParent.id}00`)+1,this.item.urut=1;else{const t=l.reduce((n,e)=>parseInt(e.id)>parseInt(n)?e.id:n,l[0].id),u=l.reduce((n,e)=>parseInt(e.urut)>parseInt(n)?e.urut:n,l[0].urut);this.item.id=parseInt(t)+1,this.item.urut=parseInt(u)+1}}else if(this.item.jenis&&!this.item.parent){const l=this.lParent.filter(u=>u.parent==null).reduce((u,n)=>n.id>u?n.id:u,this.lParent[0].id),t=this.lParent.filter(u=>u.parent==null).reduce((u,n)=>n.urut>u?n.urut:u,this.lParent[0].urut);this.item.id=parseInt(l)+100,this.item.urut=parseInt(t)+1}else this.item.jenis?(this.item.id=100,this.item.urut=1):(this.item.id=null,this.item.urut=null)},async deleteMenu(){await C.destroy(this.item.id).then(()=>{this.lMenu=this.lMenu.filter(l=>l.id!==this.item.id),this.$toast.add({severity:"success",summary:"Successful",detail:"menu Deleted",life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Deleted menu",life:3e3})}).finally(()=>{this.item={...this.nullItem}}),this.deleteformDialog=!1},findIndexById(l){for(let t=0;t<this.lMenu.length;t++)if(this.lMenu[t].id===l)return t;return-1},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deletelMenuDialog=!0},deleteSelectedlMenu(){this.lMenu=this.lMenu.filter(l=>!this.selectedlMenu.includes(l)),this.deletelMenuDialog=!1,this.selectedlMenu=null,this.$toast.add({severity:"success",summary:"Successful",detail:"lMenu Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:N.CONTAINS}}},searchIcon(l){setTimeout(()=>{this.filteredIcon=l.query.trim().length?this.icons.filter(t=>t.toLowerCase().includes(l.query.trim().toLowerCase())):[...this.icons]},250)}}},a=l=>(G("data-v-705a5b03"),l=l(),O(),l),z={class:"grid crud-demo"},K={class:"col-12"},Y={class:"card"},H={class:"my-2"},Q={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},W=a(()=>s("h5",{class:"m-0"},"Manage Menu",-1)),X={class:"flex gap-2 col-12 md:col-5"},Z={class:"block p-input-icon-left w-full"},$=a(()=>s("i",{class:"pi pi-search"},null,-1)),ee={key:0},te={key:1},ie={key:0,class:"product-badge status-lowstock"},le={key:1,class:"product-badge status-instock"},se={key:2},oe={class:"vertical-align-middle ml-2 font-bold line-height-3"},ne={class:"formgrid grid"},de={class:"field col-6 md:col-3"},ue=a(()=>s("label",{for:"jenis"},"Jenis",-1)),re={key:0,class:"p-invalid"},ae={class:"field col-6 md:col-2"},me=a(()=>s("label",{for:"id"},"ID",-1)),ce={key:0,class:"p-invalid"},he={class:"field col-6 md:col-7"},pe=a(()=>s("label",{for:"parent"},"Parent",-1)),fe={class:"field col-6 md:col-2"},_e=a(()=>s("label",{for:"urut"},"Urut",-1)),ge={key:0,class:"p-invalid"},be={class:"field col-12 md:col-6"},ve=a(()=>s("label",{for:"name"},"Nama",-1)),ye={key:0,class:"p-invalid"},De={class:"field col-6 md:col-4"},Ce=a(()=>s("label",{for:"permission"},"Permission",-1)),Me={key:0,class:"p-invalid"},ke={class:"field col-6 md:col-6"},Ie=a(()=>s("label",{for:"outcome"},"Outcome",-1)),Ve={key:0,class:"p-invalid"},Se={class:"field col-10 md:col-5"},xe=a(()=>s("label",{for:"icon"},"Icon",-1)),we={class:"flex"},Ue={class:"flex align-items-center justify-content-center mr-2"},je={class:"flex align-items-center justify-content-center ml-2"},Pe={key:0,class:"p-invalid"},Te={class:"field col-2 md:col-1"},Le=a(()=>s("label",{for:"icon"},"Icon",-1)),Fe={class:"field col-4 md:col-5"},Ee=a(()=>s("label",{for:"target"},"Target",-1)),Je={class:"field col-8 md:col-7"},Ne=a(()=>s("label",{for:"url"},"URL",-1)),qe={class:"field col-12"},Be=a(()=>s("label",{for:"keterangan"},"Keterangan",-1)),Ae={key:0,class:"p-invalid"},Ge={class:"flex align-items-center justify-content-center"},Oe=a(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Re={key:0},ze={class:"flex align-items-center justify-content-center"},Ke=a(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ye={key:0};function He(l,t,u,n,e,f){const S=m("Toast"),p=m("Button"),x=m("MyExport"),w=m("Toolbar"),_=m("InputText"),U=m("MultiSelect"),y=m("Column"),j=m("ActionButton"),P=m("DataTable"),I=m("Dropdown"),T=m("InputNumber"),L=m("AutoComplete"),F=m("Textarea"),M=m("Dialog");return d(),r("div",z,[s("div",K,[s("div",Y,[o(S),o(w,{class:"mb-4"},{start:c(()=>[s("div",H,[o(p,{label:"Tambah",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:f.FormNew},null,8,["onClick"])])]),end:c(()=>[o(x,{value:l.filteredItems,selectedColumns:e.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),o(P,{value:e.lMenu,selection:e.selectedlMenu,"onUpdate:selection":t[2]||(t[2]=i=>e.selectedlMenu=i),dataKey:"id",filters:e.filters},{header:c(()=>[s("div",Q,[W,s("div",X,[s("span",Z,[$,o(_,{modelValue:e.filters.global.value,"onUpdate:modelValue":t[0]||(t[0]=i=>e.filters.global.value=i),placeholder:"Search...",class:"w-full"},null,8,["modelValue"])]),o(U,{modelValue:e.selectedColumns,"onUpdate:modelValue":t[1]||(t[1]=i=>e.selectedColumns=i),options:e.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-3rem"},null,8,["modelValue","options"])])])]),groupheader:c(i=>[s("span",oe,D(i.data.parent),1)]),default:c(()=>[o(y,{field:"id",header:"ID"}),o(y,{field:"parent",header:"Parent"}),(d(!0),r(q,null,B(e.selectedColumns,(i,k)=>(d(),A(y,{field:i.field,header:i.header,key:i.field+"_"+k,sortable:!0},{body:c(({data:b,field:v})=>[v=="icon"?(d(),r("div",ee,[o(p,{icon:b[v],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):v=="jenis"?(d(),r("div",te,[b[v]=="D"?(d(),r("span",ie,"Detail")):b[v]=="G"?(d(),r("span",le,"Group")):h("",!0)])):(d(),r("div",se,D(b[v]),1))]),_:2},1032,["field","header"]))),128)),o(y,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:c(({data:i,index:k})=>[o(j,{data:i,index:k,onEdit:b=>f.FormEdit(i),onDelete:b=>f.confirmDelete(i)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),o(M,{visible:e.formDialog,"onUpdate:visible":t[14]||(t[14]=i=>e.formDialog=i),style:{width:"720px"},header:(e.isEdit?"Ubah":"Tambah")+" Menu",modal:!0,maximizable:"",class:"p-fluid"},{footer:c(()=>[o(p,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:l.hideDialog},null,8,["onClick"]),o(p,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:f.saveMenu,loading:l.$isLoading.value,disabled:l.$isLoading.value},null,8,["onClick","loading","disabled"])]),default:c(()=>[s("div",ne,[s("div",de,[ue,o(I,{modelValue:e.selectedJenis,"onUpdate:modelValue":t[3]||(t[3]=i=>e.selectedJenis=i),options:e.lJenis,optionLabel:"name",onChange:f.selectJenis,placeholder:"...",showClear:""},null,8,["modelValue","options","onChange"]),e.isSubmitted&&!e.item.jenis?(d(),r("small",re,"required.")):h("",!0)]),s("div",ae,[me,o(_,{id:"id",modelValue:e.item.id,"onUpdate:modelValue":t[4]||(t[4]=i=>e.item.id=i),modelModifiers:{trim:!0},autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.item.id}),disabled:""},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.id?(d(),r("small",ce,"required.")):h("",!0)]),s("div",he,[pe,o(I,{modelValue:e.selectedParent,"onUpdate:modelValue":t[5]||(t[5]=i=>e.selectedParent=i),options:e.lParent,optionLabel:"name",onChange:f.selectParent,placeholder:"Pilih Parent Jika Jenis Menu Anda Adalah Detail",showClear:""},null,8,["modelValue","options","onChange"])]),s("div",fe,[_e,o(T,{modelValue:e.item.urut,"onUpdate:modelValue":t[6]||(t[6]=i=>e.item.urut=i),inputId:"integeronly",class:g({"p-invalid":e.isSubmitted&&!e.item.urut})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.urut?(d(),r("small",ge,"required.")):h("",!0)]),s("div",be,[ve,o(_,{id:"name",modelValue:e.item.name,"onUpdate:modelValue":t[7]||(t[7]=i=>e.item.name=i),autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.item.name})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.name?(d(),r("small",ye,"required.")):h("",!0)]),s("div",De,[Ce,o(_,{id:"permission",modelValue:e.item.permission,"onUpdate:modelValue":t[8]||(t[8]=i=>e.item.permission=i),autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.item.permission})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.permission&&e.item.jenis=="D"?(d(),r("small",Me,"required.")):h("",!0)]),s("div",ke,[Ie,o(_,{id:"outcome",modelValue:e.item.outcome,"onUpdate:modelValue":t[9]||(t[9]=i=>e.item.outcome=i),autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.item.outcome&&e.item.jenis=="D"})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.outcome&&e.item.jenis=="D"?(d(),r("small",Ve,"required.")):h("",!0)]),s("div",Se,[xe,o(L,{modelValue:e.item.icon,"onUpdate:modelValue":t[10]||(t[10]=i=>e.item.icon=i),suggestions:e.filteredIcon,onComplete:f.searchIcon,dropdown:"",class:g({"p-invalid":e.isSubmitted&&!e.item.icon})},{option:c(i=>[s("div",we,[s("div",Ue,[o(p,{icon:i.option,class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])]),s("div",je,D(i.option),1)])]),_:1},8,["modelValue","suggestions","onComplete","class"]),e.isSubmitted&&!e.item.icon?(d(),r("small",Pe,"required.")):h("",!0)]),s("div",Te,[Le,o(p,{icon:e.item.icon,class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])]),s("div",Fe,[Ee,o(_,{id:"target",modelValue:e.item.target,"onUpdate:modelValue":t[11]||(t[11]=i=>e.item.target=i),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])]),s("div",Je,[Ne,o(_,{id:"url",modelValue:e.item.url,"onUpdate:modelValue":t[12]||(t[12]=i=>e.item.url=i),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])]),s("div",qe,[Be,o(F,{inputId:"keterangan",modelValue:e.item.keterangan,"onUpdate:modelValue":t[13]||(t[13]=i=>e.item.keterangan=i),modelModifiers:{trim:!0},class:g({"p-invalid":e.isSubmitted&&!e.item.keterangan})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.keterangan?(d(),r("small",Ae,"required.")):h("",!0)])])]),_:1},8,["visible","header"]),o(M,{visible:e.deleteformDialog,"onUpdate:visible":t[16]||(t[16]=i=>e.deleteformDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:c(()=>[o(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[15]||(t[15]=i=>e.deleteformDialog=!1)}),o(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:f.deleteMenu},null,8,["onClick"])]),default:c(()=>[s("div",Ge,[Oe,l.menu?(d(),r("span",Re,[V("Are you sure you want to delete "),s("b",null,D(e.item.menu),1),V("?")])):h("",!0)])]),_:1},8,["visible"]),o(M,{visible:e.deletelMenuDialog,"onUpdate:visible":t[18]||(t[18]=i=>e.deletelMenuDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:c(()=>[o(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[17]||(t[17]=i=>e.deletelMenuDialog=!1)}),o(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:f.deleteSelectedlMenu},null,8,["onClick"])]),default:c(()=>[s("div",ze,[Ke,l.menu?(d(),r("span",Ye,"Are you sure you want to delete the selected lMenu?")):h("",!0)])]),_:1},8,["visible"])])])])}const Xe=E(R,[["render",He],["__scopeId","data-v-705a5b03"]]);export{Xe as default};
