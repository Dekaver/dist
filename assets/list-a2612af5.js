import{D as h,_ as V,F as B,r,o as d,c as m,b as l,d as a,e as o,l as I,t as y,m as F,q as L,f as N,k as P,n as R,p as A,g as U}from"./index-11eb6111.js";import{a as M}from"./api-2cd2ff16.js";const _={index(e){return h.get("/ter-tarif/"+e+"/index")},store(e){return h.post("/ter-tarif/",e)},update(e,s){return h.patch("/ter-tarif/"+e,s)},show(e){return h.get("/ter-tarif/"+e+"/show")},destroy(e){return h.delete("/ter-tarif/"+e)}};const q={data(){return{lTer:[],lTerTarif:[],terTarifDialog:!1,deleteTerTarifDialog:!1,item:{},selectedlTerTarif:null,filters:{},isSubmitted:!1,isEdit:!1,selectedTer:null,id_ter:null,selectedColumns:[{header:"Batas Bawah",field:"batas_bawah",class:"w-20rem",type:"currency"},{header:"Batas Atas",field:"batas_atas",class:"w-20rem",type:"currency"},{header:"Tarif",field:"tarif",class:"w-20rem",type:"currency"}],Columns:[{header:"Batas Bawah",field:"batas_bawah",class:"w-20rem",type:"currency"},{header:"Batas Atas",field:"batas_atas",class:"w-20rem",type:"currency"},{header:"Tarif",field:"tarif",class:"w-20rem",type:"currency"}]}},created(){this.initFilters()},mounted(){this.getData()},methods:{ubahTer(e){e.value===null?(this.id_ter=null,this.lTerTarif=[]):(this.id_ter=this.selectedTer.id,this.getTerTarif())},getData(){M.index().then(e=>{this.lTer=e.data.data})},getTerTarif(){_.index(this.id_ter).then(e=>{this.lTerTarif=e.data.data})},FormNew(){this.item={},this.isSubmitted=!1,this.terTarifDialog=!0},HideDialog(){this.terTarifDialog=!1,this.isSubmitted=!1,this.isEdit=!1},Save(){this.isSubmitted=!0,this.isLoading=!0,this.item&&(this.item.id_ter=this.id_ter,this.isEdit?_.update(this.item.id,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lTerTarif[this.lTerTarif.findIndex(s=>s.id==e.data.data.id)]=e.data.data}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}).finally(()=>{this.terTarifDialog=!1,this.isLoading=!1}):_.store(this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lTerTarif.push(e.data.data)}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}).finally(()=>{this.terTarifDialog=!1,this.isLoading=!1})),this.item={},this.isSubmitted=!0,this.isEdit=!1},FormEdit(e){this.item={...e},this.terTarifDialog=!0,this.isEdit=!0},confirmDelete(e){this.item=e,this.deleteTerTarifDialog=!0},Destroy(e){this.deleteTerTarifDialog=!1,_.destroy(e.id).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"TER TARIF Deleted",life:3e3}),this.lTerTarif=this.lTerTarif.filter(s=>s.id!==e.id)}).catch(s=>{this.$toast.add({severity:"error",summary:"Error",detail:s.response.data.message,life:3e3})}),this.item={}},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:B.CONTAINS}}}}},c=e=>(A("data-v-89dc2659"),e=e(),U(),e),j={class:"grid crud-demo"},H={class:"col-12"},z={class:"card"},O={class:"my-2"},K={class:"card"},Y={class:"p-fluid formgrid grid"},G={class:"field col-2 d-flex justifiy-content-center align-items-end"},J=c(()=>l("label",{for:"kategori",class:"mb-1"},"TER",-1)),Q={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},W=c(()=>l("h5",{class:"m-0"},"TER",-1)),X={class:"block mt-2 md:mt-0 p-input-icon-left"},Z=c(()=>l("i",{class:"pi pi-search"},null,-1)),$={key:0},ee={key:1},te={key:2},se={class:"field"},ie=c(()=>l("label",{for:"batas_bawah"},"Batas Bawah",-1)),ae={class:"field"},le=c(()=>l("label",{for:"batas_atas"},"Batas Atas",-1)),re={class:"field"},oe=c(()=>l("label",{for:"tarif"},"Tarif",-1)),ne={class:"flex align-items-center justify-content-center"},de=c(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ce={key:0};function ue(e,s,me,fe,i,n){const w=r("Toast"),u=r("Button"),x=r("MyExport"),D=r("Toolbar"),C=r("Dropdown"),k=r("InputText"),T=r("Column"),E=r("ActionButton"),S=r("DataTable"),b=r("InputNumber"),v=r("Dialog");return d(),m("div",j,[l("div",H,[l("div",z,[a(w),a(D,{class:"mb-4"},{start:o(()=>[l("div",O,[a(u,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2",disabled:i.id_ter==null,onClick:n.FormNew},null,8,["disabled","onClick"])])]),end:o(()=>[a(x,{value:i.lTer,selectedColumns:i.selectedColumns,title:"Export TER TARIF"},null,8,["value","selectedColumns"])]),_:1}),l("div",K,[l("div",Y,[l("div",G,[J,a(C,{id:"kategori",modelValue:i.selectedTer,"onUpdate:modelValue":s[0]||(s[0]=t=>i.selectedTer=t),onChange:n.ubahTer,options:i.lTer,placeholder:"PILIH TER",optionLabel:"ter",showClear:""},null,8,["modelValue","onChange","options"])])])]),a(S,{ref:"dt",value:i.lTerTarif,selection:i.selectedlTerTarif,"onUpdate:selection":s[2]||(s[2]=t=>i.selectedlTerTarif=t),dataKey:"id",paginator:!0,rows:10,filters:i.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Ter Tarif",responsiveLayout:"scroll"},{header:o(()=>[l("div",Q,[W,l("span",X,[Z,a(k,{modelValue:i.filters.global.value,"onUpdate:modelValue":s[1]||(s[1]=t=>i.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),default:o(()=>[a(T,{header:"#",headerStyle:"width:10px"},{body:o(t=>[I(y(t.index+1),1)]),_:1}),(d(!0),m(F,null,L(i.selectedColumns,(t,g)=>(d(),P(T,{field:t.field,header:t.header,class:R(t.class),key:t.field+"_"+g,sortable:!0},{body:o(({data:f,field:p})=>[p=="icon"?(d(),m("div",$,[a(u,{icon:f[p],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):t.type=="currency"?(d(),m("div",ee,y(e.$h.formatNumber(f[p])),1)):(d(),m("div",te,y(f[p]),1))]),_:2},1032,["field","header","class"]))),128)),a(T,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:o(({data:t,index:g})=>[a(E,{data:t,index:g,onEdit:f=>n.FormEdit(t),onDelete:f=>n.confirmDelete(t)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),a(v,{visible:i.terTarifDialog,"onUpdate:visible":s[6]||(s[6]=t=>i.terTarifDialog=t),style:{width:"450px"},header:"TER TARIF",modal:!0,class:"p-fluid"},{footer:o(()=>[a(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.HideDialog},null,8,["onClick"]),a(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:n.Save},null,8,["onClick"])]),default:o(()=>[l("div",se,[ie,a(b,{id:"batas_bawah",modelValue:i.item.batas_bawah,"onUpdate:modelValue":s[3]||(s[3]=t=>i.item.batas_bawah=t),required:"true",autofocus:""},null,8,["modelValue"])]),l("div",ae,[le,a(b,{id:"batas_atas",modelValue:i.item.batas_atas,"onUpdate:modelValue":s[4]||(s[4]=t=>i.item.batas_atas=t),required:"true",autofocus:""},null,8,["modelValue"])]),l("div",re,[oe,a(b,{id:"tarif",modelValue:i.item.tarif,"onUpdate:modelValue":s[5]||(s[5]=t=>i.item.tarif=t),required:"true",autofocus:""},null,8,["modelValue"])])]),_:1},8,["visible"]),a(v,{visible:i.deleteTerTarifDialog,"onUpdate:visible":s[9]||(s[9]=t=>i.deleteTerTarifDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[7]||(s[7]=t=>i.deleteTerTarifDialog=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:s[8]||(s[8]=t=>n.Destroy(i.item))})]),default:o(()=>[l("div",ne,[de,i.item?(d(),m("span",ce,"Are you sure you want to delete?")):N("",!0)])]),_:1},8,["visible"])])])])}const _e=V(q,[["render",ue],["__scopeId","data-v-89dc2659"]]);export{_e as default};
