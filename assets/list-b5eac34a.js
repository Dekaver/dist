import{_ as A,F as M,r as o,o as i,c as d,b as l,d as s,e as r,n as f,t as c,l as b,m as j,q as U,k as x,f as C,p as B,g as E}from"./index-11eb6111.js";import{a as w}from"./internalorder-81a59869.js";const G={data(){return{items:[{nomor:null,tanggal:null,id_gudang:"",keterangan:"",status:"",create_by:"",modified_by:"",create_date:"",modified_date:""}],lInternalOrder:null,internalorder:null,periode:{awal:null,akhir:null},products:null,product:{},selectedProducts:null,selectedStatus:{label:"All",value:"A"},statuses:[{label:"All",value:"A"},{label:"Draft",value:"D"},{label:"Open",value:"O"},{label:"Delivery Process",value:"V"},{label:"Partial",value:"P"},{label:"Complete",value:"C"},{label:"Cancel",value:"X"}],selectedColumns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"gudang_asal",header:"Gudang Asal",class:"text-left"},{field:"gudang_tujuan",header:"Gudang Tujuan",class:"text-left"},{field:"created_name",header:"Dibuat Oleh",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],Columns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"gudang_asal",header:"Gudang Asal",class:"text-left"},{field:"gudang_tujuan",header:"Gudang Tujuan",class:"text-left"},{field:"created_name",header:"Dibuat Oleh",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],deleteDialog:!1,filter:!1,filters:null,loading:!1}},created(){this.initFilters()},mounted(){this.getData()},methods:{getData(){this.loading=!0;let n=this.periode.awal==null?null:new Date(this.periode.awal).toISOString(),a=this.periode.akhir==null?null:new Date(this.periode.akhir).toISOString();w.index(n,a,this.selectedStatus.value).then(y=>{this.lInternalOrder=y.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Quotation",life:3e3})}).finally(()=>{this.loading=!1})},getLabel:function(n){switch(n){case"D":return"draft";case"O":return"open";case"P":return"partial";case"C":return"close";case"X":return"cancel";default:return"draft"}},confirmDelete(n){this.internalorder=n,this.deleteDialog=!0},submitDelete(){let n=!0;w.destroy(this.internalorder.id).then(()=>{this.deleteDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:"Internal Order Deleted",life:3e3})}).catch(a=>{console.log(a),n=!1,this.$toast.add({severity:"error",summary:"Failed",detail:a.response.data.message,life:3e3})}).finally(()=>{n&&(this.lInternalOrder=this.lInternalOrder.filter(a=>a.id!=this.internalorder.id))})},editInternalOrder(n){this.$router.push(`/internal/order/${n.id}/edit`)},showHideFilter(){this.filter=!this.filter},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:M.CONTAINS}}}}},m=n=>(B("data-v-b2caca63"),n=n(),E(),n),R={class:"grid crud-demo"},q={class:"col-12"},z={class:"card"},H={class:"my-2"},X=m(()=>l("h5",{class:"mbe-4"},"Filter Internal Order",-1)),K={class:"p-fluid formgrid grid"},Q={class:"field col-2"},Y={class:"p-float-label"},J=m(()=>l("p",{class:"mb-1"},"Start Date",-1)),W={class:"field col-2"},Z={class:"p-float-label"},$=m(()=>l("p",{class:"mb-1"},"End Date",-1)),ee={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},te=m(()=>l("label",{for:"internalquotation",class:"mb-1"},"Status",-1)),le={key:0},ae={key:1},se={key:2},ne={class:"field col-auto",style:{display:"flex","align-items":"flex-end","align-content":"flex-end"}},oe=m(()=>l("div",{class:"text-center"},"Empty",-1)),ie={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},re=m(()=>l("h5",{class:"m-0"},"Manage Internal Order",-1)),de={class:"block mt-2 md:mt-0 p-input-icon-left"},ue=m(()=>l("i",{class:"pi pi-search"},null,-1)),ce=m(()=>l("span",{class:"p-column-title"},"SO Number",-1)),me={key:0},pe={key:1},_e={key:2},he={key:3,class:"text-right"},fe={key:4},ge={class:"flex align-items-center justify-content-center"},be=m(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ve={key:0};function ye(n,a,y,ke,t,_){const D=o("Toast"),p=o("Button"),S=o("router-link"),I=o("MyExport"),O=o("Toolbar"),k=o("Calendar"),V=o("Dropdown"),T=o("MultiSelect"),L=o("InputText"),g=o("Column"),F=o("Tag"),N=o("DataTable"),P=o("Dialog");return i(),d("div",R,[l("div",q,[l("div",z,[s(D),s(O,{class:"mb-4"},{start:r(()=>[l("div",H,[s(S,{to:"/internal/order/create",class:"btn btn-added me-2"},{default:r(()=>[s(p,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2"})]),_:1}),s(p,{icon:"pi pi-filter",label:"Filter",class:f(["p-button mx-2",{"p-button-block":t.filter,"p-button-outlined":!t.filter}]),onClick:_.showHideFilter},null,8,["onClick","class"])])]),end:r(()=>[s(I,{value:n.filteredItems,selectedColumns:t.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),l("div",{class:f(["card fadein",{hidden:!t.filter}])},[X,l("div",K,[l("div",Q,[l("span",Y,[J,s(k,{dateFormat:"dd-mm-yy",modelValue:t.periode.awal,"onUpdate:modelValue":a[0]||(a[0]=e=>t.periode.awal=e),inputId:"periodeawal"},null,8,["modelValue"])])]),l("div",W,[l("span",Z,[$,s(k,{dateFormat:"dd-mm-yy",modelValue:t.periode.akhir,"onUpdate:modelValue":a[1]||(a[1]=e=>t.periode.akhir=e),inputId:"periodeakhir"},null,8,["modelValue"])])]),l("div",ee,[te,s(V,{id:"internalquotation",modelValue:t.selectedStatus,"onUpdate:modelValue":a[2]||(a[2]=e=>t.selectedStatus=e),options:t.statuses,optionLabel:"label",placeholder:"Semua"},{value:r(e=>[e.value&&e.value.value?(i(),d("div",le,[l("span",{class:f("product-badge status-"+e.value.value)},c(e.value.label),3)])):e.value&&!e.value.value?(i(),d("div",ae,[l("span",{class:f("product-badge status-"+e.value.toLowerCase())},c(e.value),3)])):(i(),d("span",se,c(e.placeholder),1))]),_:1},8,["modelValue","options"])]),l("div",ne,[s(p,{icon:t.loading?"pi pi-spin pi-spinner":"pi pi-search",label:"Search",onClick:_.getData},null,8,["icon","onClick"])])])],2),s(N,{ref:"dt",value:t.lInternalOrder,selection:t.selectedProducts,"onUpdate:selection":a[5]||(a[5]=e=>t.selectedProducts=e),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Internal order",responsiveLayout:"scroll"},{empty:r(()=>[oe]),header:r(()=>[l("div",ie,[re,s(T,{modelValue:t.selectedColumns,"onUpdate:modelValue":a[3]||(a[3]=e=>t.selectedColumns=e),options:t.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),l("span",de,[ue,s(L,{modelValue:t.filters.global.value,"onUpdate:modelValue":a[4]||(a[4]=e=>t.filters.global.value=e),placeholder:"Search..."},null,8,["modelValue"])])])]),default:r(()=>[s(g,{field:"no",header:"No",sortable:!0,headerStyle:"width:5%; min-width:5rem;"},{body:r(({index:e})=>[b(c(e+1),1)]),_:1}),s(g,{field:"nomor",header:"SO Number",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(e=>[ce,b(" "+c(e.data.nomor),1)]),_:1}),(i(!0),d(j,null,U(t.selectedColumns,(e,v)=>(i(),x(g,{field:e.field,header:e.header,class:f(e.class),key:e.field+"_"+v,sortable:!0},{body:r(({data:h,field:u})=>[u=="icon"?(i(),d("div",me,[s(p,{icon:h[u],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):u=="status"?(i(),d("div",pe,[s(F,{value:_.getLabel(h[u]),severity:_.getLabel(h[u])},null,8,["value","severity"])])):u=="tanggal"?(i(),d("div",_e,c(n.$h.formatDate(h[u])),1)):u=="grandtotal"?(i(),d("div",he,c(n.$h.formatNumber(h[u])),1)):(i(),d("div",fe,c(h[u]),1))]),_:2},1032,["field","header","class"]))),128)),s(g,{headerStyle:"width:10%; max-width:1rem;",class:"text-right"},{body:r(e=>[s(p,{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning mr-2",onClick:v=>_.editInternalOrder(e.data)},null,8,["onClick"]),e.data.status=="D"||e.data.status=="O"?(i(),x(p,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:v=>_.confirmDelete(e.data)},null,8,["onClick"])):C("",!0)]),_:1})]),_:1},8,["value","selection","filters"])]),s(P,{visible:t.deleteDialog,"onUpdate:visible":a[7]||(a[7]=e=>t.deleteDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[s(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[6]||(a[6]=e=>t.deleteDialog=!1)}),s(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:_.submitDelete},null,8,["onClick"])]),default:r(()=>[l("div",ge,[be,t.internalorder?(i(),d("span",ve,[b("Are you sure you want to delete "),l("b",null,c(t.internalorder.nomor),1),b("?")])):C("",!0)])]),_:1},8,["visible"])])])}const we=A(G,[["render",ye],["__scopeId","data-v-b2caca63"]]);export{we as default};
