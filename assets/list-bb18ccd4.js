import{_ as R,$ as B,F as T,r as n,o as u,c as h,b as s,d as o,e as r,n as m,k as v,l as g,t as p,m as S,q as M}from"./index-11eb6111.js";import{a as K}from"./kategoriproduk-68d52205.js";import{a as N}from"./index-fa5c02f8.js";import{a as O}from"./options-b2eb7ae6.js";const Y={data(){return{items:[],selectedColumns:[{field:"ap_number",header:"Nomor",class:"text-left"},{field:"supplier",header:"Supplier",class:"text-left"},{field:"invoice_number",header:"Referensi",class:"text-left"},{field:"amount",header:"Total",class:"text-left",type:"currency"},{field:"pay",header:"Bayar",class:"text-left",type:"currency"},{field:"sisa_tagihan",header:"Sisa Tagihan",class:"text-left",type:"currency"},{field:"keterangan",header:"Keterangan",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],Columns:[{field:"ap_number",header:"Nomor",class:"text-left"},{field:"supplier",header:"Supplier",class:"text-left"},{field:"invoice_number",header:"Referensi",class:"text-left"},{field:"amount",header:"Total",class:"text-left",type:"currency"},{field:"pay",header:"Bayar",class:"text-left",type:"currency"},{field:"sisa_tagihan",header:"Sisa Tagihan",class:"text-left",type:"currency"},{field:"keterangan",header:"Keterangan",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],lKategori:[],selectedKategori:null,lGudang:[],selectedGudang:null,lSupplier:[],selectedSupplier:null,lStatus:[],selectedStatus:null,statuses:[{label:"All",value:""},{label:"Lunas",value:"Lunas"},{label:"Belum Lunas",value:"Belum Lunas"},{label:"Belum Bayar",value:"Belum Bayar"}],periodes:[{label:"All",value:""},{label:"Perhari",value:"Perhari"},{label:"Kemarin",value:"Kemarin"},{label:"Perminggu",value:"Perminggu"},{label:"Perbulan",value:"Perbulan"},{label:"Pertahun",value:"Pertahun"},{label:"Minggu Lalu",value:"MingguLalu"},{label:"Bulan Lalu",value:"BulanLalu"},{label:"Tahun Lalu",value:"TahunLalu"},{label:"Custom",value:"Custom"}],periode:{awal:null,akhir:null},f:{awal:null,akhir:null},selectedPeriode:{label:"All",value:""},filter:!1,filters:{}}},created(){this.initFilters()},mounted(){this.getData()},methods:{ubahSupplier(e){e.value===null?this.f.id_supplier=null:this.f.id_supplier=this.selectedSupplier.id,this.getReport()},getReportCustom(){this.selectedPeriode={label:"Custom",value:"Custom"},this.getReport()},ubahPeriode(){const e=new Date,l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),c=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999);switch(this.selectedPeriode.value){case"Perhari":{this.f.awal=l,this.f.akhir=c;break}case"Kemarin":{const i=new Date(new Date(l).setDate(l.getDate()-1));this.f.awal=i,this.f.akhir=i;break}case"Perminggu":{const i=new Date(new Date(l).setDate(l.getDate()-7));this.f.awal=i,this.f.akhir=c;break}case"Perbulan":{const i=new Date(e.getFullYear(),e.getMonth(),1);this.f.awal=i,this.f.akhir=c;break}case"Pertahun":{const i=new Date(e.getFullYear(),0,1);this.f.awal=i,this.f.akhir=c;break}case"MingguLalu":{const i=new Date(new Date(l).setDate(l.getDate()-l.getDay()-7)),t=new Date(new Date(i).setDate(i.getDate()+6));this.f.awal=i,this.f.akhir=t;break}case"BulanLalu":{const i=new Date(e.getFullYear(),e.getMonth()-1,1),t=new Date(e.getFullYear(),e.getMonth(),0);this.f.awal=i,this.f.akhir=t;break}case"TahunLalu":{const i=new Date(e.getFullYear()-1,0,1),t=new Date(e.getFullYear()-1,11,31);this.f.awal=i,this.f.akhir=t;break}default:{this.f.awal=null,this.f.akhir=null;break}}this.getReport()},getReport(){N.getHutangSupplier(this.f).then(e=>{this.items=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Report Pembelian",life:3e3})}).finally(()=>{this.loading=!1})},getData(){this.getReport(),this.loading=!0,O.getKontakSupplier().then(e=>{this.lSupplier=e.data.data,e.data.data.length==1&&(this.selectedSupplier=e.data.data[0])}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load data Customer",life:3e3})}),K.index().then(e=>{this.lKategori=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Kategori Barang",life:3e3})}).finally(()=>{this.loading=!1}),B.index().then(e=>{this.lGudang=e.data.data,e.data.data.length==1&&(this.selectedGudang=e.data.data[0])}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Gudang",life:3e3})}).finally(()=>{this.loading=!1})},selectKontak(e){this.id_customer=e.value.id,this.customer=e.value.text},formatNumber(e){if(e)return e.toLocaleString("en-US",{style:"currency",currency:"USD"})},exportCSV(){this.$refs.dt.exportCSV()},showHideFilter(){this.filter=!this.filter},initFilters(){this.filters={global:{value:null,matchMode:T.CONTAINS}}}},components:{}},U={class:"grid crud-demo"},A={class:"col-12"},I={class:"card"},E={class:"my-2"},G=s("h5",{class:"mbe-4"},"Filter Report Hutang Supplier",-1),H={class:"p-fluid formgrid grid"},j={class:"field col-2 d-flex justifiy-content-center align-items-end"},W=s("label",{for:"supplier",class:"mb-1"},"Supplier",-1),q={class:"field col-2 d-flex justifiy-content-center align-items-end"},z=s("label",{for:"periode",class:"mb-1"},"Periode",-1),J={class:"field col-2"},Q={class:"p-float-label"},X=s("p",{class:"mb-1"},"Periode Awal",-1),Z={class:"field col-2"},$={class:"p-float-label"},ee=s("p",{class:"mb-1"},"Periode Akhir",-1),te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},le=s("h5",{class:"m-0"},"Report Hutang Supplier",-1),ae={class:"flex gap-2 col-12 md:col-5"},se={class:"block p-input-icon-left w-full"},ie=s("i",{class:"pi pi-search"},null,-1),oe={key:0,class:"text-right"},ne={key:1};function re(e,l,c,i,t,d){const D=n("Toast"),b=n("Button"),x=n("MyExport"),C=n("Toolbar"),_=n("Dropdown"),y=n("Calendar"),L=n("InputText"),P=n("MultiSelect"),f=n("Column"),V=n("DataTable");return u(),h(S,null,[s("div",U,[s("div",A,[s("div",I,[o(D),o(C,{class:"mb-4"},{start:r(()=>[s("div",E,[o(b,{icon:"pi pi-filter",label:"Filter",class:m(["p-button mx-2",{"p-button-block":t.filter,"p-button-outlined":!t.filter}]),onClick:d.showHideFilter},null,8,["onClick","class"])])]),end:r(()=>[o(x,{value:t.items,selectedColumns:t.selectedColumns,title:"Export Excel"},null,8,["value","selectedColumns"]),o(b,{icon:"pi pi-external-link",label:"Export CSV",title:"Report Pembelian",name:"Report Hutang Supplier",onClick:l[0]||(l[0]=a=>d.exportCSV(a))})]),_:1}),s("div",{class:m(["card",{hidden:!t.filter}])},[G,s("div",H,[s("div",j,[W,o(_,{id:"supplier",modelValue:t.selectedSupplier,"onUpdate:modelValue":l[1]||(l[1]=a=>t.selectedSupplier=a),onChange:d.ubahSupplier,options:t.lSupplier,placeholder:"Supplier",optionLabel:"kontak",showClear:""},null,8,["modelValue","onChange","options"])]),s("div",q,[z,o(_,{id:"periode",modelValue:t.selectedPeriode,"onUpdate:modelValue":l[2]||(l[2]=a=>t.selectedPeriode=a),onChange:d.ubahPeriode,options:t.periodes,optionLabel:"label",placeholder:"All"},null,8,["modelValue","onChange","options"])]),s("div",J,[s("span",Q,[X,o(y,{dateFormat:"dd-mm-yy",onDateSelect:d.getReportCustom,modelValue:t.f.awal,"onUpdate:modelValue":l[3]||(l[3]=a=>t.f.awal=a),inputId:"periodeawal"},null,8,["onDateSelect","modelValue"])])]),s("div",Z,[s("span",$,[ee,o(y,{dateFormat:"dd-mm-yy",onDateSelect:d.getReportCustom,modelValue:t.f.akhir,"onUpdate:modelValue":l[4]||(l[4]=a=>t.f.akhir=a),inputId:"periodeakhir"},null,8,["onDateSelect","modelValue"])])])])],2),o(V,{ref:"dt",value:t.items,selection:e.selectedItem,"onUpdate:selection":l[7]||(l[7]=a=>e.selectedItem=a),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Report Pembelian",responsiveLayout:"scroll"},{header:r(()=>[s("div",te,[le,s("div",ae,[s("span",se,[ie,o(L,{modelValue:t.filters.global.value,"onUpdate:modelValue":l[5]||(l[5]=a=>t.filters.global.value=a),placeholder:"Search...",class:"w-full"},null,8,["modelValue"])]),o(P,{modelValue:t.selectedColumns,"onUpdate:modelValue":l[6]||(l[6]=a=>t.selectedColumns=a),options:t.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-3rem"},null,8,["modelValue","options"])])])]),default:r(()=>[(u(),v(f,{field:"no",header:"No",sortable:!1,headerStyle:"width:4%; min-width:3rem;",key:"no"},{body:r(a=>[g(p(a.index+1),1)]),_:1})),o(f,{field:"date",header:"Tanggal",sortable:!0,headerStyle:"width:14%; min-width:10rem;",key:"date"},{body:r(a=>[g(p(e.$h.formatDate(a.data.date)),1)]),_:1}),(u(!0),h(S,null,M(t.selectedColumns,(a,F)=>(u(),v(f,{field:a.field,header:a.header,class:m(a.class),key:a.field+"_"+F,sortable:!0},{body:r(({data:w,field:k})=>[a.type=="currency"?(u(),h("div",oe,p(e.$h.formatNumber(w[k])),1)):(u(),h("div",ne,p(w[k]),1))]),_:2},1032,["field","header","class"]))),128))]),_:1},8,["value","selection","filters"])])])]),g(" "+p(this.f),1)],64)}const he=R(Y,[["render",re]]);export{he as default};
