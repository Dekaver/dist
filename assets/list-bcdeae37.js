import{_ as P,F as I,r as a,o as c,c as u,b as s,d as i,e as r,n as g,l as v,t as f,m as B,q as E,f as M,k as O,p as U,g as q}from"./index-11eb6111.js";import{a as C}from"./api-917068af.js";import{a as K}from"./options-b2eb7ae6.js";const j={data(){return{selectedDeliveryReceipt:null,delivery_order:null,lDeliveryReceipt:[],lCustomer:[],filteredCustomer:[],f:{selectedStatus:{label:"All",value:"A"},selectedCustomer:"",awal:null,akhir:null},selectedStatus:{label:"All",value:"A"},statuses:[{label:"All",value:"A"},{label:"Draft",value:"D"},{label:"Close",value:"C"}],selectedColumns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"gudang",header:"Warehouse",class:"text-left"},{field:"no_so",header:"SO No",class:"text-left"},{field:"customer",header:"Customer",class:"text-left"},{field:"kepada",header:"Kepada",class:"text-left"},{field:"created_name",header:"Created By",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],Columns:[{field:"tanggal",header:"Tanggal",class:"text-left"},{field:"gudang",header:"Warehouse",class:"text-left"},{field:"no_so",header:"SO No",class:"text-left"},{field:"customer",header:"Customer",class:"text-left"},{field:"telepon",header:"Telepon",class:"text-left"},{field:"kepada",header:"Kepada",class:"text-left"},{field:"driver",header:"Driver",class:"text-left"},{field:"driver_no",header:"No Driver",class:"text-left"},{field:"created_name",header:"Created By",class:"text-left"},{field:"status",header:"Status",class:"text-left"}],filter:!1,deleteDialog:!1,filters:{}}},productService:null,created(){this.initFilters()},computed:{filteredItems:function(){return this.lDeliveryReceipt.filter(l=>(this.f.selectedStatus.value=="A"?!0:this.f.selectedStatus.value==l.status)&&(typeof this.f.selectedCustomer=="string"?!0:this.f.selectedCustomer.id==l.id_customer)&&(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(l.tanggal).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(l.tanggal).toLocaleDateString()))}},mounted(){this.getData()},methods:{getData(){C.index({status:"C"}).then(l=>{this.lDeliveryReceipt=l.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Delivery Receipt",life:3e3})}),K.getKontakCustomer().then(l=>{this.lCustomer=l.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load Kontak Customer",life:3e3})})},confirmDelete(l){this.delivery_order=l,this.deleteDialog=!0},submitDelete(){let l=!0;C.destroy(this.delivery_order.id).then(()=>{this.deleteDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:"Quotation Deleted",life:3e3})}).catch(()=>{l=!1,this.$toast.add({severity:"error",summary:"Failed",detail:"Delete Quotation",life:3e3})}).finally(()=>{l&&(this.lDeliveryReceipt=this.lDeliveryReceipt.filter(o=>o.id!=this.delivery_order.id))})},FormEdit(l){this.$router.push(`/delivery/receipt/${l.id}/edit`)},searchCustomer(l){l.query.trim().length?this.filteredCustomer=this.lCustomer.filter(o=>o.kontak.toLowerCase().includes(l.query.trim().toLowerCase())):this.filteredCustomer=[...this.lCustomer]},showHideFilter(){this.filter=!this.filter},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:I.CONTAINS}}}}},d=l=>(U("data-v-22bb0a25"),l=l(),q(),l),z={class:"grid crud-demo"},H={class:"col-12"},Q={class:"card"},W={class:"my-2"},Y=d(()=>s("h5",{class:"mbe-4"},"Pencarian Delivery Receipt",-1)),G={class:"p-fluid formgrid grid"},J={class:"field col-2"},X={class:"p-float-label"},Z=d(()=>s("p",{class:"mb-1"},"Periode Awal",-1)),$={class:"field col-2"},ee={class:"p-float-label"},te=d(()=>s("p",{class:"mb-1"},"Periode Akhir",-1)),le={class:"field col-2"},se={class:"p-float-label"},oe=d(()=>s("p",{class:"mb-1"},"Customer",-1)),ie={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},ae=d(()=>s("label",{for:"salesquotation",class:"mb-1"},"Status",-1)),re={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ne=d(()=>s("h5",{class:"m-0"},"Manage Delivery Receipt",-1)),de={class:"block mt-2 md:mt-0 p-input-icon-left"},ce=d(()=>s("i",{class:"pi pi-search"},null,-1)),ue=d(()=>s("div",{class:"text-center"},"Empty",-1)),me=d(()=>s("span",{class:"p-column-title"},"DO Number",-1)),pe={key:0},fe={key:1},he={key:2},_e={key:3,class:"text-right"},ve={key:4},ye={class:"flex align-items-center justify-content-center"},ge=d(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),be={key:0};function Ce(l,o,De,xe,e,p){const D=a("Toast"),h=a("Button"),x=a("router-link"),k=a("MyExport"),w=a("Toolbar"),b=a("Calendar"),S=a("AutoComplete"),V=a("Dropdown"),L=a("MultiSelect"),T=a("InputText"),_=a("Column"),A=a("Tag"),F=a("ActionButton"),R=a("DataTable"),N=a("Dialog");return c(),u("div",z,[s("div",H,[s("div",Q,[i(D),i(w,{class:"mb-4"},{start:r(()=>[s("div",W,[i(x,{to:"/delivery/receipt/create",class:"btn btn-added me-2"},{default:r(()=>[i(h,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2"})]),_:1}),i(h,{icon:"pi pi-filter",label:"Filter",class:g(["p-button mx-2",{"p-button-block":e.filter,"p-button-outlined":!e.filter}]),onClick:p.showHideFilter},null,8,["onClick","class"])])]),end:r(()=>[i(k,{value:p.filteredItems,selectedColumns:e.selectedColumns,title:"Export Delivery Receipt"},null,8,["value","selectedColumns"])]),_:1}),s("div",{class:g(["card fadein",{hidden:!e.filter}])},[Y,s("div",G,[s("div",J,[s("span",X,[Z,i(b,{dateFormat:"dd-mm-yy",modelValue:e.f.awal,"onUpdate:modelValue":o[0]||(o[0]=t=>e.f.awal=t),inputId:"periodeawal"},null,8,["modelValue"])])]),s("div",$,[s("span",ee,[te,i(b,{dateFormat:"dd-mm-yy",modelValue:e.f.akhir,"onUpdate:modelValue":o[1]||(o[1]=t=>e.f.akhir=t),inputId:"periodeakhir"},null,8,["modelValue"])])]),s("div",le,[s("span",se,[oe,i(S,{modelValue:e.f.selectedCustomer,"onUpdate:modelValue":o[2]||(o[2]=t=>e.f.selectedCustomer=t),dropdown:"",suggestions:e.filteredCustomer,onComplete:p.searchCustomer,optionLabel:"kontak"},null,8,["modelValue","suggestions","onComplete"])])]),s("div",ie,[ae,i(V,{id:"salesquotation",modelValue:e.f.selectedStatus,"onUpdate:modelValue":o[3]||(o[3]=t=>e.f.selectedStatus=t),options:e.statuses,optionLabel:"label",placeholder:"Status"},null,8,["modelValue","options"])])])],2),i(R,{ref:"dt",value:p.filteredItems,selection:e.selectedDeliveryReceipt,"onUpdate:selection":o[6]||(o[6]=t=>e.selectedDeliveryReceipt=t),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Delivery order",responsiveLayout:"scroll"},{header:r(()=>[s("div",re,[ne,i(L,{modelValue:e.selectedColumns,"onUpdate:modelValue":o[4]||(o[4]=t=>e.selectedColumns=t),options:e.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),s("span",de,[ce,i(T,{modelValue:e.filters.global.value,"onUpdate:modelValue":o[5]||(o[5]=t=>e.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:r(()=>[ue]),default:r(()=>[i(_,{header:"#",headerStyle:"width:10px"},{body:r(t=>[v(f(t.index+1),1)]),_:1}),i(_,{field:"nomor",header:"DO Number",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(t=>[me,v(" "+f(t.data.nomor),1)]),_:1}),(c(!0),u(B,null,E(e.selectedColumns,(t,y)=>(c(),O(_,{field:t.field,header:t.header,class:g(t.class),key:t.field+"_"+y,sortable:!0},{body:r(({data:m,field:n})=>[n=="icon"?(c(),u("div",pe,[i(h,{icon:m[n],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):n=="status"?(c(),u("div",fe,[i(A,{value:l.$h.getLabel(m[n]),severity:l.$h.getLabel(m[n])},null,8,["value","severity"])])):n=="tanggal"?(c(),u("div",he,f(l.$h.formatDate(m[n])),1)):n=="grandtotal"?(c(),u("div",_e,f(l.$h.formatNumber(m[n])),1)):(c(),u("div",ve,f(m[n]),1))]),_:2},1032,["field","header","class"]))),128)),i(_,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:r(({data:t,index:y})=>[i(F,{data:t,index:y,onEdit:m=>p.FormEdit(t),showDelete:!1},null,8,["data","index","onEdit"])]),_:1})]),_:1},8,["value","selection","filters"])]),i(N,{visible:e.deleteDialog,"onUpdate:visible":o[8]||(o[8]=t=>e.deleteDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[i(h,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[7]||(o[7]=t=>e.deleteDialog=!1)}),i(h,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:p.submitDelete},null,8,["onClick"])]),default:r(()=>[s("div",ye,[ge,e.delivery_order?(c(),u("span",be,[v("Are you sure you want to delete "),s("b",null,f(e.delivery_order.nomor),1),v("?")])):M("",!0)])]),_:1},8,["visible"])])])}const Ve=P(j,[["render",Ce],["__scopeId","data-v-22bb0a25"]]);export{Ve as default};
