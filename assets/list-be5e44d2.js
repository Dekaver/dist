import{D as f,_ as I,F as M,r,o,c as d,b as i,d as a,e as n,l as x,t as D,m as B,q as E,n as C,f as S,k as q,p as U,g as j}from"./index-11eb6111.js";const g={index(){return f.get("/departemen/")},store(e){return f.post("/departemen/",e)},update(e,l){return f.patch("/departemen/"+e,l)},show(e){return f.get("/departemen/"+e)},destroy(e){return f.delete("/departemen/"+e)}};const K={data(){return{lDepartemen:null,departemenDialog:!1,deleteDialog:!1,deletelDepartemenDialog:!1,departemen:{},selectedAtasan:null,filteredDepartemen:[],filters:{},isSubmitted:!1,selectedColumns:[{header:"Kode",field:"kode",class:"w-20rem"},{header:"Departemen",field:"departemen",class:"w-20rem"}],Columns:[{header:"Kode",field:"kode",class:"w-20rem"},{header:"Departemen",field:"departemen",class:"w-20rem"}]}},created(){this.initFilters()},mounted(){this.getData()},methods:{getData(){g.index().then(e=>{this.lDepartemen=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Load data departemen",life:3e3})})},FormNew(){this.departemen={},this.isSubmitted=!1,this.departemenDialog=!0},HideDialog(){this.departemenDialog=!1,this.isSubmitted=!1},Save(){this.isSubmitted=!0,this.departemen.departemen.trim()&&(this.departemen.id_departemen?(g.update(this.departemen.id_departemen,this.departemen).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3})}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}).finally(()=>{this.getData()}),this.lDepartemen[this.lDepartemen.findIndex(e=>e.id==this.departemen.id_departemen)]=this.departemen):(g.store(this.departemen).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Create Departemen",life:3e3})}).finally(()=>{this.getData()}),this.lDepartemen.push(this.departemen)),this.departemenDialog=!1,this.departemen={})},FormEdit(e){this.departemen={...e},this.departemenDialog=!0,this.departemen.atasan!=null&&(this.selectedAtasan=this.lAtasan.find(l=>l.id==this.departemen.atasan))},confirmDelete(e){this.departemen=e,this.deleteDialog=!0},Destroy(){g.destroy(this.departemen.id_departemen).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"Departemen Deleted",life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed delete Departemen",life:3e3})}).finally(()=>{this.getData()}),this.lDepartemen=this.lDepartemen.filter(e=>e.id_departemen!==this.departemen.id_departemen),this.deleteDialog=!1,this.departemen={}},searchAtasan(e){setTimeout(()=>{e.query.trim().length?this.filteredDepartemen=this.lAtasan.filter(l=>l.text.toLowerCase().includes(e.query.toLowerCase())):this.filteredDepartemen=[...this.lAtasan]},250)},selectAtasan(e){this.departemen.atasan=e.value.id,this.departemen.departemen_atasan=e.value.text},findIndexById(e){let l=-1;for(let m=0;m<this.lDepartemen.length;m++)if(this.lDepartemen[m].id_departemen===e){l=m;break}return l},createId(){let e=0;return e=this.lDepartemen.reduce((m,y)=>m.id>y.id?m:y).id+1,e},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deletelDepartemenDialog=!0},deleteSelectedlDepartemen(){this.lDepartemen=this.lDepartemen.filter(e=>!this.selectedlDepartemen.includes(e)),this.deletelDepartemenDialog=!1,this.selectedlDepartemen=null,this.$toast.add({severity:"success",summary:"Successful",detail:"lDepartemen Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:M.CONTAINS}}},getSeverity(e){switch(e){case!0:return"info";case!1:return"warning";case"renewal":return null}}}},u=e=>(U("data-v-6da33061"),e=e(),j(),e),R={class:"grid crud-demo"},z={class:"col-12"},H={class:"card"},O={class:"my-2"},Y={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},G=u(()=>i("h5",{class:"m-0"},"Manajemen Departemen",-1)),J={class:"block mt-2 md:mt-0 p-input-icon-left"},Q=u(()=>i("i",{class:"pi pi-search"},null,-1)),W=u(()=>i("hr",null,null,-1)),X=u(()=>i("div",{class:"text-center"},"Departemen is Empty",-1)),Z=u(()=>i("hr",null,null,-1)),$={key:0},ee={key:1},te={key:2},se={key:3},le={key:4},ae={class:"formgrid grid"},ie={class:"field col-12 d-flex justifiy-content-center align-items-end"},ne=u(()=>i("label",{for:"kode"},"Kode",-1)),re={key:0,class:"p-invalid"},oe={class:"field col-12 d-flex justifiy-content-center align-items-end"},de=u(()=>i("label",{for:"departemen"},"Departemen",-1)),me={key:0,class:"p-invalid"},pe={class:"flex align-items-center justify-content-center"},ce=u(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ue={key:0};function he(e,l,m,y,t,h){const V=r("Toast"),_=r("Button"),F=r("MyExport"),T=r("Toolbar"),A=r("MultiSelect"),v=r("InputText"),b=r("Column"),L=r("Tag"),N=r("ActionButton"),P=r("DataTable"),w=r("Dialog");return o(),d("div",R,[i("div",z,[i("div",H,[a(V),a(T,{class:"mb-4"},{start:n(()=>[i("div",O,[a(_,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:h.FormNew},null,8,["onClick"])])]),end:n(()=>[a(F,{value:t.lDepartemen,selectedColumns:t.selectedColumns,title:"Export Departemen"},null,8,["value","selectedColumns"])]),_:1}),a(P,{ref:"dt",value:t.lDepartemen,dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} lDepartemen",responsiveLayout:"scroll"},{header:n(()=>[i("div",Y,[G,a(A,{modelValue:t.selectedColumns,"onUpdate:modelValue":l[0]||(l[0]=s=>t.selectedColumns=s),options:t.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),i("span",J,[Q,a(v,{modelValue:t.filters.global.value,"onUpdate:modelValue":l[1]||(l[1]=s=>t.filters.global.value=s),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:n(()=>[W,X,Z]),default:n(()=>[a(b,{header:"#",headerStyle:"width:10px"},{body:n(s=>[x(D(s.index+1),1)]),_:1}),(o(!0),d(B,null,E(t.selectedColumns,(s,k)=>(o(),q(b,{field:s.field,header:s.header,class:C(s.class),key:s.field+"_"+k,sortable:!0},{body:n(({data:p,field:c})=>[c=="icon"?(o(),d("div",$,[a(_,{icon:p[c],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):c=="is_head_departemen"?(o(),d("div",ee,[a(L,{value:p[c]?"Yes":"No",severity:h.getSeverity(p[c])},null,8,["value","severity"])])):s.type=="date"?(o(),d("div",te,D(e.$h.formatDate(p[c])),1)):s.parent=="pegawai"?(o(),d("div",se,D(p.pegawai[c]),1)):(o(),d("div",le,D(p[c]),1))]),_:2},1032,["field","header","class"]))),128)),a(b,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:n(({data:s,index:k})=>[a(N,{data:s,index:k,onEdit:p=>h.FormEdit(s),onDelete:p=>h.confirmDelete(s)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","filters"]),a(w,{visible:t.departemenDialog,"onUpdate:visible":l[4]||(l[4]=s=>t.departemenDialog=s),style:{width:"450px"},header:"Departemen Details",modal:!0,class:"p-fluid"},{footer:n(()=>[a(_,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:h.HideDialog},null,8,["onClick"]),a(_,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:h.Save},null,8,["onClick"])]),default:n(()=>[i("div",ae,[i("div",ie,[ne,a(v,{id:"kode",modelValue:t.departemen.kode,"onUpdate:modelValue":l[2]||(l[2]=s=>t.departemen.kode=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:C({"p-invalid":t.isSubmitted&&!t.departemen.kode})},null,8,["modelValue","class"]),t.isSubmitted&&!t.departemen.kode?(o(),d("small",re,"required")):S("",!0)]),i("div",oe,[de,a(v,{id:"departemen",modelValue:t.departemen.departemen,"onUpdate:modelValue":l[3]||(l[3]=s=>t.departemen.departemen=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:C({"p-invalid":t.isSubmitted&&!t.departemen.departemen})},null,8,["modelValue","class"]),t.isSubmitted&&!t.departemen.departemen?(o(),d("small",me,"required")):S("",!0)])])]),_:1},8,["visible"]),a(w,{visible:t.deleteDialog,"onUpdate:visible":l[6]||(l[6]=s=>t.deleteDialog=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[a(_,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[5]||(l[5]=s=>t.deleteDialog=!1)}),a(_,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:h.Destroy},null,8,["onClick"])]),default:n(()=>[i("div",pe,[ce,t.departemen?(o(),d("span",ue,[x("Are you sure you want to delete "),i("b",null,D(t.departemen.name),1),x("?")])):S("",!0)])]),_:1},8,["visible"])])])])}const fe=I(K,[["render",he],["__scopeId","data-v-6da33061"]]);export{fe as default};
