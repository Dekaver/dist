import{_ as P,$ as g,F,r as a,o as d,c as r,b as o,d as s,e as n,l as C,t as f,m as N,q as U,n as v,f as p,k as j,p as L,g as M}from"./index-11eb6111.js";import{a as q}from"./options-b2eb7ae6.js";const E={data(){return{lItem:[],item:{},filters:{},lKantor:null,selectedKantor:null,filteredKantor:{},itemDialog:!1,deleteitemDialog:!1,deletelKantorDialog:!1,isSubmitted:!1,selectedColumns:[{header:"Inisial",field:"inisial",class:"w-20rem"},{header:"Gudang",field:"gudang",class:"w-20rem"},{header:"Alamat",field:"alamat",class:"w-20rem"},{header:"Telepon",field:"telepon",class:"w-20rem"},{header:"Akun Pembelian",field:"akun_persediaan",class:"w-20rem"},{header:"Akun Penjualan",field:"akun_hpp",class:"w-20rem"}],Columns:[{header:"Inisial",field:"inisial",class:"w-20rem"},{header:"Gudang",field:"gudang",class:"w-20rem"},{header:"Alamat",field:"alamat",class:"w-20rem"},{header:"Telepon",field:"telepon",class:"w-20rem"},{header:"Akun Pembelian",field:"akun_persediaan",class:"w-20rem"},{header:"Akun Penjualan",field:"akun_hpp",class:"w-20rem"}]}},created(){this.initFilters()},mounted(){this.getData()},methods:{async getData(){await g.index().then(i=>{this.lItem=i.data.data}),await q.getKantor().then(i=>{this.lKantor=i.data.data})},FormNew(){this.item={},this.isSubmitted=!1,this.itemDialog=!0,this.selectedKantor=null},HideDialog(){this.itemDialog=!1,this.isSubmitted=!1},saveGudang(){this.isSubmitted=!0,this.item.inisial.trim()&&(this.item.id?g.update(this.item.id,this.item).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:"item Updated",life:3e3}),this.lItem[this.lItem.findIndex(l=>l.id==i.data.data.id)]=i.data.data,this.itemDialog=!1}).catch(()=>{this.$toast.add({severity:"error",summary:"Falied",detail:"Update Gudang",life:3e3})}):g.store(this.item).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:"Gudang Created",life:3e3}),this.lItem.push(i.data.data)}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Create Gudang",life:3e3})}),this.itemDialog=!1,this.item={},this.getData())},FormEdit(i){this.item={...i},this.item.id_kantor!=null&&(this.selectedKantor=this.lKantor.find(l=>l.id==this.item.id_kantor)),this.itemDialog=!0},confirmDelete(i){this.item=i,this.deleteitemDialog=!0},deleteGudang(){this.lItem=this.lItem.filter(i=>i.id!==this.item.id),this.deleteitemDialog=!1,g.delete(this.item.id).then(()=>{this.lItem=this.lItem.filter(i=>i.id!==this.item.id),this.$toast.add({severity:"success",summary:"Successful",detail:"Gudang Deleted",life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Gudang Gagal di hapus",life:3e3})}),this.item={}},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deletelItemDialog=!0},deleteSelectedGudang(){this.lItem=this.lItem.filter(i=>!this.selectedlItem.includes(i)),this.deletelItemDialog=!1,this.selectedlItem=null,this.$toast.add({severity:"success",summary:"Successful",detail:"lItem Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:F.CONTAINS}}},searchKantor(i){setTimeout(()=>{i.query.trim().length?this.filteredKantor=this.lKantor.filter(l=>l.nama.toLowerCase().includes(i.query.toLowerCase())):this.filteredKantor=[...this.lKantor]},250)},selectKantor(i){this.item.kantor=i.value.text,this.item.id_kantor=i.value.id}}},m=i=>(L("data-v-ce445177"),i=i(),M(),i),B={class:"grid crud-demo"},R={class:"col-12"},z={class:"card"},H={class:"my-2"},O={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},Y=m(()=>o("h5",{class:"m-0"},"Manage Gudang",-1)),J={class:"block mt-2 md:mt-0 p-input-icon-left"},Q=m(()=>o("i",{class:"pi pi-search"},null,-1)),W=m(()=>o("div",{class:"text-center"},"Empty",-1)),X={key:0},Z={key:1},$={key:2},ee={class:"formgrid grid"},te={class:"field col-4 d-flex justifiy-content-center align-items-end"},le=m(()=>o("label",{for:"inisial"},"Inisial",-1)),ie={key:0,class:"p-invalid"},se={class:"field col-8 d-flex justifiy-content-center align-items-end"},oe=m(()=>o("label",{for:"gudang"},"Nama Gudang",-1)),ne={key:0,class:"p-invalid"},ae={class:"field col-4 d-flex justifiy-content-center align-items-end"},de=m(()=>o("label",{for:"telepon"},"Telepon",-1)),re={key:0,class:"p-invalid"},me={class:"field col-8 d-flex justifiy-content-center align-items-end"},ue=m(()=>o("label",{for:"kantor",class:"mb-2"},"Nama Kantor",-1)),ce={key:0,class:"field col-6 d-flex justifiy-content-center align-items-end"},pe={key:1,class:"field col-6 d-flex justifiy-content-center align-items-end"},he={class:"field col-12"},fe=m(()=>o("label",{for:"alamat"},"Alamat",-1)),_e={class:"flex align-items-center justify-content-center"},ge=m(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ve={key:0},be={class:"flex align-items-center justify-content-center"},ye=m(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ke={key:0};function xe(i,l,Ce,De,e,u){const w=a("Toast"),c=a("Button"),I=a("MyExport"),S=a("Toolbar"),b=a("InputText"),y=a("Column"),V=a("ActionButton"),K=a("DataTable"),A=a("InputMask"),G=a("AutoComplete"),D=a("AutoCompleteAkun"),T=a("Textarea"),k=a("Dialog");return d(),r("div",B,[o("div",R,[o("div",z,[s(w),s(S,{class:"mb-4"},{start:n(()=>[o("div",H,[s(c,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:u.FormNew},null,8,["onClick"])])]),end:n(()=>[s(I,{value:e.lItem,selectedColumns:e.selectedColumns,title:"Export Gudang"},null,8,["value","selectedColumns"])]),_:1}),s(K,{ref:"dt",value:e.lItem,selection:e.selectedColumns,"onUpdate:selection":l[1]||(l[1]=t=>e.selectedColumns=t),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Kantor",responsiveLayout:"scroll"},{header:n(()=>[o("div",O,[Y,o("span",J,[Q,s(b,{modelValue:e.filters.global.value,"onUpdate:modelValue":l[0]||(l[0]=t=>e.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:n(()=>[W]),default:n(()=>[s(y,{header:"#",headerStyle:"width:10px"},{body:n(t=>[C(f(t.index+1),1)]),_:1}),(d(!0),r(N,null,U(e.selectedColumns,(t,x)=>(d(),j(y,{field:t.field,header:t.header,class:v(t.class),key:t.field+"_"+x,sortable:!0},{body:n(({data:h,field:_})=>[_=="icon"?(d(),r("div",X,[s(c,{icon:h[_],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):t.type=="date"?(d(),r("div",Z,f(i.$h.formatDate(h[_])),1)):(d(),r("div",$,f(h[_]),1))]),_:2},1032,["field","header","class"]))),128)),s(y,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:n(({data:t,index:x})=>[s(V,{data:t,index:x,onEdit:h=>u.FormEdit(t),onDelete:h=>u.confirmDelete(t)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),s(k,{visible:e.itemDialog,"onUpdate:visible":l[9]||(l[9]=t=>e.itemDialog=t),style:{width:"650px"},header:"Form Gudang",modal:!0,class:"p-fluid"},{footer:n(()=>[s(c,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:u.HideDialog},null,8,["onClick"]),s(c,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:u.saveGudang},null,8,["onClick"])]),default:n(()=>[o("div",ee,[o("div",te,[le,s(b,{id:"inisial",modelValue:e.item.inisial,"onUpdate:modelValue":l[2]||(l[2]=t=>e.item.inisial=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v({"p-invalid":e.isSubmitted&&!e.item.inisial})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.inisial?(d(),r("small",ie,"required")):p("",!0)]),o("div",se,[oe,s(b,{id:"gudang",modelValue:e.item.gudang,"onUpdate:modelValue":l[3]||(l[3]=t=>e.item.gudang=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v({"p-invalid":e.isSubmitted&&!e.item.gudang})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.gudang?(d(),r("small",ne,"required")):p("",!0)]),o("div",ae,[de,s(A,{mask:"(+99)999-?99999999",placeholder:"(+99)999-99999999",id:"telepon",modelValue:e.item.telepon,"onUpdate:modelValue":l[4]||(l[4]=t=>e.item.telepon=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v({"p-invalid":e.isSubmitted&&!e.item.telepon})},null,8,["modelValue","class"]),e.isSubmitted&&!e.item.telepon?(d(),r("small",re,"required")):p("",!0)]),o("div",me,[ue,s(G,{modelValue:e.selectedKantor,"onUpdate:modelValue":l[5]||(l[5]=t=>e.selectedKantor=t),optionLabel:"nama",suggestions:e.filteredKantor,onComplete:u.searchKantor,onItemSelect:u.selectKantor},{option:n(t=>[o("tr",null,[o("td",null,f(t.option.nama),1)])]),_:1},8,["modelValue","suggestions","onComplete","onItemSelect"])]),i.$setting.persediaan=="A"?(d(),r("div",ce,[s(D,{modelValue:e.item.account_persediaan,"onUpdate:modelValue":l[6]||(l[6]=t=>e.item.account_persediaan=t),level:4,label:"Akun Persediaan"},null,8,["modelValue"])])):p("",!0),i.$setting.persediaan=="A"?(d(),r("div",pe,[s(D,{modelValue:e.item.account_hpp,"onUpdate:modelValue":l[7]||(l[7]=t=>e.item.account_hpp=t),level:4,label:"Akun Hpp"},null,8,["modelValue"])])):p("",!0),o("div",he,[fe,s(T,{id:"alamat",modelValue:e.item.alamat,"onUpdate:modelValue":l[8]||(l[8]=t=>e.item.alamat=t),required:"true",rows:"2"},null,8,["modelValue"])])])]),_:1},8,["visible"]),s(k,{visible:e.deleteitemDialog,"onUpdate:visible":l[11]||(l[11]=t=>e.deleteitemDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[10]||(l[10]=t=>e.deleteitemDialog=!1)}),s(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:u.deleteGudang},null,8,["onClick"])]),default:n(()=>[o("div",_e,[ge,e.item?(d(),r("span",ve,[C("Are you sure you want to delete "),o("b",null,f(e.item.item),1),C("?")])):p("",!0)])]),_:1},8,["visible"]),s(k,{visible:e.deletelKantorDialog,"onUpdate:visible":l[13]||(l[13]=t=>e.deletelKantorDialog=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[12]||(l[12]=t=>e.deletelKantorDialog=!1)}),s(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:i.deleteSelectedKantor},null,8,["onClick"])]),default:n(()=>[o("div",be,[ye,e.item?(d(),r("span",ke,"Are you sure you want to delete the selected lKantor?")):p("",!0)])]),_:1},8,["visible"])])])])}const Se=P(E,[["render",xe],["__scopeId","data-v-ce445177"]]);export{Se as default};
