import{_ as z,X as Y,F as X,r as f,o as d,c as g,b as l,d as n,e as c,l as w,t as b,m as P,q as L,n as v,f as k,k as S,C as I,p as G,g as Q}from"./index-11eb6111.js";import{a as D}from"./produk-90d88791.js";import{a as q}from"./options-b2eb7ae6.js";import{a as W}from"./satuan-84ad7de8.js";import{z as J}from"./index-0ec66d4d.js";const Z=J.object({id_satuan:J.number()}),$={data(){return{FormError:{},selectedAccountHargaJual:null,filteredAccountHargaJual:[],selectedAccountHargaBeli:null,filteredAccountHargaBeli:[],lProduk:[],filteredlProduk:[],selectedProduk:null,lSatuan:[],optionSatuan:[],lSatuanData:[],produkDialog:!1,showTableSatuan:!1,showBundling:!1,deleteProdukDialog:!1,deleteSelectedProdukDialog:!1,selectedKategoriProduk:null,selectedBrand:null,selectedSatuan:null,selectedSatuanKiri:null,selectedSatuanKanan:null,issetNew:null,produk:{biaya:[{id_account:null,account:null,biaya:0}],bahan_baku:[{id_barang:null,nama_barang:null,qty:0,satuan:null,harga_beli:0}]},filters:{},isSubmitted:!1,isEdit:!1,optionKategoriProduk:{},optionBrand:{},satuanEmpty:{id_satuan_kiri:"",text_satuan_kiri:"",konversi:"0",id_satuan_kanan:"",text_satuan_kanan:"",isNew:!0},bahanBakuEmpty:{id_barang:null,nama_barang:null,qty:0,satuan:null,harga_beli:0},biayaEmpty:{id_account:null,account:null,biaya:0},selectedColumns:[{header:"Kode/SKU",field:"kode_barang",class:"w-20rem"},{header:"Produk/Jasa",field:"nama_barang",class:"w-20rem"},{header:"Satuan",field:"satuan",class:"w-20rem"},{header:"Kategori",field:"kategori_barang",class:"w-20rem"},{header:"Harga Jual",field:"harga_jual",type:"number",class:"w-20rem"},{header:"Harga Beli",field:"harga_beli",type:"number",class:"w-20rem"}],Columns:[{header:"Kode/SKU",field:"kode_barang",class:"w-20rem"},{header:"Produk/Jasa",field:"nama_barang",class:"w-20rem"},{header:"Status",field:"status",class:"w-20rem"},{header:"Keterangan",field:"keterangan",class:"w-20rem"},{header:"Harga Jual",field:"harga_jual",class:"w-20rem"},{header:"Harga Beli",field:"harga_beli",class:"w-20rem"},{header:"Satuan",field:"satuan",class:"w-20rem"},{header:"Brand",field:"brand",class:"w-20rem"}],columns:[{field:"id_satuan_kiri",header:"Satuan"},{field:"konversi",header:"Konversi"},{field:"id_satuan_kanan",header:"Satuan"}],columnsBahanBaku:[{field:"nama_produk",header:"Produk"},{field:"qty",header:"Kuantitas"},{field:"satuan",header:"Satuan"},{field:"harga_beli",header:"Harga Beli"}],columnsBiaya:[{field:"account",header:"Akun"},{field:"biaya",header:"Biaya",type:"number"}],receivedImages:[],uploadErrorMessage:""}},created(){this.initFilters()},mounted(){this.getOption(),this.getData()},computed:{totalBahanBaku:function(){return this.produk.bahan_baku.reduce((e,a)=>e+parseFloat(a.harga_beli||0),0)},totalBiaya:function(){return this.produk.biaya.reduce((e,a)=>e+parseFloat(a.biaya||0),0)},totalKeseluruhan:function(){return this.totalBahanBaku+this.totalBiaya}},methods:{searchProduk(e){setTimeout(()=>{e.query.trim().length?this.filteredlProduk=this.lProduk.filter(a=>a.nama_barang.toLowerCase().includes(e.query.trim().toLowerCase())):this.filteredlProduk=[...this.lProduk]},250)},searchAllProduk(){setTimeout(()=>{this.filteredlProduk=this.lProduk.filter(e=>!this.produk.detail.some(a=>a.nama_barang==e.nama_barang))},250)},searchAccountHargaJual(e){setTimeout(()=>{e.query.trim().length?this.filteredAccountHargaJual=this.lAccountHargaJual.filter(a=>a.name.toLowerCase().includes(e.query.toLowerCase())||a.code.toLowerCase().includes(e.query.toLowerCase())):this.filteredAccountHargaJual=[...this.lAccountHargaJual]},250)},selectAccountHargaJual(e){this.produk.id_account_harga_jual=e.value.id,this.produk.account=e.value.name},searchAccountHargaBeli(e){setTimeout(()=>{e.query.trim().length?this.filteredAccountHargaBeli=this.lAccountHargaBeli.filter(a=>a.name.toLowerCase().includes(e.query.toLowerCase())||a.code.toLowerCase().includes(e.query.toLowerCase())):this.filteredAccountHargaBeli=[...this.lAccountHargaJual]},250)},selectAccountHargaBeli(e){this.produk.id_account_harga_beli=e.value.id,this.produk.account=e.value.name},handleUploadError(e){this.uploadErrorMessage=e},handleImagesUploaded(e){e.length<1&&(this.receivedImages=[],this.produk.image=null),this.receivedImages=e,this.produk.image=this.receivedImages[0].filename,this.produk.optional=this.receivedImages.map(a=>({image:a.filename}))},onCellBahanBakuEditComplete(e){let{data:a,newValue:r,field:y}=e;if(a.isNew=!1,this.produk.bahan_baku.every(t=>t.isNew!==!0),r!=""&&r!=0&&r!=null){switch(y){case"nama_produk":this.produk.bahan_baku.some(m=>m.id_barang==r.id)?this.$toast.add({severity:"error",summary:"Failed",detail:"Bahan baku tidak boleh sama",life:3e3}):(a.id_satuan=r.id_satuan,a.satuan=r.satuan,a.kode_barang=r.kode_barang,a.harga_beli=r.harga_beli,a.id_barang=r.id,a.nama_barang=r.nama_barang,a[y]=r.nama_produk);break;case"qty":a.qty=r;break;case"harga_beli":a[y]=r;break}this.produk.bahan_baku.every(o=>o.id_barang!=null)&&a.id_barang!=null&&a.qty>0&&this.produk.bahan_baku.push({id_barang:null,nama_barang:null,qty:null,satuan:null,harga_beli:null})}},onCellBiayaComplete(e){let{data:a,newValue:r,field:y}=e;if(a.isNew=!1,r!=""&&r!=0&&r!=null){switch(y){case"account":this.produk.biaya.some(m=>m.id_account==r.id)?this.$toast.add({severity:"error",summary:"Failed",detail:"Akun biaya tidak boleh sama",life:3e3}):(a.id_account=r.id,a.account=r.name,a.kode_barang=r.kode_barang,a[y]=r.name);break;case"biaya":a.biaya=r;break}this.produk.biaya.every(o=>o.id_account!=null)&&a.id_account!=null&&a.biaya>0&&this.produk.biaya.push({id_account:null,account:null,biaya:0})}},onCellEditComplete(e){let{data:a,newValue:r,field:y}=e;a.isNew=!1;let t=this.lSatuan.every(o=>o.isNew!==!0);if(r!=""&&r!=0&&r!=null){switch(y){case"id_satuan_kiri":a[y]=r.id,a.text_satuan_kiri=r.satuan;break;case"id_satuan_kanan":a[y]=r.id,a.text_satuan_kanan=r.satuan;break;case"konversi":a[y]=r;break}t&&a.id_satuan_kiri!=null&&a.id_satuan_kiri!=""&&a.id_satuan_kanan!=""&&a.id_satuan_kanan!=null&&a.konversi!=0&&this.lSatuan.push({id_satuan_kiri:"",text_satuan_kiri:"Satuan",konversi:"0",id_satuan_kanan:"",text_satuan_kanan:"Satuan",isNew:!0})}},selectKategoriProduk(e){this.produk.id_kategori=e.value.id},selectBrand(e){this.produk.id_brand=e.value.id},selectSatuan(e){this.produk.id_satuan=e.value.id},showHideTableSatuan(){this.showTableSatuan=!this.showTableSatuan},showHideHargaJual(){this.produk.is_dijual=!this.produk.is_dijual},showHideHargaBeli(){this.produk.is_dibeli=!this.produk.is_dibeli},showHideBundling(){this.showBundling=!this.showBundling},async getData(){W.index().then(e=>{this.lSatuan=e.data.data}).catch(()=>{}),await Y.indexByTransaction().then(e=>{this.lAccountHargaJual=e.data.data,this.lAccountHargaBeli=e.data.data}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}),await D.index().then(e=>{this.lProduk=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load data produk",life:3e3})})},async getOption(){await q.getKategoriProduk().then(e=>{this.optionKategoriProduk=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load data kategori produk",life:3e3})}),await q.getBrand().then(e=>{this.optionBrand=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load data brand",life:3e3})}),await q.getSatuan().then(e=>{this.optionSatuan=e.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Load data satuan",life:3e3})})},FormNew(){this.selectedBrand=null,this.selectedKategoriProduk=null,this.selectedSatuan=null,this.produk={},this.produk.is_stok=!0,this.produk.status=!0,this.lSatuan=[],this.isSubmitted=!1,this.produkDialog=!0,this.lSatuan.push(this.satuanEmpty),this.produk.bahan_baku=[],this.produk.bahan_baku.push(this.bahanBakuEmpty),this.produk.biaya=[],this.produk.biaya.push(this.biayaEmpty)},HideDialog(){this.produkDialog=!1,this.isSubmitted=!1},Save(){this.showTableSatuan||(this.lSatuan=[]),this.isSubmitted=!0,this.isLoading=!0,Z.parse(this.produk),this.produk.biaya=this.produk.biaya.filter(e=>e.id_account!=null&&e.id_account!=null),this.produk.bahan_baku=this.produk.bahan_baku.filter(e=>e.id_barang!=null&&e.id_barang!=null),this.lSatuan.length!=0?(this.lSatuanData=this.lSatuan.filter(e=>!e.isNew&&e.id_satuan_kiri!=null&&e.id_satuan_kanan!=null&&e.konversi!=0),this.produk.satuan_data=[],this.lSatuanData.forEach(e=>{let a={};e.id_satuan_kanan==this.produk.id_satuan?(a.id_satuan=parseInt(e.id_satuan_kiri),a.konversi=1/e.konversi):e.id_satuan_kiri==this.produk.id_satuan?(a.id_satuan=parseInt(e.id_satuan_kanan),a.konversi=parseFloat(e.konversi)):e.id_satuan_kiri==e.id_satuan_kanan?(this.isSubmitted=!1,this.$toast.add({severity:"error",summary:"Required",detail:"Konversi satuan kiri dan kanan harus berbeda",life:3e3})):(this.isSubmitted=!1,this.$toast.add({severity:"error",summary:"Required",detail:"Konversi satuan harus ada di satuan produk",life:3e3})),this.produk.satuan_data.push(a)})):this.produk.satuan_data=[],this.produk&&this.isSubmitted==!0&&(this.isEdit?D.update(this.produk.id,this.produk).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lProduk[this.lProduk.findIndex(a=>a.id==this.produk.id)]=this.produk,this.produk={},this.lSatuan.push(this.satuanEmpty),this.getData(),this.produkDialog=!1}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3}),this.FormError=e.format()}).finally(()=>{this.lSatuanData=[],this.isLoading=!1}):D.store(this.produk).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"produk Created",life:3e3}),this.lProduk.push(this.produk),this.produk={},this.lSatuan.push(this.satuanEmpty),this.getData(),this.produkDialog=!1}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3}),this.FormError=e.format()}).finally(()=>{this.isLoading=!1}),this.produk.biaya.push(this.biayaEmpty),this.produk.bahan_baku.push(this.bahanBakuEmpty),this.isSubmitted=!1)},FormEdit(e){this.isEdit=!0,this.produk={...e},this.selectedBrand=null,this.selectedKategoriProduk=null,this.selectedSatuan=null,this.selectedAccountHargaBeli=null,this.selectedAccountHargaJual=null,this.lSatuan=[],this.produk.id_brand!=null&&(this.selectedBrand=this.optionBrand.find(o=>o.id==this.produk.id_brand)),this.produk.id_kategori!=null&&(this.selectedKategoriProduk=this.optionKategoriProduk.find(o=>o.id==this.produk.id_kategori)),this.selectedAccountHargaBeli=this.lAccountHargaBeli.find(o=>o.id==this.produk.id_account_harga_beli),this.selectedAccountHargaJual=this.lAccountHargaJual.find(o=>o.id==this.produk.id_account_harga_jual),this.produk.id_satuan!=null&&(this.selectedSatuan=this.optionSatuan.find(o=>o.id==this.produk.id_satuan)),this.produk.nama_barang.trim()&&this.produk.id&&D.getSatuanBarang(this.produk.id).then(o=>{o.data.data.length!=0?(this.showTableSatuan=!0,o.data.data.forEach(m=>{let p={};if(m.konversi<1&&m.konversi>0){let x=this.optionSatuan.find(B=>B.id==m.id_satuan_kanan),H=this.optionSatuan.find(B=>B.id==this.produk.id_satuan);p.id_satuan_kiri=m.id_satuan_kiri,p.text_satuan_kiri=x.satuan,p.id_satuan_kanan=m.id_satuan_kanan,p.text_satuan_kanan=H.satuan,p.konversi=1/m.konversi}else{let x=this.optionSatuan.find(B=>B.id==m.id_satuan_kiri),H=this.optionSatuan.find(B=>B.id==m.id_satuan_kanan);p.id_satuan_kiri=m.id_satuan_kiri,p.text_satuan_kiri=x.satuan,p.id_satuan_kanan=m.id_satuan_kanan,p.text_satuan_kanan=H.satuan,p.konversi=m.konversi}this.lSatuan.push(p)})):(this.showTableSatuan=!1,this.lSatuan=[]),this.lSatuan.push(this.satuanEmpty)}),this.produk.bahan_baku=this.produk.bahan_baku||[];let a=this.produk.bahan_baku.length===0;this.produk.bahan_baku.forEach(o=>{if(o.id_barang){let m=this.lProduk.find(p=>p.id===o.id_barang);m&&(o.nama_barang=m.nama_barang,o.satuan=m.satuan,o.kode_barang=m.kode_barang,a=!1)}}),(this.produk.bahan_baku.every(o=>o.id_barang!=null)||a)&&this.produk.bahan_baku.push(this.bahanBakuEmpty),this.produk.biaya=this.produk.biaya||[];let y=this.produk.biaya.length===0;this.produk.biaya.forEach(o=>{if(o.id_account){let m=this.lAccountHargaBeli.find(p=>p.id===o.id_account);m&&(o.account=m.name,y=!1)}}),(this.produk.biaya.every(o=>o.id_account!=null)||y)&&this.produk.biaya.push(this.biayaEmpty),this.produkDialog=!0},confirmDelete(e){this.produk=e,this.deleteProdukDialog=!0},Destroy(){this.deleteProdukDialog=!1,D.destroy(this.produk.id).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lProduk=this.lProduk.filter(a=>a.id!==this.produk.id)}).catch(e=>{this.$toast.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3})}).finally(()=>{this.getData()}),this.produk={}},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:X.CONTAINS}}},onRowEditSave(e){let{newData:a,index:r}=e;this.produk[r]=a},removeSatuan(e){this.lSatuan.length>1&&(this.lSatuan=this.lSatuan.filter(a=>a!==e))},removeBahanBaku(e){this.produk.bahan_baku.length>1&&(this.produk.bahan_baku=this.produk.bahan_baku.filter(a=>a!==e))},removeBiaya(e){this.produk.biaya.length>1&&(this.produk.biaya=this.produk.biaya.filter(a=>a!==e))}}},_=e=>(G("data-v-2cfa1f3a"),e=e(),Q(),e),ee={class:"grid crud-demo"},ae={class:"col-12"},te={class:"card"},ie={class:"my-2"},le={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},oe=_(()=>l("h5",{class:"m-0"},"Produk/Jasa",-1)),se={class:"block mt-2 md:mt-0 p-input-icon-left"},ne=_(()=>l("i",{class:"pi pi-search"},null,-1)),ue=_(()=>l("hr",null,null,-1)),re=_(()=>l("div",{class:"text-center"},"Produk is Empty",-1)),de=_(()=>l("hr",null,null,-1)),ce={key:0},he={key:1},pe={key:2},ke={class:"formgrid grid"},me={class:"field col-12 d-flex justifiy-content-center align-items-end"},_e=_(()=>l("label",{for:"nama_barang"},"Nama ",-1)),be={key:0,class:"p-invalid"},ge={class:"field col-6 d-flex justifiy-content-center align-items-end"},fe=_(()=>l("label",{for:"id"},"Kode Produk",-1)),ye={key:0,class:"p-invalid"},ve={class:"field col-6 d-flex justifiy-content-center align-items-end"},Se=_(()=>l("label",{for:"nama_barang"},"Barcode",-1)),we={key:0,class:"p-invalid"},Be={class:"field col-6 d-flex justifiy-content-center align-items-end"},Ce=_(()=>l("label",{for:"inventoryStatus",class:"mb-2"},"Kategori Produk",-1)),Ve={class:"field col-6 d-flex justifiy-content-center align-items-end"},Pe=_(()=>l("label",{for:"inventoryStatus",class:"mb-2"},"Brand",-1)),xe={class:"field col-11 d-flex justifiy-content-center align-items-end"},He=_(()=>l("label",{required:"true",for:"inventoryStatus",class:"mb-2"},"Satuan Produk",-1)),Ae={class:"field col-1 pr-0 grid justifiy-content-center align-items-end"},De={class:""},Ee={class:"field col-12"},Ue={class:"col-6"},Le={class:""},Te=_(()=>l("span",{id:"switch1",style:{position:"relative",bottom:"8px",left:"8px"}},"Lacak Persediaan Stok",-1)),Ne={class:"field col-auto ml-3 mb-5"},Ke={class:""},qe={class:"field col-auto ml-3"},Fe={class:""},Ie={class:"grid d-flex justifiy-content-center align-items-end"},Je={class:"field col-4"},je=_(()=>l("label",{for:"name"},"Harga Beli",-1)),Me={key:0,class:"field col-4"},Re=_(()=>l("label",{for:"name"},"Akun Beli",-1)),Oe={class:"grid d-flex justifiy-content-center align-items-end"},ze={class:"field col-4"},Ye=_(()=>l("label",{for:"name"},"Harga Jual",-1)),Xe={class:"field col-12"},Ge=_(()=>l("label",{for:"description"},"Deskripsi",-1)),Qe={class:"col-6"},We={class:""},Ze=_(()=>l("span",{id:"switch2",style:{position:"relative",bottom:"8px",left:"8px"}},"Aktif",-1)),$e={class:"col-6"},ea={class:""},aa=_(()=>l("span",{id:"switch1",style:{position:"relative",bottom:"8px",left:"8px"}},"Bundling",-1)),ta=_(()=>l("hr",null,null,-1)),ia=_(()=>l("p",null,"Bahan Baku",-1)),la={key:0,class:"flex flex-column"},oa={class:"text-green-500"},sa={class:"flex flex-column"},na={class:""},ua=_(()=>l("hr",null,null,-1)),ra=_(()=>l("p",null,"Biaya",-1)),da={class:"flex align-items-center justify-content-center"},ca=_(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ha={key:0},pa={class:"flex align-items-center justify-content-center"},ka=_(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ma={key:0};function _a(e,a,r,y,t,o){const m=f("Toast"),p=f("Button"),x=f("MyExport"),H=f("Toolbar"),B=f("MultiSelect"),C=f("InputText"),V=f("Column"),j=f("ActionButton"),E=f("DataTable"),A=f("Dropdown"),M=f("ErrorMsg"),T=f("InputSwitch"),U=f("InputNumber"),N=f("AutoComplete"),R=f("Textarea"),F=f("TabPanel"),O=f("TabView"),K=f("Dialog");return d(),g("div",ee,[l("div",ae,[l("div",te,[n(m),n(H,{class:"mb-4"},{start:c(()=>[l("div",ie,[n(p,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2",onClick:o.FormNew},null,8,["onClick"])])]),end:c(()=>[n(x,{value:t.lProduk,selectedColumns:t.selectedColumns,title:"Export Produk"},null,8,["value","selectedColumns"])]),_:1}),n(E,{ref:"dt",value:t.lProduk,selection:t.selectedProduk,"onUpdate:selection":a[2]||(a[2]=i=>t.selectedProduk=i),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} lProduk",responsiveLayout:"scroll"},{header:c(()=>[l("div",le,[oe,n(B,{modelValue:t.selectedColumns,"onUpdate:modelValue":a[0]||(a[0]=i=>t.selectedColumns=i),options:t.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-full md:w-20rem ml-auto"},null,8,["modelValue","options"]),l("span",se,[ne,n(C,{modelValue:t.filters.global.value,"onUpdate:modelValue":a[1]||(a[1]=i=>t.filters.global.value=i),placeholder:"Search..."},null,8,["modelValue"])])])]),empty:c(()=>[ue,re,de]),default:c(()=>[n(V,{header:"#",headerStyle:"width:10px"},{body:c(i=>[w(b(i.index+1),1)]),_:1}),(d(!0),g(P,null,L(t.selectedColumns,(i,u)=>(d(),S(V,{field:i.field,header:i.header,class:v(i.class),key:i.field+"_"+u,sortable:!0},{body:c(({data:s,field:h})=>[i.type=="date"?(d(),g("div",ce,b(e.$h.formatDate(s[h])),1)):k("",!0),i.type=="number"&&s[h]>0?(d(),g("div",he,b(e.$h.formatNumber(s[h])),1)):k("",!0),i.type!="number"?(d(),g("div",pe,b(s[h]),1)):k("",!0)]),_:2},1032,["field","header","class"]))),128)),n(V,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:c(({data:i,index:u})=>[n(j,{data:i,index:u,onEdit:s=>o.FormEdit(i),onDelete:s=>o.confirmDelete(i)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),n(K,{visible:t.produkDialog,"onUpdate:visible":a[16]||(a[16]=i=>t.produkDialog=i),style:{width:"720px"},header:"Produk Details",modal:!0,class:"p-fluid"},{footer:c(()=>[n(p,{label:"Batal",icon:"pi pi-times",class:"p-button-text",onClick:o.HideDialog},null,8,["onClick"]),n(p,{label:"Simpan",icon:"pi pi-check",class:"p-button-text",onClick:o.Save},null,8,["onClick"])]),default:c(()=>[n(O,null,{default:c(()=>[n(F,{header:"Informasi Produk"},{default:c(()=>[l("div",ke,[l("div",me,[_e,n(C,{id:"nama_barang",modelValue:t.produk.nama_barang,"onUpdate:modelValue":a[3]||(a[3]=i=>t.produk.nama_barang=i),modelModifiers:{trim:!0},required:"true",class:v({"p-invalid":t.isSubmitted&&!t.produk.nama_barang})},null,8,["modelValue","class"]),t.isSubmitted&&!t.produk.nama_barang?(d(),g("small",be,"Name is required.")):k("",!0)]),l("div",ge,[fe,n(C,{id:"id",modelValue:t.produk.kode_barang,"onUpdate:modelValue":a[4]||(a[4]=i=>t.produk.kode_barang=i),modelModifiers:{trim:!0},required:"true",autofocus:"",class:v({"p-invalid":t.isSubmitted&&!t.produk.kode_barang})},null,8,["modelValue","class"]),t.isSubmitted&&!t.produk.kode_barang?(d(),g("small",ye,"Kode Produk is required.")):k("",!0)]),l("div",ve,[Se,n(C,{id:"nama_barang",modelValue:t.produk.barcode,"onUpdate:modelValue":a[5]||(a[5]=i=>t.produk.barcode=i),modelModifiers:{trim:!0},required:"true",class:v({"p-invalid":t.isSubmitted&&!t.produk.barcode})},null,8,["modelValue","class"]),t.isSubmitted&&!t.produk.barcode?(d(),g("small",we,"Name is required.")):k("",!0)]),l("div",Be,[Ce,n(A,{modelValue:t.selectedKategoriProduk,"onUpdate:modelValue":a[6]||(a[6]=i=>t.selectedKategoriProduk=i),onChange:o.selectKategoriProduk,options:t.optionKategoriProduk,optionLabel:"kategori_barang",placeholder:"Pilih Kategori"},null,8,["modelValue","onChange","options"])]),l("div",Ve,[Pe,n(A,{modelValue:t.selectedBrand,"onUpdate:modelValue":a[7]||(a[7]=i=>t.selectedBrand=i),onChange:o.selectBrand,options:t.optionBrand,optionLabel:"brand",placeholder:"Pilih Brand"},null,8,["modelValue","onChange","options"])]),l("div",xe,[He,n(A,{modelValue:t.selectedSatuan,"onUpdate:modelValue":a[8]||(a[8]=i=>t.selectedSatuan=i),class:v({"p-invalid":t.isSubmitted&&!t.produk.id_satuan}),onChange:o.selectSatuan,options:t.optionSatuan,optionLabel:"satuan",placeholder:"Pilih Satuan",required:"true"},null,8,["modelValue","class","onChange","options"]),n(M,{error:t.FormError.id_satuan},null,8,["error"])]),l("div",Ae,[l("div",De,[n(p,{icon:"pi pi-box",class:v(["p-button",{"p-button-block":t.showTableSatuan,"p-button-outlined":!t.showTableSatuan}]),onClick:o.showHideTableSatuan},null,8,["onClick","class"])])]),l("div",{class:v(["col-12",{hidden:!t.showTableSatuan}])},[n(E,{value:t.lSatuan,editMode:"cell",onCellEditComplete:o.onCellEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"width:100%"},{default:c(()=>[(d(!0),g(P,null,L(t.columns,i=>(d(),S(V,{key:i.field,field:i.field,header:i.header,style:{width:"25%"}},{body:c(({data:u,field:s})=>[s=="id_satuan_kiri"?(d(),S(C,{key:0,modelValue:u.text_satuan_kiri,"onUpdate:modelValue":h=>u.text_satuan_kiri=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),s=="id_satuan_kanan"?(d(),S(C,{key:1,modelValue:u.text_satuan_kanan,"onUpdate:modelValue":h=>u.text_satuan_kanan=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),s=="konversi"?(d(),S(C,{key:2,modelValue:u.konversi,"onUpdate:modelValue":h=>u.konversi=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]),editor:c(({data:u,field:s})=>[s=="id_satuan_kiri"?(d(),S(A,{key:0,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,options:t.optionSatuan,optionLabel:"satuan",placeholder:"Satuan"},null,8,["modelValue","onUpdate:modelValue","options"])):k("",!0),s=="id_satuan_kanan"?(d(),S(A,{key:1,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,options:t.optionSatuan,optionLabel:"satuan",placeholder:"Satuan"},null,8,["modelValue","onUpdate:modelValue","options"])):k("",!0),s=="konversi"?(d(),S(C,{key:2,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["field","header"]))),128)),n(V,{header:"#",headerStyle:"width:10%;"},{body:c(({data:i})=>[n(p,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:u=>o.removeSatuan(i)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete"])],2),l("div",Ee,[l("div",Ue,[l("div",Le,[n(T,{modelValue:t.produk.is_stok,"onUpdate:modelValue":a[9]||(a[9]=i=>t.produk.is_stok=i),"aria-labelledby":"switch1",binary:!0},null,8,["modelValue"]),Te])])]),l("div",Ne,[l("div",Ke,[n(p,{icon:"pi pi-tag",class:v(["p-button",{"p-button-block":t.produk.is_dibeli,"p-button-outlined":!t.produk.is_dibeli}]),label:"Dibeli",onClick:o.showHideHargaBeli},null,8,["onClick","class"])])]),l("div",qe,[l("div",Fe,[n(p,{icon:"pi pi-tags",class:v(["p-button",{"p-button-block":t.produk.is_dijual,"p-button-outlined":!t.produk.is_dijual}]),label:"Dijual",value:"Harga Jual",onClick:o.showHideHargaJual},null,8,["onClick","class"])])]),l("div",{class:v(["col-12 mb-3",{hidden:!t.produk.is_dibeli}])},[l("div",Ie,[l("div",Je,[je,n(U,{modelValue:t.produk.harga_beli,"onUpdate:modelValue":a[10]||(a[10]=i=>t.produk.harga_beli=i),modelModifiers:{number:!0},inputId:"integeronly"},null,8,["modelValue"])]),t.produk.is_dibeli&&!t.produk.is_stok?(d(),g("div",Me,[Re,n(N,{modelValue:t.selectedAccountHargaBeli,"onUpdate:modelValue":a[11]||(a[11]=i=>t.selectedAccountHargaBeli=i),optionLabel:"name",suggestions:t.filteredAccountHargaBeli,onComplete:o.searchAccountHargaBeli,onItemSelect:o.selectAccountHargaBeli,class:v({"p-invalid":t.isSubmitted&&!e.item.account}),dropdown:""},{option:c(i=>[l("tr",null,[l("td",null,"["+b(i.option.code)+"]",1),l("td",null,b(i.option.name),1)])]),_:1},8,["modelValue","suggestions","onComplete","onItemSelect","class"])])):k("",!0)])],2),l("div",{class:v(["col-12 mb-3",{hidden:!t.produk.is_dijual}])},[l("div",Oe,[l("div",ze,[Ye,n(U,{modelValue:t.produk.harga_jual,"onUpdate:modelValue":a[12]||(a[12]=i=>t.produk.harga_jual=i),modelModifiers:{number:!0},inputId:"integeronly"},null,8,["modelValue"])])])],2),l("div",Xe,[Ge,n(R,{id:"description",modelValue:t.produk.keterangan,"onUpdate:modelValue":a[13]||(a[13]=i=>t.produk.keterangan=i),modelModifiers:{trim:!0},required:"true",rows:"3"},null,8,["modelValue"])]),l("div",Qe,[l("div",We,[n(T,{modelValue:t.produk.status,"onUpdate:modelValue":a[14]||(a[14]=i=>t.produk.status=i),"aria-labelledby":"switch2",binary:!0},null,8,["modelValue"]),Ze])])])]),_:1}),n(F,{header:"Bundling"},{default:c(()=>[l("div",$e,[l("div",ea,[n(T,{modelValue:t.produk.is_bundling,"onUpdate:modelValue":a[15]||(a[15]=i=>t.produk.is_bundling=i),"aria-labelledby":"switch1",binary:!0},null,8,["modelValue"]),aa])]),ta,ia,l("div",{class:v(["col-12",{hidden:!t.produk.is_bundling}])},[n(E,{value:t.produk.bahan_baku,editMode:"cell",onCellEditComplete:o.onCellBahanBakuEditComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"width:100%"},{default:c(()=>[(d(!0),g(P,null,L(t.columnsBahanBaku,i=>(d(),S(V,{key:i.field,field:i.field,header:i.header,style:{width:"25%"}},I({body:c(({data:u,field:s})=>[s=="nama_produk"?(d(),g("span",la,[l("small",oa,b(u.kode_barang),1),l("span",null,b(u.nama_barang),1)])):k("",!0),s=="qty"&&u[s]>0?(d(),g(P,{key:1},[w(b(e.$h.formatNumber(u[s])),1)],64)):k("",!0),s=="satuan"?(d(),g(P,{key:2},[w(b(u.satuan),1)],64)):k("",!0),s=="harga_beli"&&u[s]>0?(d(),g(P,{key:3},[w(b(e.$h.formatNumber(u[s])),1)],64)):k("",!0)]),editor:c(({data:u,field:s})=>[s=="nama_produk"?(d(),S(N,{key:0,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,suggestions:t.filteredlProduk,optionLabel:"nama_barang",virtualScrollerOptions:{itemSize:50},onComplete:o.searchProduk,class:"min-w-max",dropdown:"",onDropdownClick:o.searchAllProduk},{option:c(h=>[l("div",sa,[l("small",{class:v(h.option.is_stok?"text-green-500":"text-blue-500")},b(h.option.kode_barang),3),l("div",na,b(h.option.nama_barang),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","suggestions","onComplete","onDropdownClick"])):k("",!0),s=="qty"?(d(),S(C,{key:1,modelValue:u.qty,"onUpdate:modelValue":h=>u.qty=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),s=="harga_beli"?(d(),S(U,{key:2,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},[i.field=="harga_beli"?{name:"footer",fn:c(()=>[w(b(e.$h.formatNumber(this.totalBahanBaku)),1)]),key:"0"}:void 0]),1032,["field","header"]))),128)),n(V,{header:"#",headerStyle:"width:10%;"},{body:c(({data:i})=>[n(p,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:u=>o.removeBahanBaku(i)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete"]),ua,ra,n(E,{value:t.produk.biaya,class:"mt-5",editMode:"cell",onCellEditComplete:o.onCellBiayaComplete,tableClass:"editable-cells-table p-datatable-small",tableStyle:"width:100%"},{default:c(()=>[(d(!0),g(P,null,L(t.columnsBiaya,i=>(d(),S(V,{key:i.field,field:i.field,header:i.header,style:{width:"25%"}},I({body:c(({data:u,field:s})=>[s=="account"?(d(),g(P,{key:0},[w(b(u.account),1)],64)):k("",!0),s=="biaya"&&u[s]>0?(d(),g(P,{key:1},[w(b(e.$h.formatNumber(u[s])),1)],64)):k("",!0)]),editor:c(({data:u,field:s})=>[s=="account"?(d(),S(N,{key:0,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,optionLabel:"name",suggestions:t.filteredAccountHargaJual,onComplete:o.searchAccountHargaJual,class:v({"p-invalid":t.isSubmitted&&!e.item.account}),dropdown:""},{option:c(h=>[l("tr",null,[l("td",null,"["+b(h.option.code)+"]",1),l("td",null,b(h.option.name),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","suggestions","onComplete","class"])):k("",!0),s=="biaya"?(d(),S(U,{key:1,modelValue:u[s],"onUpdate:modelValue":h=>u[s]=h,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},[i.field=="biaya"?{name:"footer",fn:c(()=>[w(b(e.$h.formatNumber(this.totalBiaya)),1)]),key:"0"}:void 0]),1032,["field","header"]))),128)),n(V,{header:"#",headerStyle:"width:10%;"},{body:c(({data:i})=>[n(p,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:u=>o.removeBiaya(i)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete"]),l("h3",null,b(e.$h.formatNumber(o.totalKeseluruhan)),1)],2)]),_:1})]),_:1})]),_:1},8,["visible"]),n(K,{visible:t.deleteProdukDialog,"onUpdate:visible":a[18]||(a[18]=i=>t.deleteProdukDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:c(()=>[n(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[17]||(a[17]=i=>t.deleteProdukDialog=!1)}),n(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:o.Destroy},null,8,["onClick"])]),default:c(()=>[l("div",da,[ca,t.produk?(d(),g("span",ha,[w("Are you sure you want to delete "),l("b",null,b(t.produk.nama_barang),1),w("?")])):k("",!0)])]),_:1},8,["visible"]),n(K,{visible:t.deleteSelectedProdukDialog,"onUpdate:visible":a[20]||(a[20]=i=>t.deleteSelectedProdukDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:c(()=>[n(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[19]||(a[19]=i=>t.deleteProdukDialog=!1)}),n(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:e.deleteSelectedProduk},null,8,["onClick"])]),default:c(()=>[l("div",pa,[ka,t.produk?(d(),g("span",ma,"Are you sure you want to delete the selected produks?")):k("",!0)])]),_:1},8,["visible"])])])])}const Sa=z($,[["render",_a],["__scopeId","data-v-2cfa1f3a"]]);export{Sa as default};
