import{_ as P,F as I,r as n,o as r,c,b as t,d as a,e as i,n as g,l as b,t as h,m as A,q as N,k as v,f as x}from"./index-11eb6111.js";import{a as D}from"./api-d111cd5a.js";import{_ as U}from"./data-empty-73bd2e8a.js";const B={data(){return{lItem:[],item:{id:null,date:null,gl_number:null,akun:null,nama_akun:null,description:null,total:null,kepada:null,type:null,status:null},lAkun:[],selectedAkun:null,selectedColumns:[{field:"gl_date",header:"Tanggal",type:"date"},{field:"gl_number",header:"Nomor"},{field:"note",header:"Deskripsi"},{field:"is_posting",header:"Status"}],Columns:[{field:"date",header:"Tanggal"},{field:"gl_number",header:"Nomor"},{field:"note",header:"Deskripsi"},{field:"is_posting",header:"Status"}],deleteDialog:!1,periodeawal:null,periodeakhir:null,product:{},filter:!1,filters:{},f:{awal:null,akhir:null,selectedStatus:{label:"All",value:""}},statuses:[{label:"All",value:""},{label:"Draft",value:"D"},{label:"Close",value:"C"}]}},productService:null,created(){this.initFilters()},mounted(){this.getData()},computed:{filteredItems:function(){return this.lItem.filter(l=>(this.f.awal==null?!0:this.f.awal.toLocaleDateString()<=new Date(l.gl_date).toLocaleDateString())&&(this.f.akhir==null?!0:this.f.akhir.toLocaleDateString()>=new Date(l.gl_date).toLocaleDateString()))}},methods:{async getData(){await D.index("O").then(l=>{this.lItem=l.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Load data kas",life:3e3})}),await apiAkun.indexByCashable().then(l=>{this.lAkun=l.data.data}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Load data akun",life:3e3})})},Destroy(l){this.deleteDialog=!1,D.destroy(l.gl_number).then(s=>{this.$toast.add({severity:"success",summary:"Successful",detail:s.data.message,life:3e3}),this.lItem=this.lItem.filter(y=>y.gl_number!==l.gl_number),this.item={}}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Failed Delete data kas",life:3e3})})},FormDelete(l){this.deleteDialog=!0,this.item={...l}},FormEdit(l){this.$router.push({name:"jurnal-umum.edit",params:{gl_number:l.gl_number}})},exportCSV(){this.$refs.dt.exportCSV()},showHideFilter(){this.filter=!this.filter},initFilters(){this.filters={global:{value:null,matchMode:I.CONTAINS}}}}},j={class:"grid crud-demo"},E={class:"col-12"},J={class:"card"},R={class:"my-2"},M=t("h5",{class:"mbe-4"},"Pencarian Jurnal Umum",-1),O={class:"p-fluid formgrid grid"},z={class:"field col-2"},H={class:"p-float-label"},X=t("p",{class:"mb-1"},"Periode Awal",-1),q={class:"field col-2"},K={class:"p-float-label"},Y=t("p",{class:"mb-1"},"Periode Akhir",-1),G={class:"flex flex-column gap-2 md:gap-0 md:flex-row md:justify-content-between md:align-items-center"},Q=t("h5",null,"Jurnal Umum",-1),W={class:"block p-input-icon-left"},Z=t("i",{class:"pi pi-search"},null,-1),$=t("div",{class:"flex flex-column gap-2 justify-content-center align-items-center"},[t("div",{class:"text-4xl"},"Loading...")],-1),ee=t("div",{class:"flex flex-column gap-2 justify-content-center align-items-center"},[t("img",{src:U,alt:"",style:{width:"300px"}}),t("div",{class:"text-4xl"},"Belum ada data.")],-1),te={key:0},le={key:1},se={key:2},ae={key:3,class:"text-right"},oe={key:4},ie={class:"flex align-items-center justify-content-center"},ne=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),re={key:0};function de(l,s,y,ue,o,m){const w=n("Toast"),d=n("Button"),C=n("router-link"),F=n("Toolbar"),k=n("Calendar"),S=n("InputText"),f=n("Column"),L=n("Tag"),T=n("DataTable"),V=n("Dialog");return r(),c("div",j,[t("div",E,[t("div",J,[a(w),a(F,{class:"mb-4"},{start:i(()=>[t("div",R,[a(C,{to:"/jurnal-umum/create",class:"btn btn-added me-2"},{default:i(()=>[a(d,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})]),a(d,{icon:"pi pi-filter",label:"Filter",class:g(["p-button mx-2",{"p-button-block":o.filter,"p-button-outlined":!o.filter}]),onClick:m.showHideFilter},null,8,["onClick","class"])]),end:i(()=>[a(d,{label:"Export XLSX",icon:"pi pi-upload",class:"p-button-help w-max",onClick:s[0]||(s[0]=e=>m.exportCSV(e))})]),_:1}),t("div",{class:g(["card fadein",{hidden:!o.filter}])},[M,t("div",O,[t("div",z,[t("span",H,[X,a(k,{dateFormat:"dd-mm-yy",modelValue:o.f.awal,"onUpdate:modelValue":s[1]||(s[1]=e=>o.f.awal=e),inputId:"f.awal"},null,8,["modelValue"])])]),t("div",q,[t("span",K,[Y,a(k,{dateFormat:"dd-mm-yy",modelValue:o.f.akhir,"onUpdate:modelValue":s[2]||(s[2]=e=>o.f.akhir=e),inputId:"f.akhir"},null,8,["modelValue"])])])])],2),a(T,{ref:"dt",value:m.filteredItems,selection:l.selectedItem,"onUpdate:selection":s[4]||(s[4]=e=>l.selectedItem=e),dataKey:"id",paginator:!0,rows:10,filters:o.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Jurnal Umum",responsiveLayout:"scroll",tableStyle:"table-layout:auto"},{header:i(()=>[t("div",G,[Q,t("span",W,[Z,a(S,{modelValue:o.filters.global.value,"onUpdate:modelValue":s[3]||(s[3]=e=>o.filters.global.value=e),placeholder:"Search...",class:"w-full"},null,8,["modelValue"])])])]),loading:i(()=>[$]),empty:i(()=>[ee]),default:i(()=>[a(f,{header:"#",headerStyle:"width:10px"},{body:i(e=>[b(h(e.index+1),1)]),_:1}),(r(!0),c(A,null,N(o.selectedColumns,(e,_)=>(r(),v(f,{field:e.field,header:e.header,class:g(e.class),key:e.field+"_"+_,sortable:!0},{body:i(({data:p,field:u})=>[u=="icon"?(r(),c("div",te,[a(d,{icon:p[u],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):u=="is_posting"?(r(),c("div",le,[a(L,{value:l.$h.getLabel(p[u]),severity:l.$h.getLabel(p[u])},null,8,["value","severity"])])):e.type=="date"?(r(),c("div",se,h(l.$h.formatDate(p[u])),1)):e.type=="currency"?(r(),c("div",ae,h(l.$h.formatNumber(p[u])),1)):(r(),c("div",oe,h(p[u]),1))]),_:2},1032,["field","header","class"]))),128)),a(f,{header:"Action"},{body:i(({data:e})=>[a(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning mr-2",onClick:_=>m.FormEdit(e)},null,8,["onClick"]),e.is_posting==!1?(r(),v(d,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:_=>m.FormDelete(e)},null,8,["onClick"])):x("",!0)]),_:1})]),_:1},8,["value","selection","filters"]),a(V,{visible:o.deleteDialog,"onUpdate:visible":s[7]||(s[7]=e=>o.deleteDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[a(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[5]||(s[5]=e=>o.deleteDialog=!1)}),a(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:s[6]||(s[6]=e=>m.Destroy(o.item))})]),default:i(()=>[t("div",ie,[ne,o.item?(r(),c("span",re,[b("Are you sure you want to delete "),t("b",null,h(o.item.nomor),1),b("?")])):x("",!0)])]),_:1},8,["visible"])])])])}const he=P(B,[["render",de]]);export{he as default};
