import{_ as j,Z as y,F as L,r,o as f,c as k,b as o,d as a,e as s,l as c,t as m,k as I,f as _,n as g,p as T,g as q}from"./index-11eb6111.js";import{a as H}from"./options-b2eb7ae6.js";const U={data(){return{lKantor:null,kantor:{},selectedlKantor:null,filters:{},lAccountHutang:null,lAccountPiutang:null,lAccountPenjualan:null,selectedAccountHutang:null,selectedAccountPiutang:null,selectedAccountPenjualan:null,filteredAccountHutang:{},filteredAccountPiutang:{},filteredAccountPenjualan:{},kantorDialog:!1,deletekantorDialog:!1,deletelKantorDialog:!1,isSubmitted:!1}},created(){this.initFilters()},mounted(){this.getData()},methods:{getData(){y.index().then(l=>{this.lKantor=l.data.data}),H.getAccountByLevel(4).then(l=>{this.lAccountHutang=l.data.data,this.lAccountPiutang=l.data.data,this.lAccountPenjualan=l.data.data})},FormNew(){this.kantor={},this.isSubmitted=!1,this.kantorDialog=!0,this.kantor.is_aktif=!0,this.selectedAccountHutang=null,this.selectedAccountPiutang=null,this.selectedAccountPenjualan=null},HideDialog(){this.kantorDialog=!1,this.isSubmitted=!1},saveKantor(){this.isSubmitted=!0,this.kantor.numbercode.trim()&&(this.kantor.id?(y.update(this.kantor.id,this.kantor).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"kantor Updated",life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Falied",detail:"kantor gagal di update",life:3e3})}),this.lKantor[this.findIndexById(this.kantor.id)]=this.kantor):(this.kantor.id=this.createId(),console.log(this.kantor),y.store(this.kantor).then(()=>{}).finally(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"kantor Created",life:3e3})}),this.lKantor.push(this.kantor)),this.kantorDialog=!1,this.kantor={}),this.getData()},submitForm(l){this.kantor={...l},this.kantor.account_penjualan!=null&&(this.selectedAccountPenjualan=this.lAccountPenjualan.find(t=>t.id==this.kantor.account_penjualan)),this.kantor.account_hutang!=null&&(this.selectedAccountHutang=this.lAccountHutang.find(t=>t.id==this.kantor.account_hutang)),this.kantor.account_piutang!=null&&(this.selectedAccountPiutang=this.lAccountPiutang.find(t=>t.id==this.kantor.account_piutang)),this.kantorDialog=!0},confirmDeleteKantor(l){this.kantor=l,this.deletekantorDialog=!0},deleteKantor(){this.lKantor=this.lKantor.filter(l=>l.id!==this.kantor.id),this.deletekantorDialog=!1,y.destroy(this.kantor.id).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"Kantor Deleted",life:3e3})}).catch(()=>{this.$toast.add({severity:"error",summary:"Failed",detail:"Kantor Gagal di hapus",life:3e3})}),this.kantor={}},findIndexById(l){let t=-1;for(let h=0;h<this.lKantor.length;h++)if(this.lKantor[h].id===l){t=h;break}return t},createId(){let l=0;return this.lKantor.length==0?l=1:l=this.lKantor.reduce((h,v)=>h.id>v.id?h:v).id+1,l},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deletelKantorDialog=!0},deleteSelectedKantor(){this.lKantor=this.lKantor.filter(l=>!this.selectedlKantor.includes(l)),this.deletelKantorDialog=!1,this.selectedlKantor=null,this.$toast.add({severity:"success",summary:"Successful",detail:"lKantor Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:L.CONTAINS}}},searchHutang(l){setTimeout(()=>{l.query.trim().length?this.filteredAccountHutang=this.lAccountHutang.filter(t=>t.code.toLowerCase().includes(l.query.toLowerCase())||t.name.toLowerCase().includes(l.query.toLowerCase())):this.filteredAccountHutang=[...this.lAccountHutang]},250)},searchPiutang(l){setTimeout(()=>{l.query.trim().length?this.filteredAccountPiutang=this.lAccountPiutang.filter(t=>t.code.toLowerCase().includes(l.query.toLowerCase())||t.name.toLowerCase().includes(l.query.toLowerCase())):this.filteredAccountPiutang=[...this.lAccountPiutang]},250)},searchPenjualan(l){setTimeout(()=>{l.query.trim().length?this.filteredAccountPenjualan=this.lAccountPenjualan.filter(t=>(console.log(t," akun penjualannn"),t.code.toLowerCase().includes(l.query.toLowerCase())||t.name.toLowerCase().includes(l.query.toLowerCase()))):this.filteredAccountPenjualan=[...this.lAccountPenjualan]},250)},selectHutang(l){this.kantor.account_hutang=l.value.id},selectPiutang(l){this.kantor.account_piutang=l.value.id},selectPenjualan(l){this.kantor.account_penjualan=l.value.id}}},i=l=>(T("data-v-59859ddb"),l=l(),q(),l),F={class:"grid crud-demo"},N={class:"col-12"},M={class:"card"},B={class:"my-2"},E={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},z=i(()=>o("h5",{class:"m-0"},"Manage Kantor",-1)),O={class:"block mt-2 md:mt-0 p-input-icon-left"},R=i(()=>o("i",{class:"pi pi-search"},null,-1)),Y=i(()=>o("span",{class:"p-column-title"},"Kode",-1)),G=i(()=>o("span",{class:"p-column-title"},"kantor",-1)),Z=i(()=>o("span",{class:"p-column-title"},"Alamat",-1)),J=i(()=>o("span",{class:"p-column-title"},"Telepon",-1)),Q=i(()=>o("span",{class:"p-column-title"},"Email",-1)),W=i(()=>o("span",{class:"p-column-title"},"Akun Penjualan",-1)),X=i(()=>o("span",{class:"p-column-title"},"Akun Hutang",-1)),$=i(()=>o("span",{class:"p-column-title"},"Akun Piutang",-1)),ee={class:"formgrid grid"},te={class:"field col-4"},le=i(()=>o("label",{for:"numbercode"},"Kode",-1)),ne={key:0,class:"p-invalid"},oe={class:"field col-8"},ae=i(()=>o("label",{for:"nama"},"Kantor",-1)),ie={key:0,class:"p-invalid"},se={class:"field col-4"},re=i(()=>o("label",{for:"accountpenjualan",class:"mb-2"},"Akun Penjualan",-1)),ue={class:"field col-4"},de=i(()=>o("label",{for:"accounthutang",class:"mb-2"},"Akun Hutang",-1)),ce={class:"field col-4"},me=i(()=>o("label",{for:"accountpiutang",class:"mb-2"},"Akun Piutang",-1)),he={class:"field col-6 d-flex justifiy-content-center align-items-end"},pe=i(()=>o("label",{for:"telepon"},"Telepon",-1)),fe={key:0,class:"p-invalid"},ke={class:"field col-6 d-flex justifiy-content-center align-items-end"},_e=i(()=>o("label",{for:"email"},"Email",-1)),ge={key:0,class:"p-invalid"},be={class:"field col-12"},ye=i(()=>o("label",{for:"alamat"},"Alamat",-1)),ve={class:"flex align-items-center justify-content-center"},Ae=i(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),we={key:0},Ce={class:"flex align-items-center justify-content-center"},Ke=i(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Se={key:0};function Pe(l,t,h,v,e,p){const C=r("Toast"),u=r("Button"),K=r("FileUpload"),S=r("MyExport"),P=r("Toolbar"),b=r("InputText"),d=r("Column"),D=r("DataTable"),A=r("AutoCompleteAkun"),x=r("Textarea"),w=r("Dialog");return f(),k("div",F,[o("div",N,[o("div",M,[a(C),a(P,{class:"mb-4"},{start:s(()=>[o("div",B,[a(u,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:p.FormNew},null,8,["onClick"]),a(u,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:p.confirmDeleteSelected,disabled:!e.selectedlKantor||!e.selectedlKantor.length},null,8,["onClick","disabled"])])]),end:s(()=>[a(K,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),a(S,{value:l.filteredItems,selectedColumns:l.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),a(D,{ref:"dt",value:e.lKantor,selection:e.selectedlKantor,"onUpdate:selection":t[1]||(t[1]=n=>e.selectedlKantor=n),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Kantor",responsiveLayout:"scroll"},{header:s(()=>[o("div",E,[z,o("span",O,[R,a(b,{modelValue:e.filters.global.value,"onUpdate:modelValue":t[0]||(t[0]=n=>e.filters.global.value=n),placeholder:"Search..."},null,8,["modelValue"])])])]),default:s(()=>[a(d,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(d,{field:"Kode",header:"Kode",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[Y,c(" "+m(n.data.numbercode),1)]),_:1}),a(d,{field:"kantor",header:"kantor",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[G,c(" "+m(n.data.nama),1)]),_:1}),a(d,{field:"Alamat",header:"Alamat",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[Z,c(" "+m(n.data.alamat),1)]),_:1}),a(d,{field:"Telepon",header:"Telepon",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[J,c(" "+m(n.data.telepon),1)]),_:1}),a(d,{field:"Email",header:"Email",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[Q,c(" "+m(n.data.email),1)]),_:1}),l.$setting.persediaan=="A"?(f(),I(d,{key:0,field:"Akun Penjualan",header:"Akun Penjualan",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[W,c(" "+m(n.data.akun_penjualan),1)]),_:1})):_("",!0),a(d,{field:"Akun Hutang",header:"Akun Hutang",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[X,c(" "+m(n.data.akun_hutang),1)]),_:1}),a(d,{field:"Akun Piutang",header:"Akun Piutang",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[$,c(" "+m(n.data.akun_piutang),1)]),_:1}),a(d,{header:"Action",headerStyle:"width:14%; min-width:10rem;"},{body:s(n=>[a(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:V=>p.submitForm(n.data)},null,8,["onClick"]),a(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:V=>p.confirmDeleteKantor(n.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),a(w,{visible:e.kantorDialog,"onUpdate:visible":t[10]||(t[10]=n=>e.kantorDialog=n),style:{width:"650px"},header:"Form Kantor",modal:!0,class:"p-fluid"},{footer:s(()=>[a(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:p.HideDialog},null,8,["onClick"]),a(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:p.saveKantor},null,8,["onClick"])]),default:s(()=>[o("div",ee,[o("div",te,[le,a(b,{id:"numbercode",modelValue:e.kantor.numbercode,"onUpdate:modelValue":t[2]||(t[2]=n=>e.kantor.numbercode=n),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.kantor.numbercode})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kantor.numbercode?(f(),k("small",ne,"required")):_("",!0)]),o("div",oe,[ae,a(b,{id:"nama",modelValue:e.kantor.nama,"onUpdate:modelValue":t[3]||(t[3]=n=>e.kantor.nama=n),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.kantor.nama})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kantor.nama?(f(),k("small",ie,"required")):_("",!0)]),o("div",se,[re,a(A,{modelValue:e.kantor.account_penjualan,"onUpdate:modelValue":t[4]||(t[4]=n=>e.kantor.account_penjualan=n),onSelectItem:l.selectAkun,showLabel:!1,level:4,class:g(null)},null,8,["modelValue","onSelectItem"])]),o("div",ue,[de,a(A,{modelValue:e.kantor.account_hutang,"onUpdate:modelValue":t[5]||(t[5]=n=>e.kantor.account_hutang=n),onSelectItem:l.selectAkun,showLabel:!1,level:4,class:g(null)},null,8,["modelValue","onSelectItem"])]),o("div",ce,[me,a(A,{modelValue:e.kantor.account_piutang,"onUpdate:modelValue":t[6]||(t[6]=n=>e.kantor.account_piutang=n),onSelectItem:l.selectAkun,showLabel:!1,level:4,class:g(null)},null,8,["modelValue","onSelectItem"])]),o("div",he,[pe,a(b,{id:"telepon",modelValue:e.kantor.telepon,"onUpdate:modelValue":t[7]||(t[7]=n=>e.kantor.telepon=n),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.kantor.telepon})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kantor.telepon?(f(),k("small",fe,"required")):_("",!0)]),o("div",ke,[_e,a(b,{id:"email",modelValue:e.kantor.email,"onUpdate:modelValue":t[8]||(t[8]=n=>e.kantor.email=n),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":e.isSubmitted&&!e.kantor.email})},null,8,["modelValue","class"]),e.isSubmitted&&!e.kantor.email?(f(),k("small",ge,"required")):_("",!0)]),o("div",be,[ye,a(x,{id:"alamat",modelValue:e.kantor.alamat,"onUpdate:modelValue":t[9]||(t[9]=n=>e.kantor.alamat=n),required:"true",rows:"2"},null,8,["modelValue"])])])]),_:1},8,["visible"]),a(w,{visible:e.deletekantorDialog,"onUpdate:visible":t[12]||(t[12]=n=>e.deletekantorDialog=n),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[11]||(t[11]=n=>e.deletekantorDialog=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:p.deleteKantor},null,8,["onClick"])]),default:s(()=>[o("div",ve,[Ae,e.kantor?(f(),k("span",we,[c("Are you sure you want to delete "),o("b",null,m(e.kantor.kantor),1),c("?")])):_("",!0)])]),_:1},8,["visible"]),a(w,{visible:e.deletelKantorDialog,"onUpdate:visible":t[14]||(t[14]=n=>e.deletelKantorDialog=n),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[13]||(t[13]=n=>e.deletelKantorDialog=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:p.deleteSelectedKantor},null,8,["onClick"])]),default:s(()=>[o("div",Ce,[Ke,e.kantor?(f(),k("span",Se,"Are you sure you want to delete the selected lKantor?")):_("",!0)])]),_:1},8,["visible"])])])])}const Ve=j(U,[["render",Pe],["__scopeId","data-v-59859ddb"]]);export{Ve as default};
