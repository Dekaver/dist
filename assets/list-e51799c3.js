import{_ as N,X as V,F as T,r,o as d,c as u,b as l,d as s,e as a,l as k,t as h,m as B,q as I,n as _,f as x,k as M,p as q,g as U}from"./index-11eb6111.js";import{a as f}from"./kategoriproduk-68d52205.js";import"./custom-zod-e9521e5d.js";import{A as j}from"./index-b9e295bc.js";import{z as b}from"./index-0ec66d4d.js";const z=b.object({kategori_barang:b.string().nonempty(),id_account:b.number().min(1)}),R={data(){return{FormError:{},lKategoriProduk:null,kategoriProdukDialog:!1,deleteKategoriProdukDialog:!1,deletelKategoriProdukDialog:!1,item:{},selectedlKategoriProduk:null,filters:{},isSubmitted:!1,isEdit:!1,lAkun:[],selectedAkun:null,filteredAkun:null,selectedColumns:[{field:"kategori_barang",header:"Kategori Barang",class:"text-left"},{field:"account_name",header:"Nama Akun",class:"text-left"},{field:"account_code",header:"Kode Akun",class:"text-left"}],Columns:[{field:"kategori_barang",header:"Kategori Barang",class:"text-left"},{field:"account_name",header:"Nama Akun",class:"text-left"},{field:"account_code",header:"Kode Akun",class:"text-left"}]}},created(){this.initFilters()},mounted(){this.getData()},methods:{async getData(){await f.index().then(e=>{this.lKategoriProduk=e.data.data}),await V.indexByTransaction().then(e=>{this.lAkun=e.data.data}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})})},FormNew(){this.item={},this.isEdit=!1,this.isSubmitted=!1,this.kategoriProdukDialog=!0,this.selectedAkun=null},HideDialog(){this.item={},this.isSubmitted=!1,this.kategoriProdukDialog=!1,this.selectedAkun=null},async Save(){try{this.FormError={},this.$isLoading.value=!0,this.isSubmitted=!0,z.parse(this.item),this.isEdit?await f.update(this.item.id,this.item).then(e=>{this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lKategoriProduk[this.lKategoriProduk.findIndex(o=>o.id==e.data.data.id)]=e.data.data,this.isEdit=!1,this.isLoading=!1,this.kategoriProdukDialog=!1}):await f.store(this.item).then(e=>{this.item.id=e.data.data.id,this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3}),this.lKategoriProduk.push(this.item),this.selectedAkun=null}),this.item={},this.isSubmitted=!1}catch(e){this.kategoriProdukDialog=!0,e instanceof b.ZodError?this.FormError=e.format():e instanceof j&&this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}finally{this.$timeoutLoading()}},FormEdit(e){this.isEdit=!0,this.item={...e},this.kategoriProdukDialog=!0,this.selectedAkun=this.lAkun.find(o=>o.id==e.id_account)},confirmDelete(e){this.item=e,this.deleteKategoriProdukDialog=!0},async Destroy(){this.deleteKategoriProdukDialog=!1,await f.destroy(this.item.id).then(e=>{this.lKategoriProduk=this.lKategoriProduk.filter(o=>o.id!==this.item.id),this.$toast.add({severity:"success",summary:"Successful",detail:e.data.message,life:3e3})}).catch(e=>{this.$toast.add({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3})}).finally(()=>{this.item={}})},selectAkun(e){this.item.id_account=e.value.id,this.item.account_name=e.value.name,this.item.account_code=e.value.code},searchAkun(e){setTimeout(()=>{this.filteredAkun=e.query.trim().length?this.lAkun.filter(o=>o.name.toLowerCase().includes(e.query.trim().toLowerCase())||o.code.toLowerCase().includes(e.query.trim().toLowerCase())):[...this.lAkun]},250)},exportCSV(){this.$refs.dt.exportCSV()},initFilters(){this.filters={global:{value:null,matchMode:T.CONTAINS}}}}},p=e=>(q("data-v-2db45693"),e=e(),U(),e),H={class:"grid crud-demo"},O={class:"col-12"},Y={class:"card"},X={class:"my-2"},Z={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},G=p(()=>l("h5",{class:"m-0"},"Manage Kategori Produk",-1)),J={class:"block mt-2 md:mt-0 p-input-icon-left"},Q=p(()=>l("i",{class:"pi pi-search"},null,-1)),W={key:0},$={key:1},ee={key:2},te={key:3},ie={class:"field"},oe=p(()=>l("label",{for:"item"},"Name",-1)),se={key:0,class:"p-invalid"},le={class:"field"},ae={class:""},re={class:"text-green-500 text-sm"},ne={class:"flex align-items-center justify-content-center"},de=p(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ue={key:0},ce={class:"flex align-items-center justify-content-center"},me=p(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ge={key:0};function he(e,o,pe,ke,t,c){const D=r("Toast"),m=r("Button"),A=r("MyExport"),K=r("Toolbar"),C=r("InputText"),y=r("Column"),w=r("ActionButton"),S=r("DataTable"),E=r("Label"),L=r("AutoComplete"),F=r("ErrorMsg"),v=r("Dialog");return d(),u("div",H,[l("div",O,[l("div",Y,[s(D),s(K,{class:"mb-4"},{start:a(()=>[l("div",X,[s(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:c.FormNew},null,8,["onClick"])])]),end:a(()=>[s(A,{value:t.lKategoriProduk,selectedColumns:t.selectedColumns,title:"Export Kategori Produk"},null,8,["value","selectedColumns"])]),_:1}),s(S,{ref:"dt",value:t.lKategoriProduk,selection:t.selectedlKategoriProduk,"onUpdate:selection":o[1]||(o[1]=i=>t.selectedlKategoriProduk=i),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Kategori Produk",responsiveLayout:"scroll"},{header:a(()=>[l("div",Z,[G,l("span",J,[Q,s(C,{modelValue:t.filters.global.value,"onUpdate:modelValue":o[0]||(o[0]=i=>t.filters.global.value=i),placeholder:"Search..."},null,8,["modelValue"])])])]),default:a(()=>[s(y,{header:"#",headerStyle:"width:10px"},{body:a(i=>[k(h(i.index+1),1)]),_:1}),(d(!0),u(B,null,I(t.selectedColumns,(i,P)=>(d(),M(y,{field:i.field,header:i.header,class:_(i.class),key:i.field+"_"+P,sortable:!0},{body:a(({data:g,field:n})=>[n=="icon"?(d(),u("div",W,[s(m,{icon:g[n],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):n=="status"?(d(),u("div",$,[l("span",{class:_("customer-badge status-"+e.getStatusColor(g[n]))},h(e.getStatusLabel(g[n])),3)])):n=="tanggal"||n=="tgl_mulai"||n=="tgl_selesai"?(d(),u("div",ee,h(e.$h.formatDate(g[n])),1)):(d(),u("div",te,h(g[n]),1))]),_:2},1032,["field","header","class"]))),128)),s(y,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:a(({data:i,index:P})=>[s(w,{data:i,index:P,onEdit:g=>c.FormEdit(i),onDelete:g=>c.confirmDelete(i)},null,8,["data","index","onEdit","onDelete"])]),_:1})]),_:1},8,["value","selection","filters"]),s(v,{visible:t.kategoriProdukDialog,"onUpdate:visible":o[4]||(o[4]=i=>t.kategoriProdukDialog=i),style:{width:"450px"},header:"item Details",modal:!0,class:"p-fluid"},{footer:a(()=>[s(m,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:c.HideDialog},null,8,["onClick"]),s(m,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:c.Save},null,8,["onClick"])]),default:a(()=>[l("div",ie,[oe,s(C,{id:"item",modelValue:t.item.kategori_barang,"onUpdate:modelValue":o[2]||(o[2]=i=>t.item.kategori_barang=i),modelModifiers:{trim:!0},required:"true",autofocus:"",class:_({"p-invalid":t.isSubmitted&&!t.item.kategori_barang})},null,8,["modelValue","class"]),t.isSubmitted&&!t.item.kategori_barang?(d(),u("small",se,"Name is required.")):x("",!0)]),l("div",le,[s(E,{required:"",for:"akun"},{default:a(()=>[k("Akun")]),_:1}),s(L,{id:"purchase_order",modelValue:t.selectedAkun,"onUpdate:modelValue":o[3]||(o[3]=i=>t.selectedAkun=i),optionLabel:"name",suggestions:t.filteredAkun,onComplete:c.searchAkun,onItemSelect:c.selectAkun,dropdown:"",class:_({"p-invalid":t.FormError.id_account})},{option:a(i=>[l("div",ae,[l("div",re,h(i.option.code),1),l("div",null,h(i.option.name),1)])]),_:1},8,["modelValue","suggestions","onComplete","onItemSelect","class"]),s(F,{error:t.FormError.id_account},null,8,["error"])])]),_:1},8,["visible"]),s(v,{visible:t.deleteKategoriProdukDialog,"onUpdate:visible":o[6]||(o[6]=i=>t.deleteKategoriProdukDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[s(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[5]||(o[5]=i=>t.deleteKategoriProdukDialog=!1)}),s(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:c.Destroy},null,8,["onClick"])]),default:a(()=>[l("div",ne,[de,t.item?(d(),u("span",ue,[k("Are you sure you want to delete "),l("b",null,h(t.item.item),1),k("?")])):x("",!0)])]),_:1},8,["visible"]),s(v,{visible:t.deletelKategoriProdukDialog,"onUpdate:visible":o[8]||(o[8]=i=>t.deletelKategoriProdukDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[s(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[7]||(o[7]=i=>t.deletelKategoriProdukDialog=!1)}),s(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:e.deleteSelectedlKategoriProduk},null,8,["onClick"])]),default:a(()=>[l("div",ce,[me,e.brand?(d(),u("span",ge,"Are you sure you want to delete the selected lKategoriProduk?")):x("",!0)])]),_:1},8,["visible"])])])])}const Pe=N(R,[["render",he],["__scopeId","data-v-2db45693"]]);export{Pe as default};
