import{D as f,_ as N,F as U,r as a,o as _,c as b,b as c,d as s,e as n,l as m,t as h,f as g,n as S,p as F,g as K}from"./index-11eb6111.js";import{a as T}from"./options-b2eb7ae6.js";const v={index(){return f.get("/master/account/")},store(t){return f.post("/master/account/",t)},update(t,o){return f.put("/master/account/"+t,o)},show(t){return f.get("/master/account/"+t)},destroy(t){return f.delete("/master/account/"+t)},selectLevel(t){return f.get("/master/acount/select/level/"+t)},selectParent(t,o){return f.get("/master/account/select/parent/"+t+"/level/"+o)}};const M={data(){return{lLevel:Array.from({length:4},(t,o)=>({name:`Level #${o+1}`,code:o+1})),lParent:null,lAccount:null,account:{},selectedlAccount:null,filters:{},selectedLevel:{},selectedparent:{},isSubmitted:!1,accountDialog:!1,deleteAccountDialog:!1,deletelAccountDialog:!1,isEditDialog:!1}},created(){this.initFilters()},mounted(){this.getData()},methods:{getData(){v.index().then(t=>{this.lAccount=t.data.data})},FormNew(){this.account={},this.isEditDialog=!1,this.account.aktif=!0,this.account.pembayaran=!1,this.isSubmitted=!1,this.accountDialog=!0},HideDialog(){this.accountDialog=!1,this.isSubmitted=!1},submitForm(){this.isSubmitted=!0,this.account.account.trim()&&(this.isEditDialog?(v.update(this.account.id_account,this.account).then(()=>{}).finally(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"account Updated",life:3e3})}),this.lAccount[this.findIndexById(this.account.id)]=this.account):(v.store(this.account).then(()=>{}).finally(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"account Created",life:3e3})}),this.lAccount.push(this.account)),this.accountDialog=!1,this.account={})},editAccount(t){this.isEditDialog=!0,this.account={...t},this.accountDialog=!0},confirmDeleteAccount(t){this.account=t,this.deleteAccountDialog=!0},deleteAccount(){this.lAccount=this.lAccount.filter(t=>t.id!==this.account.id),this.deleteAccountDialog=!1,v.delete(this.account.id).then(()=>{this.$toast.add({severity:"success",summary:"Successful",detail:"account Deleted",life:3e3})}),this.account={}},findIndexById(t){let o=-1;for(let p=0;p<this.lAccount.length;p++)if(this.lAccount[p].id===t){o=p;break}return o},createId(){let t=0;return t=this.lAccount.reduce((p,y)=>p.id>y.id?p:y).id+1,t},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deletelAccountDialog=!0},deleteSelectedlAccount(){this.lAccount=this.lAccount.filter(t=>!this.selectedlAccount.includes(t)),this.deletelAccountDialog=!1,this.selectedlAccount=null,this.$toast.add({severity:"success",summary:"Successful",detail:"lAccount Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:U.CONTAINS}}},selectLevel(t){this.account.level=t.value.code,this.account.level==4?this.account.tipe_account=!0:this.account.tipe_account=!1,this.getOptionParent()},selectParent(t){this.account.parent=t.value.id,this.account.account_parent=t.value.parent,console.log(this.account),v.selectParent(this.account.parent,this.account.level).then(o=>{this.account.id_account=o.data.data,console.log(this.account.id_account)}).catch(()=>{})},getOptionParent(){T.getParentAccount(this.account.level-1).then(t=>{this.lParent=t.data.data}).catch(()=>{})}}},i=t=>(F("data-v-34442f56"),t=t(),K(),t),E={class:"grid crud-demo"},B={class:"col-12"},O={class:"card"},q={class:"my-2"},z={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},R=i(()=>c("h5",{class:"m-0"},"Manage Account",-1)),j={class:"block mt-2 md:mt-0 p-input-icon-left"},H=i(()=>c("i",{class:"pi pi-search"},null,-1)),Y=i(()=>c("span",{class:"p-column-title"},"Kode Account",-1)),G=i(()=>c("span",{class:"p-column-title"},"Akun Perkiraan",-1)),J=i(()=>c("span",{class:"p-column-title"},"Kode Parent",-1)),Q=i(()=>c("span",{class:"p-column-title"},"Parent",-1)),W=i(()=>c("span",{class:"p-column-title"},"Pembayaran",-1)),X=i(()=>c("span",{class:"p-column-title"},"Debit",-1)),Z=i(()=>c("span",{class:"p-column-title"},"Kredit",-1)),$={class:"formgrildd grid"},ee={class:"field col-6"},te=i(()=>c("label",{for:"account"},"Level",-1)),le={key:0,class:"p-invalid"},oe={class:"field col-6"},ce=i(()=>c("label",{for:"account"},"Parent",-1)),se={class:"formgrildd grid"},ne={class:"field col-6"},ie=i(()=>c("label",{for:"account"},"Kode Account",-1)),ae={key:0,class:"p-invalid"},ue={class:"field col-6"},de=i(()=>c("label",{for:"account"},"Nama Account",-1)),re={key:0,class:"p-invalid"},me={class:"formgrildd grid"},pe=i(()=>c("div",{class:"field col-4"},[c("label",{for:"account"},"Pembayaran")],-1)),he={class:"field col-2"},fe=i(()=>c("div",{class:"field col-4"},[c("label",{for:"account"},"Aktif")],-1)),_e={class:"field col-2"},be={class:"flex align-items-center justify-content-center"},ge=i(()=>c("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ve={key:0},ye={class:"flex align-items-center justify-content-center"},Ae=i(()=>c("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ke={key:0};function De(t,o,p,y,e,u){const C=a("Toast"),d=a("Button"),P=a("FileUpload"),x=a("MyExport"),V=a("Toolbar"),A=a("InputText"),r=a("Column"),L=a("DataTable"),D=a("Dropdown"),w=a("InputSwitch"),k=a("Dialog");return _(),b("div",E,[c("div",B,[c("div",O,[s(C),s(V,{class:"mb-4"},{start:n(()=>[c("div",q,[s(d,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:u.FormNew},null,8,["onClick"]),s(d,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:u.confirmDeleteSelected,disabled:!e.selectedlAccount||!e.selectedlAccount.length},null,8,["onClick","disabled"])])]),end:n(()=>[s(P,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),s(x,{value:t.filteredItems,selectedColumns:t.selectedColumns,title:"Export Purchase Order"},null,8,["value","selectedColumns"])]),_:1}),s(L,{ref:"dt",value:e.lAccount,selection:e.selectedlAccount,"onUpdate:selection":o[1]||(o[1]=l=>e.selectedlAccount=l),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Account",responsiveLayout:"scroll"},{header:n(()=>[c("div",z,[R,c("span",j,[H,s(A,{modelValue:e.filters.global.value,"onUpdate:modelValue":o[0]||(o[0]=l=>e.filters.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:n(()=>[s(r,{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(r,{field:"Kode Account",header:"Kode Account",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[Y,m(" "+h(l.data.id_account),1)]),_:1}),s(r,{field:"Akun Perkiraan",header:"Akun Perkiraan",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[G,m(" "+h(l.data.account),1)]),_:1}),s(r,{field:"Kode Parent",header:"Kode Parent",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[J,m(" "+h(l.data.parent),1)]),_:1}),s(r,{field:"Parent",header:"Parent",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[Q,m(" "+h(l.data.account_parent),1)]),_:1}),s(r,{field:"Pembayaran",header:"Pembayaran",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[W,m(" "+h(l.data.pembayaran),1)]),_:1}),s(r,{field:"Debit",header:"Debit",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[X,m(" "+h(l.data.debit),1)]),_:1}),s(r,{field:"Kredit",header:"Kredit",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[Z,m(" "+h(l.data.kredit),1)]),_:1}),s(r,{headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[s(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:I=>u.editAccount(l.data)},null,8,["onClick"]),s(d,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",onClick:I=>u.confirmDeleteAccount(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),s(k,{visible:e.accountDialog,"onUpdate:visible":o[8]||(o[8]=l=>e.accountDialog=l),style:{width:"720px"},header:"account Details",modal:!0,class:"p-fluid"},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:u.HideDialog},null,8,["onClick"]),s(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:u.submitForm},null,8,["onClick"])]),default:n(()=>[c("div",$,[c("div",ee,[te,s(D,{modelValue:e.selectedLevel,"onUpdate:modelValue":o[2]||(o[2]=l=>e.selectedLevel=l),options:e.lLevel,optionLabel:"name",placeholder:"Select Level",class:"w-full",onChange:u.selectLevel},null,8,["modelValue","options","onChange"]),e.isSubmitted&&!e.account.level?(_(),b("small",le,"Level is required.")):g("",!0)]),c("div",oe,[ce,s(D,{modelValue:e.selectedparent,"onUpdate:modelValue":o[3]||(o[3]=l=>e.selectedparent=l),options:e.lParent,optionLabel:"text",placeholder:"Select Level",class:"w-full",onChange:u.selectParent},null,8,["modelValue","options","onChange"])])]),c("div",se,[c("div",ne,[ie,s(A,{id:"account",modelValue:e.account.id_account,"onUpdate:modelValue":o[4]||(o[4]=l=>e.account.id_account=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":e.isSubmitted&&!e.account.id_account})},null,8,["modelValue","class"]),e.isSubmitted&&!e.account.id_account?(_(),b("small",ae,"Kode Account is required.")):g("",!0)]),c("div",ue,[de,s(A,{id:"account",modelValue:e.account.account,"onUpdate:modelValue":o[5]||(o[5]=l=>e.account.account=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":e.isSubmitted&&!e.account.account})},null,8,["modelValue","class"]),e.isSubmitted&&!e.account.account?(_(),b("small",re,"Nama Account is required.")):g("",!0)])]),c("div",me,[pe,c("div",he,[s(w,{modelValue:e.account.pembayaran,"onUpdate:modelValue":o[6]||(o[6]=l=>e.account.pembayaran=l)},null,8,["modelValue"])]),fe,c("div",_e,[s(w,{modelValue:e.account.aktif,"onUpdate:modelValue":o[7]||(o[7]=l=>e.account.aktif=l)},null,8,["modelValue"])])])]),_:1},8,["visible"]),s(k,{visible:e.deleteAccountDialog,"onUpdate:visible":o[10]||(o[10]=l=>e.deleteAccountDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[9]||(o[9]=l=>e.deleteAccountDialog=!1)}),s(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:u.deleteAccount},null,8,["onClick"])]),default:n(()=>[c("div",be,[ge,e.account?(_(),b("span",ve,[m("Are you sure you want to delete "),c("b",null,h(e.account.account),1),m("?")])):g("",!0)])]),_:1},8,["visible"]),s(k,{visible:e.deletelAccountDialog,"onUpdate:visible":o[12]||(o[12]=l=>e.deletelAccountDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[11]||(o[11]=l=>e.deletelAccountDialog=!1)}),s(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:u.deleteSelectedlAccount},null,8,["onClick"])]),default:n(()=>[c("div",ye,[Ae,e.account?(_(),b("span",ke,"Are you sure you want to delete the selected lAccount?")):g("",!0)])]),_:1},8,["visible"])])])])}const Ce=N(M,[["render",De],["__scopeId","data-v-34442f56"]]);export{Ce as default};
