import{_ as x,Y as N,z as O,F as V,r as d,o as r,c,b as l,d as s,e as h,f as F,n as v,l as I,t as f,m as L,q as R,k as B}from"./index-11eb6111.js";import{a as A}from"./index-fa5c02f8.js";import{a as w}from"./xlsx.min-b21a3818.js";const E={data(){return{lItem:[],filter:!1,filters:{},f:{awal:null,akhir:null,selectedCustomer:null,selectedGudang:null},columns:[{field:"kode_barang",header:"Kode Barang"},{field:"barang",header:"Nama Barang"},{field:"nomor",header:"Nomor SO"},{field:"tanggal",header:"Tanggal SO",type:"date"},{field:"nomor_po",header:"Nomor PO"},{field:"tanggal_po",header:"Tanggal PO",type:"date"},{field:"nomor_penawaran",header:"Nomor Penawaran"},{field:"diorder",header:"Di Order",type:"number"},{field:"dikirim",header:"Di Kirim",type:"number"},{field:"sisa",header:"Sisa",type:"number"},{field:"satuan",header:"Satuan"},{field:"customer",header:"Customer"}]}},created(){this.initFilters()},mounted(){this.getData()},computed:{filteredItems:function(){return this.lItem.filter(o=>(this.f.awal==null?!0:new Date(this.f.awal)<=new Date(o.tanggal))&&(this.f.akhir==null?!0:new Date(this.f.akhir)>=new Date(o.tanggal))&&(this.f.selectedCustomer?this.f.selectedCustomer.id==o.id_kontak:!0))}},methods:{async getData(){await N.index({is_customer:1}).then(o=>{this.lCustomer=o.data.data}),this.getReport()},async getReport(){await A.outstandingSO().then(o=>{this.lItem=o.data.data})},showHideFilter(){this.filter=!this.filter},clearFilter(){this.f={awal:null,akhir:null,selectedCustomer:null,selectedGudang:null}},exportToXLSX(){var o=document.querySelector("table"),a=o.cloneNode(!0),b=a.querySelector("thead tr").childElementCount,_=document.createElement("th");_.setAttribute("colspan",b),_.textContent="Outstanding SO";var e=document.createElement("tr");e.append(_);var n=a.querySelector("thead");n.insertBefore(e,n.childNodes[0]);const p=w.utils.table_to_sheet(a),m=[{width:15},{wch:25},{width:15},{width:13},{width:13},{width:20},{width:20},{width:20},{width:20},{width:14},{width:15},{width:15}];p["!cols"]=m,p.A1.s={font:{name:"Arial Black",sz:12,bold:!0},alignment:{vertical:"center",horizontal:"center"}};const g=w.utils.book_new();w.utils.book_append_sheet(g,p,"Sheet1"),w.writeFile(g,`Outstanding SO ${O().tz("Asia/Makassar").format("DD-MM-YYYY")}.xlsx`)},initFilters(){this.filters={global:{value:null,matchMode:V.CONTAINS}}}}},M={class:"grid crud-demo"},z={class:"col-12"},U={class:"card"},Y={class:"my-2"},q={key:0,class:"m-2"},H=l("h5",{class:"mbe-4"},"Pencarian Outstanding SO",-1),K={class:"p-fluid formgrid grid"},X={class:"field col-2"},G={class:"p-float-label"},j=l("p",{class:"mb-1"},"Periode Awal",-1),J={class:"field col-2"},Q={class:"p-float-label"},W=l("p",{class:"mb-1"},"Periode Akhir",-1),Z={class:"field col-2 d-flex justifiy-content-center align-items-end mb-0"},$=l("label",{for:"supplier",class:"mb-1"},"Customer",-1),ee={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},te=l("h5",{class:"m-0"},"Laporan Outstanding SO",-1),oe={class:"block mt-2 md:mt-0 p-input-icon-left"},le=l("i",{class:"pi pi-search"},null,-1),ae={key:0},se={key:1},ne={key:2},re={key:3},ie={key:4},de={key:5};function ce(o,a,b,_,e,n){const p=d("Toast"),m=d("Button"),g=d("Toolbar"),k=d("Calendar"),C=d("Dropdown"),D=d("InputText"),y=d("Column"),S=d("Tag"),T=d("DataTable");return r(),c("div",M,[l("div",z,[l("div",U,[s(p),s(g,{class:"mb-4"},{start:h(()=>[l("div",Y,[s(m,{icon:"pi pi-filter",label:"Filter",onClick:n.showHideFilter},null,8,["onClick"])]),e.f.awal||e.f.akhir||e.f.selectedGudang||e.f.selectedCustomer?(r(),c("div",q,[s(m,{icon:"pi pi-times",label:"Clear",severity:"danger",outlined:"",onClick:n.clearFilter},null,8,["onClick"])])):F("",!0)]),end:h(()=>[s(m,{label:"Export",icon:"pi pi-upload",severity:"help",onClick:n.exportToXLSX},null,8,["onClick"])]),_:1}),l("div",{class:v(["card fadein",{hidden:!e.filter}])},[H,l("div",K,[l("div",X,[l("span",G,[j,s(k,{showIcon:"",dateFormat:"dd-mm-yy",onDateSelect:n.getReport,modelValue:e.f.awal,"onUpdate:modelValue":a[0]||(a[0]=t=>e.f.awal=t),inputId:"f.awal",maxDate:e.f.akhir},null,8,["onDateSelect","modelValue","maxDate"])])]),l("div",J,[l("span",Q,[W,s(k,{showIcon:"",dateFormat:"dd-mm-yy",onDateSelect:n.getReport,modelValue:e.f.akhir,"onUpdate:modelValue":a[1]||(a[1]=t=>e.f.akhir=t),inputId:"f.akhir",minDate:e.f.awal},null,8,["onDateSelect","modelValue","minDate"])])]),l("div",Z,[$,s(C,{id:"supplier",modelValue:e.f.selectedCustomer,"onUpdate:modelValue":a[2]||(a[2]=t=>e.f.selectedCustomer=t),onChange:n.getReport,options:o.lCustomer,optionLabel:"kontak",placeholder:"Customer",showClear:""},null,8,["modelValue","onChange","options"])])])],2),s(T,{ref:"dt",value:n.filteredItems,selection:o.selectedItem,"onUpdate:selection":a[4]||(a[4]=t=>o.selectedItem=t),dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Entries",filters:e.filters,responsiveLayout:"scroll"},{header:h(()=>[l("div",ee,[te,l("span",oe,[le,s(D,{modelValue:e.filters.global.value,"onUpdate:modelValue":a[3]||(a[3]=t=>e.filters.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),default:h(()=>[s(y,{header:"No.",headerStyle:"width:10px"},{body:h(t=>[I(f(t.index+1),1)]),_:1}),(r(!0),c(L,null,R(e.columns,(t,P)=>(r(),B(y,{field:t.field,header:t.header,class:v(t.class),key:t.field+"_"+P,sortable:!0},{body:h(({data:u,field:i})=>[i=="icon"?(r(),c("div",ae,[s(m,{icon:u[i],class:"p-button-rounded p-button-outlined p-button-icon"},null,8,["icon"])])):i=="status"?(r(),c("div",se,[s(S,{value:o.$h.getLabel(u[i]),severity:o.$h.getLabel(u[i])},null,8,["value","severity"])])):t.type=="date"?(r(),c("div",ne,f(o.$h.formatDate(u[i])),1)):t.type=="number"?(r(),c("div",re,f(o.$h.formatNumber(u[i])),1)):t.type=="currency"?(r(),c("div",ie,f(o.$h.formatNumber(u[i])),1)):(r(),c("div",de,f(u[i]),1))]),_:2},1032,["field","header","class"]))),128))]),_:1},8,["value","selection","filters"])])])])}const pe=x(E,[["render",ce]]);export{pe as default};
