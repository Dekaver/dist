import{_ as R,a3 as h,F as q,r as n,A as I,o as c,c as x,d as t,b as o,e as a,t as u,B as U,k as C,l as p,m as j,q as H,n as f,f as O}from"./index-11eb6111.js";import{A as z}from"./index-b9e295bc.js";import"./custom-zod-e9521e5d.js";import{z as m}from"./index-0ec66d4d.js";const Q=m.object({name:m.string().min(3),value:m.string().min(3),type:m.string().min(3)}),Y=Q,Z={data(){return{expandedKeys:{},lMenuApproval:[{key:"0",label:"Transaksi",icon:"pi pi-shopping-cart",children:[{key:"0-0",label:"Pembelian",icon:"pi pi-shopping-bag",data:"/setting/pembelian",type:"url"},{key:"0-1",label:"Penjualan",icon:"pi pi-shopping-cart",data:"/setting/penjualan",type:"url"}]},{key:"1",label:"Persetujuan",icon:"pi pi-shield",children:[{key:"1-0",label:"Pembelian",icon:"pi pi-shopping-bag",children:[{key:"1-1",label:"Purchase Request",icon:"pi pi-shopping-bag",data:"/setting/purchase-request-approval",type:"url"},{key:"1-0",label:"Purchase Order",icon:"pi pi-shopping-bag",data:"/setting/purchase-order-approval",type:"url"},{key:"1-5",label:"Penerimaan Barang",icon:"pi pi-box",data:"/setting/penerimaan-barang-approval",type:"url"},{key:"1-4",label:"Ap",icon:"pi pi-box",data:"/setting/ap-approval",type:"url"},{key:"1-3",label:"Payment Ap",icon:"pi pi-box",data:"/setting/payment-ap-approval",type:"url"}]},{key:"1-2",label:"Penjualan",icon:"pi pi-shopping-cart",children:[{key:"1-3",label:"Quotation",icon:"pi pi-book",data:"/setting/quotation-approval",type:"url"},{key:"1-1",label:"Sales Order",icon:"pi pi-shopping-cart",data:"/setting/sales-order-approval",type:"url"},{key:"1-4",label:"Delivery Order",icon:"pi pi-truck",data:"/setting/delivery-order-approval",type:"url"},{key:"1-2",label:"Invoice",icon:"pi pi-envelope",data:"/setting/invoice-approval",type:"url"},{key:"1-5",label:"Payment Ar",icon:"pi pi-envelope",data:"/setting/payment-ar-approval",type:"url"}]}]},{key:"2",label:"Akuntansi",icon:"pi pi-money-bill",data:"/setting/akuntansi",type:"url"}],checked:!0,FormError:{},lSetting:[],setting:{},selectedSetting:null,lType:[{label:"String",value:"string"},{label:"Integer",value:"integer"},{label:"Float",value:"float"},{label:"Boolean",value:"boolean"},{label:"Date",value:"date"},{label:"Datetime",value:"datetime"},{label:"Time",value:"time"}],selectedType:null,filters:{},selectedColumns:[{header:"Setting",field:"name",class:"w-20rem"},{header:"Value",field:"value",class:"w-20rem"},{header:"Type",field:"type",class:"w-20rem"}],Columns:[{header:"Setting",field:"name",class:"w-20rem"},{header:"Value",field:"value",class:"w-20rem"},{header:"Type",field:"type",class:"w-20rem"}],isSubmitted:!1,isEdit:!1,formDialog:!1,deleteFormDialog:!1}},created(){this.initFilters()},mounted(){this.expandAll(),this.getData()},methods:{expandAll(){for(let i of this.lMenuApproval)this.expandNode(i);this.expandedKeys={...this.expandedKeys}},collapseAll(){this.expandedKeys={}},expandNode(i){if(i.children&&i.children.length){this.expandedKeys[i.key]=!0;for(let s of i.children)this.expandNode(s)}},getData(){h.index().then(i=>{this.lSetting=i.data.data})},async Save(){try{this.isSubmitted=!0,this.$isLoading.value=!0,Y.parse(this.setting),this.isEdit?await h.update(this.setting.id,this.setting).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lSetting[this.lSetting.findIndex(s=>s.id===this.setting.id)]=this.setting,this.formDialog=!1}):await h.store(this.setting).then(i=>{this.$toast.add({severity:"success",summary:"Successful",detail:i.data.message,life:3e3}),this.lSetting.push(i.data.data),this.formDialog=!1})}catch(i){console.log(i),i instanceof m.ZodError?this.FormError=i.format():i instanceof z&&this.$toast.add({severity:"error",summary:"Failed",detail:i.response.data.message,life:3e3})}finally{this.$timeoutLoading()}},Destroy(i){this.lSetting=this.lSetting.filter(s=>s.id!==i.id),h.destroy(i.id).then(s=>{this.$toast.add({severity:"success",summary:"Successful",detail:s.data.message,life:3e3}),this.getData(),this.deleteFormDialog=!1})},initFilters(){this.filters={global:{value:null,matchMode:q.CONTAINS}}},exportCSV(){this.$refs.dt.exportCSV()},FormNew(){this.isSubmitted=!1,this.setting={},this.selectType=null,this.FormError={},this.formDialog=!0},settingApproval(){this.$router.push("/setting/approval")},SettingPemission(){this.$router.push("/setting/permission")},SaldoAwal(){this.$router.push("/setting/saldo-awal")},SaldoAwalAR(){this.$router.push("/saldo-awal-ar")},SaldoAwalAP(){this.$router.push("/saldo-awal-ap")},KlasifikasiAkun(){this.$router.push("/setting/klasifikasi-akun")},PosingBualanan(){this.$router.push("/account-posting")},SettingRole(){this.$router.push("/setting/role")},SettingMenu(){this.$router.push("/setting/menu")},FormEdit(i){this.FormError={},this.setting={...i},this.selectedType=this.lType.find(s=>s.value===i.type),this.isSubmitted=!1,this.formDialog=!0,this.isEdit=!0},confirmDelete(i){this.setting={...i},this.deleteFormDialog=!0},selectType(i){this.selectedType=i.value,this.setting.type=i.value.value},HideDialog(){this.formDialog=!1}},watch:{checked:{handler:function(i){i?this.expandAll():this.collapseAll()}}}},G={class:"grid crud-demo"},J={class:"col-12"},W={class:"card"},X={class:"grid gap-2 m-2"},$={class:"col-12 md:col-6"},ee={class:"card"},le={class:"flex flex-wrap gap-2"},te={class:"col-12 md:col-6"},ie={class:"grid"},se={class:"col-12"},oe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ae=o("h5",{class:"m-0"},"Manajemen Setting",-1),ne={class:"flex gap-2 col-12 md:col-5"},re={class:"block p-input-icon-left w-full"},de=o("i",{class:"pi pi-search"},null,-1),pe=o("div",{class:"text-center"},"Empty",-1),ce={class:"formgrid grid"},ue={class:"field col-12"},me={class:"field col-12"},ge={class:"field col-12"},he={class:"flex align-items-center justify-content-center"},fe=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ye={key:0};function be(i,s,ve,ke,e,r){const w=n("Toast"),d=n("Button"),A=n("MyExport"),D=n("Toolbar"),T=n("ToggleButton"),F=n("router-link"),P=n("Tree"),y=n("InputText"),E=n("MultiSelect"),b=n("Column"),V=n("ActionButton"),M=n("DataTable"),B=n("Card"),v=n("Label"),k=n("ErrorMsg"),L=n("Dropdown"),S=n("Dialog"),K=I("ripple");return c(),x("div",G,[t(w),o("div",J,[o("div",W,[t(D,null,{start:a(()=>[o("div",X,[t(d,{label:"Tambah",icon:"pi pi-plus",class:"p-button-primary mr-2",onClick:r.FormNew},null,8,["onClick"]),t(d,{label:"Menu",icon:"pi pi-list",class:"p-button-info mr-2",onClick:r.SettingMenu},null,8,["onClick"]),t(d,{label:"Role",icon:"pi pi-lock",class:"p-button-help mr-2",onClick:r.SettingRole},null,8,["onClick"]),t(d,{label:"Permission",icon:"pi pi-shield",class:"p-button-warning mr-2",onClick:r.SettingPemission},null,8,["onClick"]),t(d,{label:"Klasifikasi Akun",icon:"pi pi-book",class:"p-button-primary mr-2",onClick:r.KlasifikasiAkun},null,8,["onClick"]),t(d,{label:"Posting Bualanan",icon:"pi pi-file",class:"p-button-primary mr-2",onClick:r.PosingBualanan},null,8,["onClick"]),t(d,{label:"Saldo Awal Akun",icon:"pi pi-dollar",class:"p-button-primary mr-2",onClick:r.SaldoAwal},null,8,["onClick"]),t(d,{label:"Saldo Awal AR",icon:"pi pi-dollar",class:"p-button-primary mr-2",onClick:r.SaldoAwalAR},null,8,["onClick"]),t(d,{label:"Saldo Awal AP",icon:"pi pi-dollar",class:"p-button-primary mr-2",onClick:r.SaldoAwalAP},null,8,["onClick"])])]),end:a(()=>[t(A,{value:e.lSetting,selectedColumns:e.selectedColumns,title:"Export Setting"},null,8,["value","selectedColumns"])]),_:1})])]),o("div",$,[o("div",ee,[o("div",le,[t(T,{modelValue:e.checked,"onUpdate:modelValue":s[0]||(s[0]=l=>e.checked=l),class:"w-9rem",onLabel:"Collapse",offLabel:"Expand",onIcon:"pi pi-angle-up",offIcon:"pi pi-angle-down",size:"small"},null,8,["modelValue"])]),t(P,{value:e.lMenuApproval,expandedKeys:e.expandedKeys,"onUpdate:expandedKeys":s[1]||(s[1]=l=>e.expandedKeys=l),class:"mb-6 mt-2"},{default:a(l=>[o("b",null,u(l.node.label),1)]),url:a(l=>[U((c(),C(F,{to:l.node.data,class:"p-ripple","exact-active-class":"active-route",exact:""},{default:a(()=>[p(u(l.node.label),1)]),_:2},1032,["to"])),[[K]])]),_:1},8,["value","expandedKeys"])])]),o("div",te,[o("div",ie,[o("div",se,[t(B,{class:"card"},{content:a(()=>[t(M,{ref:"dt",value:e.lSetting,dataKey:"id",paginator:!0,rows:10,filters:e.filters,sortMode:"single",sortField:"id",sortOrder:1,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{header:a(()=>[o("div",oe,[ae,o("div",ne,[o("span",re,[de,t(y,{modelValue:e.filters.global.value,"onUpdate:modelValue":s[2]||(s[2]=l=>e.filters.global.value=l),placeholder:"Search...",class:"w-full"},null,8,["modelValue"])]),t(E,{modelValue:e.selectedColumns,"onUpdate:modelValue":s[3]||(s[3]=l=>e.selectedColumns=l),options:e.Columns,optionLabel:"header",placeholder:"Select Column",class:"w-3rem"},null,8,["modelValue","options"])])])]),empty:a(()=>[pe]),default:a(()=>[t(b,{header:"#",headerStyle:"width:10px"},{body:a(l=>[p(u(l.index+1),1)]),_:1}),(c(!0),x(j,null,H(e.selectedColumns,(l,_)=>(c(),C(b,{field:l.field,header:l.header,class:f(l.class),key:l.field+"_"+_,sortable:!0},{body:a(({data:g,field:N})=>[o("div",null,u(g[N]),1)]),_:2},1032,["field","header","class"]))),128)),t(b,{header:"Aksi",headerStyle:"width:6%; max-width:1rem;"},{body:a(({data:l,index:_})=>[t(V,{data:l,index:_,onEdit:g=>r.FormEdit(l),onDelete:g=>r.confirmDelete(l),onHakAkses:g=>i.FormHakAkses(l),menuItems:[{label:"Hak Akses",icon:"pi pi-lock",action:"hak-akses"}]},null,8,["data","index","onEdit","onDelete","onHakAkses"])]),_:1})]),_:1},8,["value","filters"])]),_:1})]),t(S,{visible:e.formDialog,"onUpdate:visible":s[7]||(s[7]=l=>e.formDialog=l),style:{width:"450px"},header:"Form Setting",modal:!0,class:"p-fluid"},{footer:a(()=>[t(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:r.HideDialog},null,8,["onClick"]),t(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:r.Save},null,8,["onClick"])]),default:a(()=>[o("div",ce,[o("div",ue,[t(v,{required:"",for:"setting"},{default:a(()=>[p("Nama")]),_:1}),t(y,{id:"setting",modelValue:e.setting.name,"onUpdate:modelValue":s[4]||(s[4]=l=>e.setting.name=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f({"p-invalid":e.FormError.name})},null,8,["modelValue","class"]),t(k,{error:e.FormError.name},null,8,["error"])]),o("div",me,[t(v,{required:"",for:"setting"},{default:a(()=>[p("Value")]),_:1}),t(y,{id:"setting",modelValue:e.setting.value,"onUpdate:modelValue":s[5]||(s[5]=l=>e.setting.value=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f({"p-invalid":e.FormError.value})},null,8,["modelValue","class"]),t(k,{error:e.FormError.value},null,8,["error"])]),o("div",ge,[t(v,{required:"",for:"setting"},{default:a(()=>[p("Type")]),_:1}),t(L,{modelValue:e.selectedType,"onUpdate:modelValue":s[6]||(s[6]=l=>e.selectedType=l),options:e.lType,optionLabel:"label",placeholder:"Select a Type",onChange:r.selectType,class:f({"p-invalid":e.FormError.type})},null,8,["modelValue","options","onChange","class"]),t(k,{error:e.FormError.type},null,8,["error"])])])]),_:1},8,["visible"]),t(S,{visible:e.deleteFormDialog,"onUpdate:visible":s[10]||(s[10]=l=>e.deleteFormDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[t(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[8]||(s[8]=l=>e.deleteFormDialog=!1)}),t(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:s[9]||(s[9]=l=>r.Destroy(e.setting))})]),default:a(()=>[o("div",he,[fe,e.setting?(c(),x("span",ye,[p("Are you sure you want to delete "),o("b",null,u(e.setting.name),1),p("?")])):O("",!0)])]),_:1},8,["visible"])])])])}const we=R(Z,[["render",be]]);export{we as default};
